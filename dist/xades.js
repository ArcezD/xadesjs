var XAdES=function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}var a=r(55);t.xml=a,n(r(106));var i=r(1);t.Parse=i.XmlObject.Parse;var o=r(1);t.Select=o.Select,t.Convert=o.Convert},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}n(r(38)),n(r(20)),n(r(29)),n(r(28)),n(r(37)),n(r(13)),n(r(11)),n(r(31)),n(r(30)),n(r(39))},function(e,t,r){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,r){function n(e,t){if(e instanceof t)return e;var r=new t;return r.idBlock=e.idBlock,r.lenBlock=e.lenBlock,r.warnings=e.warnings,r.valueBeforeDecode=e.valueBeforeDecode.slice(0),r}var a=t,i=new b({},Object);if((0,h.checkBufferParams)(new p,e,t,r)===!1)return i.error="Wrong input parameters",{offset:-1,result:i};var o=new Uint8Array(e,t,r);if(0===o.length)return this.error="Zero buffer length",{offset:-1,result:i};var s=i.idBlock.fromBER(e,t,r);if(i.warnings.concat(i.idBlock.warnings),s===-1)return i.error=i.idBlock.error,{offset:-1,result:i};if(t=s,r-=i.idBlock.blockLength,s=i.lenBlock.fromBER(e,t,r),i.warnings.concat(i.lenBlock.warnings),s===-1)return i.error=i.lenBlock.error,{offset:-1,result:i};if(t=s,r-=i.lenBlock.blockLength,i.idBlock.isConstructed===!1&&i.lenBlock.isIndefiniteForm===!0)return i.error="Indefinite length form used for primitive encoding form",{offset:-1,result:i};var l=b;switch(i.idBlock.tagClass){case 1:if(i.idBlock.tagNumber>=37&&i.idBlock.isHexOnly===!1)return i.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:i};switch(i.idBlock.tagNumber){case 0:if(i.idBlock.isConstructed===!0&&i.lenBlock.length>0)return i.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:i};l=k;break;case 1:l=E;break;case 2:l=T;break;case 3:l=x;break;case 4:l=B;break;case 5:l=I;break;case 6:l=H;break;case 10:l=D;break;case 12:l=M;break;case 14:l=ce;break;case 15:return i.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:i};case 16:l=O;break;case 17:l=X;break;case 18:l=Q;break;case 19:l=z;break;case 20:l=Y;break;case 21:l=Z;break;case 22:l=$;break;case 23:l=ae;break;case 24:l=ie;break;case 25:l=ee;break;case 26:l=te;break;case 27:l=re;break;case 28:l=F;break;case 29:l=ne;break;case 30:l=q;break;case 31:l=oe;break;case 32:l=se;break;case 33:l=le;break;case 34:l=ue;break;default:var u=void 0;u=i.idBlock.isConstructed===!0?new N:new w,u.idBlock=i.idBlock,u.lenBlock=i.lenBlock,u.warnings=i.warnings,i=u,s=i.fromBER(e,t,r)}break;case 2:case 3:case 4:default:l=i.idBlock.isConstructed===!0?N:w}return i=n(i,l),s=i.fromBER(e,t,i.lenBlock.isIndefiniteForm===!0?r:i.lenBlock.length),i.valueBeforeDecode=e.slice(a,a+i.blockLength),{offset:s,result:i}}function s(e){if(0===e.byteLength){var t=new b({},Object);return t.error="Input buffer has zero length",{offset:-1,result:t}}return o(e,0,e.byteLength)}function l(e,t,r){if(r instanceof me){for(var n=!1,a=0;a<r.value.length;a++){var i=l(e,t,r.value[a]);if(i.verified===!0)return{verified:!0,result:e}}if(n===!1){var o={verified:!1,result:{error:"Wrong values for Choice type"}};return r.hasOwnProperty("name")&&(o.name=r.name),o}}if(r instanceof fe)return r.hasOwnProperty("name")&&(e[r.name]=t),{verified:!0,result:e};if(e instanceof Object==!1)return{verified:!1,result:{error:"Wrong root object"}};if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(r instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("idBlock"in r==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("fromBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("toBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var u=r.idBlock.toBER(!1);if(0===u.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};var c=r.idBlock.fromBER(u,0,u.byteLength);if(c===-1)return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(r.idBlock.hasOwnProperty("tagClass")===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagClass!==t.idBlock.tagClass)return{verified:!1,result:e};if(r.idBlock.hasOwnProperty("tagNumber")===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagNumber!==t.idBlock.tagNumber)return{verified:!1,result:e};if(r.idBlock.hasOwnProperty("isConstructed")===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isConstructed!==t.idBlock.isConstructed)return{verified:!1,result:e};if("isHexOnly"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly)return{verified:!1,result:e};if(r.idBlock.isHexOnly===!0){if("valueHex"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var m=new Uint8Array(r.idBlock.valueHex),f=new Uint8Array(t.idBlock.valueHex);if(m.length!==f.length)return{verified:!1,result:e};for(var h=0;h<m.length;h++)if(m[h]!==f[1])return{verified:!1,result:e}}if(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(e[r.name]=t)),r.idBlock.isConstructed===!0){var p=0,d={verified:!1},v=r.valueBlock.value.length;if(v>0&&r.valueBlock.value[0]instanceof he&&(v=t.valueBlock.value.length),0===v)return{verified:!0,result:e};if(0===t.valueBlock.value.length&&0!==r.valueBlock.value.length){for(var y=!0,g=0;g<r.valueBlock.value.length;g++)y=y&&(r.valueBlock.value[g].optional||!1);return y===!0?{verified:!0,result:e}:(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),e.error="Inconsistent object length",{verified:!1,result:e})}for(var b=0;b<v;b++)if(b-p>=t.valueBlock.value.length){if(r.valueBlock.value[b].optional===!1){var S={verified:!1,result:e};return e.error="Inconsistent length between ASN.1 data and schema",r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],S.name=r.name)),S}}else if(r.valueBlock.value[0]instanceof he){if(d=l(e,t.valueBlock.value[b],r.valueBlock.value[0].value),d.verified===!1){if(r.valueBlock.value[0].optional!==!0)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),d;p++}if("name"in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){var w={};w="local"in r.valueBlock.value[0]&&r.valueBlock.value[0].local===!0?t:e,"undefined"==typeof w[r.valueBlock.value[0].name]&&(w[r.valueBlock.value[0].name]=[]),w[r.valueBlock.value[0].name].push(t.valueBlock.value[b])}}else if(d=l(e,t.valueBlock.value[b-p],r.valueBlock.value[b]),d.verified===!1){if(r.valueBlock.value[b].optional!==!0)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),d;p++}if(d.verified===!1){var C={verified:!1,result:e};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],C.name=r.name)),C}return{verified:!0,result:e}}if("primitiveSchema"in r&&"valueHex"in t.valueBlock){var N=s(t.valueBlock.valueHex);if(N.offset===-1){var P={verified:!1,result:N.result};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],P.name=r.name)),P}return l(e,N.result,r.primitiveSchema)}return{verified:!0,result:e}}function u(e,t){if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};var r=s(e);return r.offset===-1?{verified:!1,result:r.result}:l(r.result,r.result,t)}function c(e){}Object.defineProperty(t,"__esModule",{value:!0}),t.RawData=t.Repeated=t.Any=t.Choice=t.TIME=t.Duration=t.DateTime=t.TimeOfDay=t.DATE=t.GeneralizedTime=t.UTCTime=t.CharacterString=t.GeneralString=t.VisibleString=t.GraphicString=t.IA5String=t.VideotexString=t.TeletexString=t.PrintableString=t.NumericString=t.UniversalString=t.BmpString=t.Utf8String=t.ObjectIdentifier=t.Enumerated=t.Integer=t.BitString=t.OctetString=t.Null=t.Set=t.Sequence=t.Boolean=t.EndOfContent=t.Constructed=t.Primitive=t.BaseBlock=void 0;var m=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in a)return a.value;var o=a.get;if(void 0!==o)return o.call(n)},f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.fromBER=s,t.compareSchema=l,t.verifySchema=u,t.fromJSON=c;var h=r(3),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.blockLength=(0,h.getParametersValue)(t,"blockLength",0),this.error=(0,h.getParametersValue)(t,"error",""),this.warnings=(0,h.getParametersValue)(t,"warnings",[]),"valueBeforeDecode"in t?this.valueBeforeDecode=t.valueBeforeDecode.slice(0):this.valueBeforeDecode=new ArrayBuffer(0)}return f(e,[{key:"toJSON",value:function(){return{blockName:this.constructor.blockName(),blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:(0,h.bufferToHexCodes)(this.valueBeforeDecode,0,this.valueBeforeDecode.byteLength)}}}],[{key:"blockName",value:function(){return"baseBlock"}}]),e}(),d=function(e){return function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isHexOnly=(0,h.getParametersValue)(e,"isHexOnly",!1),"valueHex"in e?r.valueHex=e.valueHex.slice(0):r.valueHex=new ArrayBuffer(0),r}return a(t,e),f(t,[{key:"fromBER",value:function(e,t,r){if((0,h.checkBufferParams)(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);return 0===n.length?(this.warnings.push("Zero buffer length"),t):(this.valueHex=e.slice(t,t+r),this.blockLength=r,t+r)}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.isHexOnly!==!0?(this.error='Flag "isHexOnly" is not set, abort',new ArrayBuffer(0)):e===!0?new ArrayBuffer(this.valueHex.byteLength):this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.isHexOnly=this.isHexOnly,e.valueHex=(0,h.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"hexBlock"}}]),t}(e)},v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return"idBlock"in e?(r.isHexOnly=(0,h.getParametersValue)(e.idBlock,"isHexOnly",!1),r.valueHex=(0,h.getParametersValue)(e.idBlock,"valueHex",new ArrayBuffer(0)),r.tagClass=(0,h.getParametersValue)(e.idBlock,"tagClass",-1),r.tagNumber=(0,h.getParametersValue)(e.idBlock,"tagNumber",-1),r.isConstructed=(0,h.getParametersValue)(e.idBlock,"isConstructed",!1)):(r.tagClass=-1,r.tagNumber=-1,r.isConstructed=!1),r}return a(t,e),f(t,[{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=0,r=void 0,n=void 0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",new ArrayBuffer(0)}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){if(r=new ArrayBuffer(1),n=new Uint8Array(r),!e){var a=this.tagNumber;a&=31,t|=a,n[0]=t}return r}if(this.isHexOnly===!1){var i=(0,h.utilToBase)(this.tagNumber,7),o=new Uint8Array(i),s=i.byteLength;if(r=new ArrayBuffer(s+1),n=new Uint8Array(r),n[0]=31|t,!e){for(var l=0;l<s-1;l++)n[l+1]=128|o[l];n[s]=o[s-1]}return r}if(r=new ArrayBuffer(this.valueHex.byteLength+1),n=new Uint8Array(r),n[0]=31|t,e===!1){for(var u=new Uint8Array(this.valueHex),c=0;c<u.length-1;c++)n[c+1]=128|u[c];n[this.valueHex.byteLength]=u[u.length-1]}return r}},{key:"fromBER",value:function(e,t,r){if((0,h.checkBufferParams)(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.error="Zero buffer length",-1;var a=192&n[0];switch(a){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=32===(32&n[0]),this.isHexOnly=!1;var i=31&n[0];if(31!==i)this.tagNumber=i,this.blockLength=1;else{var o=1;this.valueHex=new ArrayBuffer(255);for(var s=255,l=new Uint8Array(this.valueHex);128&n[o];){if(l[o-1]=127&n[o],o++,o>=n.length)return this.error="End of input reached before message was fully decoded",-1;if(o===s){s+=255;for(var u=new ArrayBuffer(s),c=new Uint8Array(u),m=0;m<l.length;m++)c[m]=l[m];this.valueHex=new ArrayBuffer(s),l=new Uint8Array(this.valueHex)}}this.blockLength=o+1,l[o-1]=127&n[o];for(var f=new ArrayBuffer(o),p=new Uint8Array(f),d=0;d<o;d++)p[d]=l[d];this.valueHex=new ArrayBuffer(o),l=new Uint8Array(this.valueHex),l.set(p),this.blockLength<=9?this.tagNumber=(0,h.utilFromBase)(l,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}},{key:"toJSON",value:function(){var e={};try{e=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.tagClass=this.tagClass,e.tagNumber=this.tagNumber,e.isConstructed=this.isConstructed,e}}],[{key:"blockName",value:function(){return"identificationBlock"}}]),t}(d(p)),y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return"lenBlock"in e?(r.isIndefiniteForm=(0,h.getParametersValue)(e.lenBlock,"isIndefiniteForm",!1),r.longFormUsed=(0,h.getParametersValue)(e.lenBlock,"longFormUsed",!1),r.length=(0,h.getParametersValue)(e.lenBlock,"length",0)):(r.isIndefiniteForm=!1,r.longFormUsed=!1,r.length=0),r}return a(t,e),f(t,[{key:"fromBER",value:function(e,t,r){if((0,h.checkBufferParams)(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.error="Zero buffer length",-1;if(255===n[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===n[0],this.isIndefiniteForm===!0)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&n[0]),this.longFormUsed===!1)return this.length=n[0],this.blockLength=1,t+this.blockLength;var a=127&n[0];if(a>8)return this.error="Too big integer",-1;if(a+1>n.length)return this.error="End of input reached before message was fully decoded",-1;for(var i=new Uint8Array(a),o=0;o<a;o++)i[o]=n[o+1];return 0===i[a-1]&&this.warnings.push("Needlessly long encoded length"),this.length=(0,h.utilFromBase)(i,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unneccesary usage of long length form"),this.blockLength=a+1,t+this.blockLength}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=void 0,r=void 0;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),e===!1&&(r=new Uint8Array(t),r[0]=128),t;if(this.longFormUsed===!0){var n=(0,h.utilToBase)(this.length,8);if(n.byteLength>127)return this.error="Too big length",new ArrayBuffer(0);if(t=new ArrayBuffer(n.byteLength+1),e===!0)return t;var a=new Uint8Array(n);r=new Uint8Array(t),r[0]=128|n.byteLength;for(var i=0;i<n.byteLength;i++)r[i+1]=a[i];return t}return t=new ArrayBuffer(1),e===!1&&(r=new Uint8Array(t),r[0]=this.length),t}},{key:"toJSON",value:function(){var e={};try{e=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.isIndefiniteForm=this.isIndefiniteForm,e.longFormUsed=this.longFormUsed,e.length=this.length,e}}],[{key:"blockName",value:function(){return"lengthBlock"}}]),t}(p),g=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(i(this,t),"LocalValueBlock"===this.constructor.name)throw TypeError('new of abstract class "LocalValueBlock"');return n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),f(t,[{key:"fromBER",value:function(e,t,r){throw TypeError('User need to make a specific function in a class which extends "LocalValueBlock"')}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];throw TypeError('User need to make a specific function in a class which extends "LocalValueBlock"')}}],[{key:"blockName",value:function(){return"valueBlock"}}]),t}(p),b=t.BaseBlock=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;i(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return"name"in e&&(a.name=e.name),"optional"in e&&(a.optional=e.optional),"primitiveSchema"in e&&(a.primitiveSchema=e.primitiveSchema),a.idBlock=new v(e),a.lenBlock=new y(e),a.valueBlock=new r(e),a}return a(t,e),f(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=void 0,r=this.idBlock.toBER(e),n=this.valueBlock.toBER(!0);this.lenBlock.length=n.byteLength;var a=this.lenBlock.toBER(e);t=(0,h.utilConcatBuf)(r,a);var i=void 0;if(i=e===!1?this.valueBlock.toBER(e):new ArrayBuffer(this.lenBlock.length),t=(0,h.utilConcatBuf)(t,i),this.lenBlock.isIndefiniteForm===!0){var o=new ArrayBuffer(2);if(e===!1){var s=new Uint8Array(o);s[0]=0,s[1]=0}t=(0,h.utilConcatBuf)(t,o)}return t}},{key:"toJSON",value:function(){var e={};try{e=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.idBlock=this.idBlock.toJSON(),e.lenBlock=this.lenBlock.toJSON(),e.valueBlock=this.valueBlock.toJSON(),"name"in this&&(e.name=this.name),"optional"in this&&(e.optional=this.optional),"primitiveSchema"in this&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}}],[{key:"blockName",value:function(){return"BaseBlock"}}]),t}(p),S=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return"valueHex"in e?r.valueHex=e.valueHex.slice(0):r.valueHex=new ArrayBuffer(0),r.isHexOnly=(0,h.getParametersValue)(e,"isHexOnly",!0),r}return a(t,e),f(t,[{key:"fromBER",value:function(e,t,r){if((0,h.checkBufferParams)(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.warnings.push("Zero buffer length"),t;this.valueHex=new ArrayBuffer(n.length);for(var a=new Uint8Array(this.valueHex),i=0;i<n.length;i++)a[i]=n[i];return this.blockLength=r,t+r}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.valueHex=(0,h.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e.isHexOnly=this.isHexOnly,e}}],[{key:"blockName",value:function(){return"PrimitiveValueBlock"}}]),t}(g),w=t.Primitive=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,S));return r.idBlock.isConstructed=!1,r}return a(t,e),f(t,null,[{key:"blockName",value:function(){return"PRIMITIVE"}}]),t}(b),C=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.value=(0,h.getParametersValue)(e,"value",[]),r.isIndefiniteForm=(0,h.getParametersValue)(e,"isIndefiniteForm",!1),r}return a(t,e),f(t,[{key:"fromBER",value:function(e,t,r){function n(e,t){return e===!0?1:t}var a=t,i=r;if((0,h.checkBufferParams)(this,e,t,r)===!1)return-1;var s=new Uint8Array(e,t,r);if(0===s.length)return this.warnings.push("Zero buffer length"),t;for(var l=t;n(this.isIndefiniteForm,r)>0;){var u=o(e,l,r);if(u.offset===-1)return this.error=u.result.error,this.warnings.concat(u.result.warnings),-1;if(l=u.offset,this.blockLength+=u.result.blockLength,r-=u.result.blockLength,this.value.push(u.result),this.isIndefiniteForm===!0&&u.result.constructor.blockName()===k.blockName())break}return this.isIndefiniteForm===!0&&(this.value[this.value.length-1].constructor.blockName()===k.blockName()?this.value.pop():this.warnings.push("No EndOfContent block encoded")),this.valueBeforeDecode=e.slice(a,a+i),l}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);t=(0,h.utilConcatBuf)(t,n)}return t}},{key:"toJSON",value:function(){var e={};try{e=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}e.isIndefiniteForm=this.isIndefiniteForm,e.value=[];for(var r=0;r<this.value.length;r++)e.value.push(this.value[r].toJSON());return e}}],[{key:"blockName",value:function(){return"ConstructedValueBlock"}}]),t}(g),N=t.Constructed=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,C));return r.idBlock.isConstructed=!0,r}return a(t,e),f(t,[{key:"fromBER",value:function(e,t,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}}],[{key:"blockName",value:function(){return"CONSTRUCTED"}}]),t}(b),P=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),f(t,[{key:"fromBER",value:function(e,t,r){return t}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new ArrayBuffer(0)}}],[{key:"blockName",value:function(){return"EndOfContentValueBlock"}}]),t}(g),k=t.EndOfContent=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,P));return r.idBlock.tagClass=1,r.idBlock.tagNumber=0,r}return a(t,e),f(t,null,[{key:"blockName",value:function(){return"EndOfContent"}}]),t}(b),A=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(r.value=(0,h.getParametersValue)(e,"value",!1),r.isHexOnly=(0,h.getParametersValue)(e,"isHexOnly",!1),"valueHex"in e)r.valueHex=e.valueHex.slice(0);else if(r.valueHex=new ArrayBuffer(1),r.value===!0){var a=new Uint8Array(r.valueHex);a[0]=255}return r}return a(t,e),f(t,[{key:"fromBER",value:function(e,t,r){if((0,h.checkBufferParams)(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);r>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.value=0!==n[0],this.isHexOnly=!0,this.valueHex=new ArrayBuffer(n.length);for(var a=new Uint8Array(this.valueHex),i=0;i<n.length;i++)a[i]=n[i];return this.blockLength=r,t+r}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.valueHex}},{key:"toJSON",value:function(){var e={};try{e=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e.isHexOnly=this.isHexOnly,e.valueHex=(0,h.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"BooleanValueBlock"}}]),t}(g),E=t.Boolean=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,A));return r.idBlock.tagClass=1,r.idBlock.tagNumber=1,r}return a(t,e),f(t,null,[{key:"blockName",value:function(){return"Boolean"}}]),t}(b),O=t.Sequence=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=16,r}return a(t,e),f(t,null,[{key:"blockName",value:function(){return"Sequence"}}]),t}(N),X=t.Set=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=17,r}return a(t,e),f(t,null,[{key:"blockName",value:function(){return"Set"}}]),t}(N),I=t.Null=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,p));return r.idBlock.tagClass=1,r.idBlock.tagNumber=5,r}return a(t,e),f(t,[{key:"fromBER",value:function(e,t,r){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=r,t+r}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(2);if(e===!0)return t;var r=new Uint8Array(t);return r[0]=5,r[1]=0,t}}],[{key:"blockName",value:function(){return"Null"}}]),t}(b),R=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isConstructed=(0,h.getParametersValue)(e,"isConstructed",!1),r}return a(t,e),f(t,[{key:"fromBER",value:function(e,r,n){var a=0;if(this.isConstructed===!0){if(this.isHexOnly=!1,a=C.prototype.fromBER.call(this,e,r,n),a===-1)return a;for(var i=0;i<this.value.length;i++){var o=this.value[i].constructor.blockName();if(o===k.blockName()){if(this.isIndefiniteForm===!0)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(o!==B.blockName())return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,a=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fromBER",this).call(this,e,r,n),this.blockLength=n;return a}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isConstructed===!0)return C.prototype.toBER.call(this,e);var t=new ArrayBuffer(this.valueHex.byteLength);return e===!0?t:0===this.valueHex.byteLength?t:t=this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=(0,h.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"OctetStringValueBlock"}}]),t}(d(C)),B=t.OctetString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,R));return r.idBlock.tagClass=1,r.idBlock.tagNumber=4,r}return a(t,e),f(t,[{key:"fromBER",value:function(e,r,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===n?(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),r):m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fromBER",this).call(this,e,r,n)}},{key:"isEqual",value:function(e){return e instanceof t!=!1&&JSON.stringify(this)===JSON.stringify(e)}}],[{key:"blockName",value:function(){return"OctetString"}}]),t}(b),_=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.unusedBits=(0,h.getParametersValue)(e,"unusedBits",0),r.isConstructed=(0,h.getParametersValue)(e,"isConstructed",!1),r.blockLength=r.valueHex.byteLength+1,r}return a(t,e),f(t,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;var n=-1;if(this.isConstructed===!0){if(n=C.prototype.fromBER.call(this,e,t,r),n===-1)return n;for(var a=0;a<this.value.length;a++){var i=this.value[a].constructor.blockName();if(i===k.blockName()){if(this.isIndefiniteForm===!0)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(i!==x.blockName())return this.error="BIT STRING may consists of BIT STRINGs only",-1;if(this.unusedBits>0&&this.value[a].unusedBits>0)return this.error='Usign of "unused bits" inside constructive BIT STRING allowed for least one only',-1;if(this.unusedBits=this.value[a].unusedBits,this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1}return n}if((0,h.checkBufferParams)(this,e,t,r)===!1)return-1;var o=new Uint8Array(e,t,r);if(this.unusedBits=o[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;this.valueHex=new ArrayBuffer(o.length-1);for(var s=new Uint8Array(this.valueHex),l=0;l<r-1;l++)s[l]=o[l+1];return this.blockLength=o.length,t+r}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isConstructed===!0)return C.prototype.toBER.call(this,e);if(e===!0)return new ArrayBuffer(this.valueHex.byteLength+1);if(0===this.valueHex.byteLength)return new ArrayBuffer(0);var t=new Uint8Array(this.valueHex),r=new ArrayBuffer(this.valueHex.byteLength+1),n=new Uint8Array(r);n[0]=this.unusedBits;for(var a=0;a<this.valueHex.byteLength;a++)n[a+1]=t[a];return r}},{key:"toJSON",value:function(){var e={};try{e=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.unusedBits=this.unusedBits,e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=(0,h.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"BitStringValueBlock"}}]),t}(d(C)),x=t.BitString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,_));return r.idBlock.tagClass=1,r.idBlock.tagNumber=3,r}return a(t,e),f(t,[{key:"fromBER",value:function(e,r,n){
return 0===n?r:(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fromBER",this).call(this,e,r,n))}},{key:"isEqual",value:function(e){return e instanceof t!=!1&&JSON.stringify(this)===JSON.stringify(e)}}],[{key:"blockName",value:function(){return"BitString"}}]),t}(b),j=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return"value"in e&&(r.valueDec=e.value),r}return a(t,e),f(t,[{key:"fromDER",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=this.fromBER(e,t,r);if(a===-1)return a;var i=new Uint8Array(this._valueHex);if(0===i[0]&&0!==(128&i[1])){var o=new ArrayBuffer(this._valueHex.byteLength-1),s=new Uint8Array(o);s.set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=o.slice(0)}else if(0!==n&&this._valueHex.byteLength<n){n-this._valueHex.byteLength>1&&(n=this._valueHex.byteLength+1);var l=new ArrayBuffer(n),u=new Uint8Array(l);u.set(i,n-this._valueHex.byteLength),this._valueHex=l.slice(0)}return a}},{key:"toDER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new Uint8Array(this._valueHex);switch(!0){case 0!==(128&t[0]):var r=new ArrayBuffer(this._valueHex.byteLength+1),n=new Uint8Array(r);n[0]=0,n.set(t,1),this._valueHex=r.slice(0);break;case 0===t[0]&&0===(128&t[1]):var a=new ArrayBuffer(this._valueHex.byteLength-1),i=new Uint8Array(a);i.set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=a.slice(0)}return this.toBER(e)}},{key:"fromBER",value:function(e,r,n){var a=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fromBER",this).call(this,e,r,n);return a===-1?a:(this.blockLength=n,r+n)}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.valueDec=this.valueDec,e}},{key:"valueHex",set:function(e){this._valueHex=e.slice(0),e.byteLength>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,e.byteLength>0&&(this._valueDec=h.utilDecodeTC.call(this)))},get:function(){return this._valueHex}},{key:"valueDec",set:function(e){this._valueDec=e,this.isHexOnly=!1,this._valueHex=(0,h.utilEncodeTC)(e)},get:function(){return this._valueDec}}],[{key:"blockName",value:function(){return"IntegerValueBlock"}}]),t}(d(g)),T=t.Integer=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,j));return r.idBlock.tagClass=1,r.idBlock.tagNumber=2,r}return a(t,e),f(t,[{key:"isEqual",value:function(e){return e instanceof t?this.valueBlock.isHexOnly&&e.valueBlock.isHexOnly?(0,h.isEqualBuffer)(this.valueBlock.valueHex,e.valueBlock.valueHex):this.valueBlock.isHexOnly===e.valueBlock.isHexOnly&&this.valueBlock.valueDec===e.valueBlock.valueDec:e instanceof ArrayBuffer&&(0,h.isEqualBuffer)(this.valueBlock.valueHex,e)}},{key:"convertToDER",value:function(){var e=new t({valueHex:this.valueBlock.valueHex});return e.valueBlock.toDER(),e}},{key:"convertFromDER",value:function(){var e=Math.pow(2,(0,h.nearestPowerOf2)(this.valueBlock.valueHex.byteLength)),r=new t({valueHex:this.valueBlock.valueHex});return r.valueBlock.fromDER(r.valueBlock.valueHex,0,r.valueBlock.valueHex.byteLength,e),r}}],[{key:"blockName",value:function(){return"Integer"}}]),t}(b),D=t.Enumerated=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=10,r}return a(t,e),f(t,null,[{key:"blockName",value:function(){return"Enumerated"}}]),t}(T),U=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.valueDec=(0,h.getParametersValue)(e,"valueDec",-1),r.isFirstSid=(0,h.getParametersValue)(e,"isFirstSid",!1),r}return a(t,e),f(t,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;if((0,h.checkBufferParams)(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);this.valueHex=new ArrayBuffer(r);for(var a=new Uint8Array(this.valueHex),i=0;i<r&&(a[i]=127&n[i],this.blockLength++,0!==(128&n[i]));i++);for(var o=new ArrayBuffer(this.blockLength),s=new Uint8Array(o),l=0;l<this.blockLength;l++)s[l]=a[l];return this.valueHex=o.slice(0),a=new Uint8Array(this.valueHex),0!==(128&n[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===a[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=(0,h.utilFromBase)(a,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=void 0,r=void 0;if(this.isHexOnly){if(e===!0)return new ArrayBuffer(this.valueHex.byteLength);var n=new Uint8Array(this.valueHex);t=new ArrayBuffer(this.blockLength),r=new Uint8Array(t);for(var a=0;a<this.blockLength-1;a++)r[a]=128|n[a];return r[this.blockLength-1]=n[this.blockLength-1],t}var i=(0,h.utilToBase)(this.valueDec,7);if(0===i.byteLength)return this.error="Error during encoding SID value",new ArrayBuffer(0);if(t=new ArrayBuffer(i.byteLength),e===!1){var o=new Uint8Array(i);r=new Uint8Array(t);for(var s=0;s<i.byteLength-1;s++)r[s]=128|o[s];r[i.byteLength-1]=o[i.byteLength-1]}return t}},{key:"toString",value:function(){var e="";if(this.isHexOnly===!0)e=(0,h.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength);else if(this.isFirstSid){var t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}},{key:"toJSON",value:function(){var e={};try{e=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.valueDec=this.valueDec,e.isFirstSid=this.isFirstSid,e}}],[{key:"blockName",value:function(){return"sidBlock"}}]),t}(d(p)),V=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.fromString((0,h.getParametersValue)(e,"value","")),r}return a(t,e),f(t,[{key:"fromBER",value:function(e,t,r){for(var n=t;r>0;){var a=new U;if(n=a.fromBER(e,n,r),n===-1)return this.blockLength=0,this.error=a.error,n;0===this.value.length&&(a.isFirstSid=!0),this.blockLength+=a.blockLength,r-=a.blockLength,this.value.push(a)}return n}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);if(0===n.byteLength)return this.error=this.value[r].error,new ArrayBuffer(0);t=(0,h.utilConcatBuf)(t,n)}return t}},{key:"fromString",value:function(e){this.value=[];var t=0,r=0,n="",a=!1;do if(r=e.indexOf(".",t),n=r===-1?e.substr(t):e.substr(t,r-t),t=r+1,a){var i=this.value[0],o=0;switch(i.valueDec){case 0:break;case 1:o=40;break;case 2:o=80;break;default:return this.value=[],!1}var s=parseInt(n,10);if(isNaN(s))return!0;i.valueDec=s+o,a=!1}else{var l=new U;if(l.valueDec=parseInt(n,10),isNaN(l.valueDec))return!0;0===this.value.length&&(l.isFirstSid=!0,a=!0),this.value.push(l)}while(r!==-1);return!0}},{key:"toString",value:function(){for(var e="",t=!1,r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;var n=this.value[r].toString();0!==r&&(e+="."),t?(n="{"+n+"}",this.value[r].isFirstSid?e="2.{"+n+" - 80}":e+=n):e+=n}return e}},{key:"toJSON",value:function(){var e={};try{e=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}e.value=this.toString(),e.sidArray=[];for(var r=0;r<this.value.length;r++)e.sidArray.push(this.value[r].toJSON());return e}}],[{key:"blockName",value:function(){return"ObjectIdentifierValueBlock"}}]),t}(g),H=t.ObjectIdentifier=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,V));return r.idBlock.tagClass=1,r.idBlock.tagNumber=6,r}return a(t,e),f(t,null,[{key:"blockName",value:function(){return"ObjectIdentifier"}}]),t}(b),L=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isHexOnly=!0,r.value="",r}return a(t,e),f(t,[{key:"toJSON",value:function(){var e={};try{e=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"Utf8StringValueBlock"}}]),t}(d(p)),M=t.Utf8String=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,L));return"value"in e&&r.fromString(e.value),r.idBlock.tagClass=1,r.idBlock.tagNumber=12,r}return a(t,e),f(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e));try{this.valueBlock.value=decodeURIComponent(escape(this.valueBlock.value))}catch(e){this.warnings.push('Error during "decodeURIComponent": '+e+", using raw string")}}},{key:"fromString",value:function(e){var t=unescape(encodeURIComponent(e)),r=t.length;this.valueBlock.valueHex=new ArrayBuffer(r);for(var n=new Uint8Array(this.valueBlock.valueHex),a=0;a<r;a++)n[a]=t.charCodeAt(a);this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"Utf8String"}}]),t}(b),K=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isHexOnly=!0,r.value="",r}return a(t,e),f(t,[{key:"toJSON",value:function(){var e={};try{e=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"BmpStringValueBlock"}}]),t}(d(p)),q=t.BmpString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,K));return"value"in e&&r.fromString(e.value),r.idBlock.tagClass=1,r.idBlock.tagNumber=30,r}return a(t,e),f(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){for(var t=e.slice(0),r=new Uint8Array(t),n=0;n<r.length;n+=2){var a=r[n];r[n]=r[n+1],r[n+1]=a}this.valueBlock.value=String.fromCharCode.apply(null,new Uint16Array(t))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(2*t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++){var a=(0,h.utilToBase)(e.charCodeAt(n),8),i=new Uint8Array(a);if(!(i.length>2))for(var o=2-i.length,s=i.length-1;s>=0;s--)r[2*n+s+o]=i[s]}this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"BmpString"}}]),t}(b),G=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isHexOnly=!0,r.value="",r}return a(t,e),f(t,[{key:"toJSON",value:function(){var e={};try{e=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"UniversalStringValueBlock"}}]),t}(d(p)),F=t.UniversalString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,G));return"value"in e&&r.fromString(e.value),r.idBlock.tagClass=1,r.idBlock.tagNumber=28,r}return a(t,e),f(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){for(var t=e.slice(0),r=new Uint8Array(t),n=0;n<r.length;n+=4)r[n]=r[n+3],r[n+1]=r[n+2],r[n+2]=0,r[n+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(4*t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++){var a=(0,h.utilToBase)(e.charCodeAt(n),8),i=new Uint8Array(a);if(!(i.length>4))for(var o=4-i.length,s=i.length-1;s>=0;s--)r[4*n+s+o]=i[s]}this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"UniversalString"}}]),t}(b),J=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.value="",r.isHexOnly=!0,r}return a(t,e),f(t,[{key:"toJSON",value:function(){var e={};try{e=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"SimpleStringValueBlock"}}]),t}(d(p)),W=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,J));return"value"in e&&r.fromString(e.value),r}return a(t,e),f(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++)r[n]=e.charCodeAt(n);this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"SIMPLESTRING"}}]),t}(b),Q=t.NumericString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=18,r}return a(t,e),f(t,null,[{key:"blockName",value:function(){return"NumericString"}}]),t}(W),z=t.PrintableString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=19,r}return a(t,e),f(t,null,[{key:"blockName",value:function(){return"PrintableString"}}]),t}(W),Y=t.TeletexString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=20,r}return a(t,e),f(t,null,[{key:"blockName",value:function(){return"TeletexString"}}]),t}(W),Z=t.VideotexString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=21,r}return a(t,e),f(t,null,[{key:"blockName",value:function(){return"VideotexString"}}]),t}(W),$=t.IA5String=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=22,r}return a(t,e),f(t,null,[{key:"blockName",value:function(){return"IA5String"}}]),t}(W),ee=t.GraphicString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=25,r}return a(t,e),f(t,null,[{key:"blockName",value:function(){return"GraphicString"}}]),t}(W),te=t.VisibleString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=26,r}return a(t,e),f(t,null,[{key:"blockName",value:function(){return"VisibleString"}}]),t}(W),re=t.GeneralString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=27,r}return a(t,e),f(t,null,[{key:"blockName",value:function(){return"GeneralString"}}]),t}(W),ne=t.CharacterString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=29,r}return a(t,e),f(t,null,[{key:"blockName",value:function(){return"CharacterString"}}]),t}(W),ae=t.UTCTime=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(r.year=0,r.month=0,r.day=0,r.hour=0,r.minute=0,r.second=0,"value"in e){r.fromString(e.value),r.valueBlock.valueHex=new ArrayBuffer(e.value.length);for(var a=new Uint8Array(r.valueBlock.valueHex),o=0;o<e.value.length;o++)a[o]=e.value.charCodeAt(o)}return"valueDate"in e&&(r.fromDate(e.valueDate),r.valueBlock.valueHex=r.toBuffer()),r.idBlock.tagClass=1,r.idBlock.tagNumber=23,r}return a(t,e),f(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}},{key:"toBuffer",value:function(){for(var e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t}},{key:"fromDate",value:function(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}},{key:"toDate",value:function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}},{key:"fromString",value:function(e){var t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi,r=t.exec(e);if(null===r)return void(this.error="Wrong input string for convertion");var n=parseInt(r[1],10);n>=50?this.year=1900+n:this.year=2e3+n,this.month=parseInt(r[2],10),this.day=parseInt(r[3],10),this.hour=parseInt(r[4],10),this.minute=parseInt(r[5],10),this.second=parseInt(r[6],10)}},{key:"toString",value:function(){var e=new Array(7);return e[0]=(0,h.padNumber)(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=(0,h.padNumber)(this.month,2),e[2]=(0,h.padNumber)(this.day,2),e[3]=(0,h.padNumber)(this.hour,2),e[4]=(0,h.padNumber)(this.minute,2),e[5]=(0,h.padNumber)(this.second,2),e[6]="Z",e.join("")}},{key:"toJSON",value:function(){var e={};try{e=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e}}],[{key:"blockName",value:function(){return"UTCTime"}}]),t}(te),ie=t.GeneralizedTime=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(r.year=0,r.month=0,r.day=0,r.hour=0,r.minute=0,r.second=0,r.millisecond=0,"value"in e){r.fromString(e.value),r.valueBlock.valueHex=new ArrayBuffer(e.value.length);for(var a=new Uint8Array(r.valueBlock.valueHex),o=0;o<e.value.length;o++)a[o]=e.value.charCodeAt(o)}return"valueDate"in e&&(r.fromDate(e.valueDate),r.valueBlock.valueHex=r.toBuffer()),r.idBlock.tagClass=1,r.idBlock.tagNumber=24,r}return a(t,e),f(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}},{key:"toBuffer",value:function(){for(var e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t}},{key:"fromDate",value:function(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}},{key:"toDate",value:function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}},{key:"fromString",value:function(e){var t=!1,r="",n="",a=0,i=void 0,o=0,s=0;if("Z"===e[e.length-1])r=e.substr(0,e.length-1),t=!0;else{var l=new Number(e[e.length-1]);if(isNaN(l.valueOf()))throw new Error("Wrong input string for convertion");r=e}if(t){if(r.indexOf("+")!==-1)throw new Error("Wrong input string for convertion");if(r.indexOf("-")!==-1)throw new Error("Wrong input string for convertion")}else{var u=1,c=r.indexOf("+"),m="";if(c===-1&&(c=r.indexOf("-"),u=-1),c!==-1){if(m=r.substr(c+1),r=r.substr(0,c),2!==m.length&&4!==m.length)throw new Error("Wrong input string for convertion");var f=new Number(m.substr(0,2));if(isNaN(f.valueOf()))throw new Error("Wrong input string for convertion");if(o=u*f,4===m.length){if(f=new Number(m.substr(2,2)),isNaN(f.valueOf()))throw new Error("Wrong input string for convertion");s=u*f}}}var h=r.indexOf(".");if(h===-1&&(h=r.indexOf(",")),h!==-1){var p=new Number("0"+r.substr(h));if(isNaN(p.valueOf()))throw new Error("Wrong input string for convertion");a=p.valueOf(),n=r.substr(0,h)}else n=r;switch(!0){case 8===n.length:if(i=/(\d{4})(\d{2})(\d{2})/gi,h!==-1)throw new Error("Wrong input string for convertion");break;case 10===n.length:if(i=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,h!==-1){var d=60*a;this.minute=Math.floor(d),d=60*(d-this.minute),this.second=Math.floor(d),d=1e3*(d-this.second),this.millisecond=Math.floor(d)}break;case 12===n.length:if(i=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,h!==-1){var v=60*a;this.second=Math.floor(v),v=1e3*(v-this.second),this.millisecond=Math.floor(v)}break;case 14===n.length:if(i=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,h!==-1){var y=1e3*a;this.millisecond=Math.floor(y)}break;default:throw new Error("Wrong input string for convertion")}var g=i.exec(n);if(null===g)throw new Error("Wrong input string for convertion");for(var b=1;b<g.length;b++)switch(b){case 1:this.year=parseInt(g[b],10);break;case 2:this.month=parseInt(g[b],10);break;case 3:this.day=parseInt(g[b],10);break;case 4:this.hour=parseInt(g[b],10)+o;break;case 5:this.minute=parseInt(g[b],10)+s;break;case 6:this.second=parseInt(g[b],10);break;default:throw new Error("Wrong input string for convertion")}if(t===!1){var S=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=S.getUTCFullYear(),this.month=S.getUTCMonth(),this.day=S.getUTCDay(),this.hour=S.getUTCHours(),this.minute=S.getUTCMinutes(),this.second=S.getUTCSeconds(),this.millisecond=S.getUTCMilliseconds()}}},{key:"toString",value:function(){var e=[];return e.push((0,h.padNumber)(this.year,4)),e.push((0,h.padNumber)(this.month,2)),e.push((0,h.padNumber)(this.day,2)),e.push((0,h.padNumber)(this.hour,2)),e.push((0,h.padNumber)(this.minute,2)),e.push((0,h.padNumber)(this.second,2)),0!==this.millisecond&&(e.push("."),e.push((0,h.padNumber)(this.millisecond,3))),e.push("Z"),e.join("")}},{key:"toJSON",value:function(){var e={};try{e=m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e.millisecond=this.millisecond,e}}],[{key:"blockName",value:function(){return"GeneralizedTime"}}]),t}(te),oe=t.DATE=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=31,r}return a(t,e),f(t,null,[{key:"blockName",value:function(){return"DATE"}}]),t}(M),se=t.TimeOfDay=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=32,r}return a(t,e),f(t,null,[{key:"blockName",value:function(){return"TimeOfDay"}}]),t}(M),le=t.DateTime=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=33,r}return a(t,e),f(t,null,[{key:"blockName",value:function(){return"DateTime"}}]),t}(M),ue=t.Duration=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=34,r}return a(t,e),f(t,null,[{key:"blockName",value:function(){return"Duration"}}]),t}(M),ce=t.TIME=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=14,r}return a(t,e),f(t,null,[{key:"blockName",value:function(){return"TIME"}}]),t}(M),me=t.Choice=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.value=(0,h.getParametersValue)(t,"value",[]),this.optional=(0,h.getParametersValue)(t,"optional",!1)},fe=t.Any=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.name=(0,h.getParametersValue)(t,"name",""),this.optional=(0,h.getParametersValue)(t,"optional",!1)},he=t.Repeated=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.name=(0,h.getParametersValue)(t,"name",""),this.optional=(0,h.getParametersValue)(t,"optional",!1),this.value=(0,h.getParametersValue)(t,"value",new fe),this.local=(0,h.getParametersValue)(t,"local",!1)};t.RawData=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.data=(0,h.getParametersValue)(t,"data",new ArrayBuffer(0))}return f(e,[{key:"fromBER",value:function(e,t,r){this.data=e.slice(t,r)}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.data}}]),e}()},function(e,t){"use strict";function r(e){return new Date(e.getTime()+6e4*e.getTimezoneOffset())}function n(e,t,r){return e instanceof Object==!1?r:t in e?e[t]:r}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength,n="",a=!0,i=!1,o=void 0;try{for(var s,l=new Uint8Array(e,t,r)[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var u=s.value,c=u.toString(16).toUpperCase();n=n+(1===c.length?"0":"")+c}}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}return n}function i(e,t,r,n){return t instanceof ArrayBuffer==!1?(e.error='Wrong parameter: inputBuffer must be "ArrayBuffer"',!1):0===t.byteLength?(e.error="Wrong parameter: inputBuffer has zero length",!1):r<0?(e.error="Wrong parameter: inputOffset less than zero",!1):n<0?(e.error="Wrong parameter: inputLength less than zero",!1):!(t.byteLength-r-n<0)||(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1)}function o(e,t){for(var r=0,n=e.length-1;n>=0;n--)r+=e[e.length-1-n]*Math.pow(2,t*n);return r}function s(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=r||-1,a=e,i=0,o=Math.pow(2,t),s=1;s<8;s++){if(e<o){var l=void 0;if(n<0)l=new ArrayBuffer(s),i=s;else{if(n<s)return new ArrayBuffer(0);l=new ArrayBuffer(n),i=n}for(var u=new Uint8Array(l),c=s-1;c>=0;c--){var m=Math.pow(2,c*t);u[i-c-1]=Math.floor(a/m),a-=u[i-c-1]*m}return l}o*=Math.pow(2,t)}return new ArrayBuffer(0)}function l(){for(var e=0,t=0,r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=!0,o=!1,s=void 0;try{for(var l,u=n[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;e+=c.byteLength}}catch(e){o=!0,s=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw s}}var m=new ArrayBuffer(e),f=new Uint8Array(m),h=!0,p=!1,d=void 0;try{for(var v,y=n[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){var g=v.value;f.set(new Uint8Array(g),t),t+=g.byteLength}}catch(e){p=!0,d=e}finally{try{!h&&y.return&&y.return()}finally{if(p)throw d}}return m}function u(){var e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){var t=255===e[0]&&128&e[1],r=0===e[0]&&0===(128&e[1]);(t||r)&&this.warnings.push("Needlessly long format")}for(var n=new ArrayBuffer(this.valueHex.byteLength),a=new Uint8Array(n),i=0;i<this.valueHex.byteLength;i++)a[i]=0;a[0]=128&e[0];for(var s=o(a,8),l=new ArrayBuffer(this.valueHex.byteLength),u=new Uint8Array(l),c=0;c<this.valueHex.byteLength;c++)u[c]=e[c];u[0]&=127;var m=o(u,8);return m-s}function c(e){for(var t=e<0?e*-1:e,r=128,n=1;n<8;n++){if(t<=r){if(e<0){var a=r-t,i=s(a,8,n),o=new Uint8Array(i);return o[0]|=128,i}var l=s(t,8,n),u=new Uint8Array(l);if(128&u[0]){var c=l.slice(0),m=new Uint8Array(c);l=new ArrayBuffer(l.byteLength+1),u=new Uint8Array(l);for(var f=0;f<c.byteLength;f++)u[f+1]=m[f];u[0]=0}return l}r*=Math.pow(2,8)}return new ArrayBuffer(0)}function m(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=new Uint8Array(e),n=new Uint8Array(t),a=0;a<r.length;a++)if(r[a]!==n[a])return!1;return!0}function f(e,t){for(var r=e.toString(10),n=t-r.length,a=new Array(n),i=0;i<n;i++)a[i]="0";
var o=a.join("");return o.concat(r)}function h(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=0,a=0,i=0,o="",s=t?b:g;n<e.length;){var l=e.charCodeAt(n++);n>=e.length&&(a=1);var u=e.charCodeAt(n++);n>=e.length&&(i=1);var c=e.charCodeAt(n++),m=l>>2,f=(3&l)<<4|u>>4,h=(15&u)<<2|c>>6,p=63&c;1===a?h=p=64:1===i&&(p=64),o+=r?64===h?""+s.charAt(m)+s.charAt(f):64===p?""+s.charAt(m)+s.charAt(f)+s.charAt(h):""+s.charAt(m)+s.charAt(f)+s.charAt(h)+s.charAt(p):""+s.charAt(m)+s.charAt(f)+s.charAt(h)+s.charAt(p)}return o}function p(e){function t(e){for(var t=0;t<64;t++)if(i.charAt(t)===e)return t;return 64}function r(e){return 64===e?0:e}for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=n?b:g,o=0,s="";o<e.length;){var l=t(e.charAt(o++)),u=o>=e.length?0:t(e.charAt(o++)),c=o>=e.length?0:t(e.charAt(o++)),m=o>=e.length?0:t(e.charAt(o++)),f=r(l)<<2|r(u)>>4,h=(15&r(u))<<4|r(c)>>2,p=(3&r(c))<<6|r(m);s+=String.fromCharCode(f),64!==c&&(s+=String.fromCharCode(h)),64!==m&&(s+=String.fromCharCode(p))}if(a){for(var d=s.length,v=-1,y=d-1;y>=0;y--)if(0!==s.charCodeAt(y)){v=y;break}v!==-1&&(s=s.slice(0,v+1))}return s}function d(e){var t="",r=new Uint8Array(e),n=!0,a=!1,i=void 0;try{for(var o,s=r[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;t+=String.fromCharCode(l)}}catch(e){a=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}return t}function v(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),a=0;a<t;a++)n[a]=e.charCodeAt(a);return r}function y(e){var t=Math.log(e)/S,r=Math.floor(t),n=Math.round(t);return r===n?r:n}Object.defineProperty(t,"__esModule",{value:!0}),t.getUTCDate=r,t.getParametersValue=n,t.bufferToHexCodes=a,t.checkBufferParams=i,t.utilFromBase=o,t.utilToBase=s,t.utilConcatBuf=l,t.utilDecodeTC=u,t.utilEncodeTC=c,t.isEqualBuffer=m,t.padNumber=f,t.toBase64=h,t.fromBase64=p,t.arrayBufferToString=d,t.stringToArrayBuffer=v,t.nearestPowerOf2=y;var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",S=Math.log(2)},function(e,t){"use strict";t.XmlXades={DefaultPrefix:"xades",NamespaceURI:"http://uri.etsi.org/01903/v1.3.2#",SignedPropertiesType:"http://uri.etsi.org/01903/v1.3.2#SignedProperties",ElementNames:{Any:"Any",ByName:"ByName",ByKey:"ByKey",AttrAuthoritiesCertValues:"AttrAuthoritiesCertValues",AttributeRevocationValues:"AttributeRevocationValues",AttributeCertificateRefs:"AttributeCertificateRefs",AttributeRevocationRefs:"AttributeRevocationRefs",QualifyingProperties:"QualifyingProperties",QualifyingPropertiesReference:"QualifyingPropertiesReference",SignedProperties:"SignedProperties",SignedSignatureProperties:"SignedSignatureProperties",SignedDataObjectProperties:"SignedDataObjectProperties",UnsignedProperties:"UnsignedProperties",UnsignedSignatureProperties:"UnsignedSignatureProperties",UnsignedDataObjectProperties:"UnsignedDataObjectProperties",UnsignedDataObjectProperty:"UnsignedDataObjectProperty",SigningTime:"SigningTime",SigningCertificate:"SigningCertificate",SignaturePolicyIdentifier:"SignaturePolicyIdentifier",SignatureProductionPlace:"SignatureProductionPlace",SignerRole:"SignerRole",Cert:"Cert",CertDigest:"CertDigest",IssuerSerial:"IssuerSerial",DataObjectFormat:"DataObjectFormat",CommitmentTypeIndication:"CommitmentTypeIndication",AllDataObjectsTimeStamp:"AllDataObjectsTimeStamp",IndividualDataObjectsTimeStamp:"IndividualDataObjectsTimeStamp",HashDataInfo:"HashDataInfo",EncapsulatedTimeStamp:"EncapsulatedTimeStamp",XMLTimeStamp:"XMLTimeStamp",XAdESTimeStamp:"XAdESTimeStamp",OtherTimeStamp:"OtherTimeStamp",Description:"Description",ObjectIdentifier:"ObjectIdentifier",MimeType:"MimeType",Encoding:"Encoding",Identifier:"Identifier",DocumentationReferences:"DocumentationReferences",DocumentationReference:"DocumentationReference",CommitmentTypeId:"CommitmentTypeId",ObjectReference:"ObjectReference",CommitmentTypeQualifiers:"CommitmentTypeQualifiers",AllSignedDataObjects:"AllSignedDataObjects",CommitmentTypeQualifier:"CommitmentTypeQualifier",SignaturePolicyId:"SignaturePolicyId",SignaturePolicyImplied:"SignaturePolicyImplied",SigPolicyId:"SigPolicyId",SigPolicyHash:"SigPolicyHash",SigPolicyQualifier:"SigPolicyQualifier",SigPolicyQualifiers:"SigPolicyQualifiers",SPURI:"SPURI",SPUserNotice:"SPUserNotice",NoticeRef:"NoticeRef",ExplicitText:"ExplicitText",ClaimedRoles:"ClaimedRoles",ClaimedRole:"ClaimedRole",CertifiedRoles:"CertifiedRoles",CertifiedRole:"CertifiedRole",Organization:"Organization",NoticeNumbers:"NoticeNumbers",Int:"int",City:"City",PostalCode:"PostalCode",StateOrProvince:"StateOrProvince",CountryName:"CountryName",CounterSignature:"CounterSignature",SignatureTimeStamp:"SignatureTimeStamp",CompleteCertificateRefs:"CompleteCertificateRefs",CompleteRevocationRefs:"CompleteRevocationRefs",SigAndRefsTimeStamp:"SigAndRefsTimeStamp",RefsOnlyTimeStamp:"RefsOnlyTimeStamp",CertificateValues:"CertificateValues",RevocationValues:"RevocationValues",ArchiveTimeStamp:"ArchiveTimeStamp",CertRefs:"CertRefs",CRLRefs:"CRLRefs",CRLRef:"CRLRef",OCSPRefs:"OCSPRefs",OtherRefs:"OtherRefs",OtherRef:"OtherRef",DigestAlgAndValue:"DigestAlgAndValue",CRLIdentifier:"CRLIdentifier",Issuer:"Issuer",IssueTime:"IssueTime",Number:"Number",OCSPRef:"OCSPRef",OCSPIdentifier:"OCSPIdentifier",ResponderID:"ResponderID",ProducedAt:"ProducedAt",EncapsulatedX509Certificate:"EncapsulatedX509Certificate",OtherCertificate:"OtherCertificate",CRLValues:"CRLValues",OCSPValues:"OCSPValues",OtherValues:"OtherValues",OtherValue:"OtherValue",EncapsulatedCRLValue:"EncapsulatedCRLValue",EncapsulatedOCSPValue:"EncapsulatedOCSPValue",ReferenceInfo:"ReferenceInfo",Include:"Include"},AttributeNames:{Id:"Id",Encoding:"Encoding",Target:"Target",ObjectReference:"ObjectReference",Qualifier:"Qualifier",Uri:"uri",URI:"URI",ReferencedData:"referencedData"}}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(1),s=r(4),l=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(i.XmlObject);l=a([o.XmlElement({localName:"xades",namespaceURI:s.XmlXades.NamespaceURI,prefix:s.XmlXades.DefaultPrefix})],l),t.XadesObject=l;var u=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(i.XmlCollection);u=a([o.XmlElement({localName:"xades_collection",namespaceURI:s.XmlXades.NamespaceURI,prefix:s.XmlXades.DefaultPrefix})],u),t.XadesCollection=u},function(e,t){"use strict";t.XmlSignature={DefaultCanonMethod:"http://www.w3.org/TR/2001/REC-xml-c14n-20010315",DefaultDigestMethod:"http://www.w3.org/2001/04/xmlenc#sha256",DefaultPrefix:"ds",ElementNames:{CanonicalizationMethod:"CanonicalizationMethod",DigestMethod:"DigestMethod",DigestValue:"DigestValue",DSAKeyValue:"DSAKeyValue",DomainParameters:"DomainParameters",EncryptedKey:"EncryptedKey",HMACOutputLength:"HMACOutputLength",RSAPSSParams:"RSAPSSParams",MaskGenerationFunction:"MaskGenerationFunction",SaltLength:"SaltLength",KeyInfo:"KeyInfo",KeyName:"KeyName",KeyValue:"KeyValue",Modulus:"Modulus",Exponent:"Exponent",Manifest:"Manifest",Object:"Object",Reference:"Reference",RetrievalMethod:"RetrievalMethod",RSAKeyValue:"RSAKeyValue",ECDSAKeyValue:"ECDSAKeyValue",NamedCurve:"NamedCurve",PublicKey:"PublicKey",Signature:"Signature",SignatureMethod:"SignatureMethod",SignatureValue:"SignatureValue",SignedInfo:"SignedInfo",Transform:"Transform",Transforms:"Transforms",X509Data:"X509Data",PGPData:"PGPData",SPKIData:"SPKIData",SPKIexp:"SPKIexp",MgmtData:"MgmtData",X509IssuerSerial:"X509IssuerSerial",X509IssuerName:"X509IssuerName",X509SerialNumber:"X509SerialNumber",X509SKI:"X509SKI",X509SubjectName:"X509SubjectName",X509Certificate:"X509Certificate",X509CRL:"X509CRL",XPath:"XPath",X:"X",Y:"Y"},AttributeNames:{Algorithm:"Algorithm",Encoding:"Encoding",Id:"Id",MimeType:"MimeType",Type:"Type",URI:"URI"},AlgorithmNamespaces:{XmlDsigBase64Transform:"http://www.w3.org/2000/09/xmldsig#base64",XmlDsigC14NTransform:"http://www.w3.org/TR/2001/REC-xml-c14n-20010315",XmlDsigC14NWithCommentsTransform:"http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments",XmlDsigEnvelopedSignatureTransform:"http://www.w3.org/2000/09/xmldsig#enveloped-signature",XmlDsigXPathTransform:"http://www.w3.org/TR/1999/REC-xpath-19991116",XmlDsigXsltTransform:"http://www.w3.org/TR/1999/REC-xslt-19991116",XmlDsigExcC14NTransform:"http://www.w3.org/2001/10/xml-exc-c14n#",XmlDsigExcC14NWithCommentsTransform:"http://www.w3.org/2001/10/xml-exc-c14n#WithComments",XmlDecryptionTransform:"http://www.w3.org/2002/07/decrypt#XML",XmlLicenseTransform:"urn:mpeg:mpeg21:2003:01-REL-R-NS:licenseTransform"},Uri:{Manifest:"http://www.w3.org/2000/09/xmldsig#Manifest"},NamespaceURI:"http://www.w3.org/2000/09/xmldsig#",NamespaceURIMore:"http://www.w3.org/2007/05/xmldsig-more#",NamespaceURIPss:"http://www.example.org/xmldsig-pss/#"}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(1),s=r(6),l=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(i.XmlObject);l=a([o.XmlElement({localName:"xmldsig",namespaceURI:s.XmlSignature.NamespaceURI,prefix:s.XmlSignature.DefaultPrefix})],l),t.XmlSignatureObject=l;var u=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(i.XmlCollection);u=a([o.XmlElement({localName:"xmldsig_collection",namespaceURI:s.XmlSignature.NamespaceURI,prefix:s.XmlSignature.DefaultPrefix})],u),t.XmlSignatureCollection=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(4),s=r(5),l=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesObject);a([i.XmlContent()],l.prototype,"Value",void 0),l=a([i.XmlElement({localName:o.XmlXades.ElementNames.Any})],l),t.Any=l},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}n(r(14)),n(r(40)),n(r(41)),n(r(32)),n(r(67)),n(r(12)),n(r(115));var a=r(1);t.Select=a.Select},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,f.getParametersValue)(e,"names",{});return new m.Sequence({optional:t,value:[new m.Constructed({optional:!0,idBlock:{tagClass:2,tagNumber:1},name:r.country_name||"",value:[new m.Choice({value:[new m.NumericString,new m.PrintableString]})]}),new m.Constructed({optional:!0,idBlock:{tagClass:2,tagNumber:2},name:r.administration_domain_name||"",value:[new m.Choice({value:[new m.NumericString,new m.PrintableString]})]}),new m.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:0},name:r.network_address||"",isHexOnly:!0}),new m.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:1},name:r.terminal_identifier||"",isHexOnly:!0}),new m.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:2},name:r.private_domain_name||"",value:[new m.Choice({value:[new m.NumericString,new m.PrintableString]})]}),new m.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:3},name:r.organization_name||"",isHexOnly:!0}),new m.Primitive({optional:!0,name:r.numeric_user_identifier||"",idBlock:{tagClass:3,tagNumber:4},isHexOnly:!0}),new m.Constructed({optional:!0,name:r.personal_name||"",idBlock:{tagClass:3,tagNumber:5},value:[new m.Primitive({idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new m.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:1},isHexOnly:!0}),new m.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:2},isHexOnly:!0}),new m.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:3},isHexOnly:!0})]}),new m.Constructed({optional:!0,name:r.organizational_unit_names||"",idBlock:{tagClass:3,tagNumber:6},value:[new m.Repeated({value:new m.PrintableString})]})]})}function s(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new m.Sequence({optional:e,value:[new m.PrintableString,new m.PrintableString]})}function l(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new m.Set({optional:e,value:[new m.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new m.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new m.Any]})]})}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(2),m=a(c),f=r(3),h=r(24),p=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.type=(0,f.getParametersValue)(t,"type",e.defaultValues("type")),this.value=(0,f.getParametersValue)(t,"value",e.defaultValues("value")),"schema"in t&&this.fromSchema(t.schema)}return u(e,[{key:"fromSchema",value:function(t){var r=m.compareSchema(t,t,e.schema({names:{blockName:"blockName",otherName:"otherName",rfc822Name:"rfc822Name",dNSName:"dNSName",x400Address:"x400Address",directoryName:{names:{blockName:"directoryName"}},ediPartyName:"ediPartyName",uniformResourceIdentifier:"uniformResourceIdentifier",iPAddress:"iPAddress",registeredID:"registeredID"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for GENERAL_NAME");switch(this.type=r.result.blockName.idBlock.tagNumber,this.type){case 0:this.value=r.result.blockName;break;case 1:case 2:case 6:var n=r.result.blockName;n.idBlock.tagClass=1,n.idBlock.tagNumber=22;var a=n.toBER(!1);this.value=m.fromBER(a).result.valueBlock.value;break;case 3:this.value=r.result.blockName;break;case 4:this.value=new p.default({schema:r.result.directoryName});break;case 5:this.value=r.result.ediPartyName;break;case 7:this.value=new m.OctetString({valueHex:r.result.blockName.valueBlock.valueHex});break;case 8:var i=r.result.blockName;i.idBlock.tagClass=1,i.idBlock.tagNumber=6;var o=i.toBER(!1);this.value=m.fromBER(o).result.valueBlock.toString()}}},{key:"toSchema",value:function(){switch(this.type){case 0:case 3:case 5:return new m.Constructed({idBlock:{tagClass:3,tagNumber:this.type},value:[this.value]});case 1:case 2:case 6:var t=new m.IA5String({value:this.value});return t.idBlock.tagClass=3,t.idBlock.tagNumber=this.type,t;case 4:return new m.Constructed({idBlock:{tagClass:3,tagNumber:4},value:[this.value.toSchema()]});case 7:var r=this.value;return r.idBlock.tagClass=3,r.idBlock.tagNumber=this.type,r;case 8:var n=new m.ObjectIdentifier({value:this.value});return n.idBlock.tagClass=3,n.idBlock.tagNumber=this.type,n;default:return e.schema()}}},{key:"toJSON",value:function(){var e={type:this.type};return"string"==typeof this.value?e.value=this.value:e.value=this.value.toJSON(),e}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return 9;case"value":return{};default:throw new Error("Invalid member name for GeneralName class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"type":return r===e.defaultValues(t);case"value":return 0===Object.keys(r).length;default:throw new Error("Invalid member name for GeneralName class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,f.getParametersValue)(e,"names",{});return new m.Choice({value:[new m.Constructed({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||"",value:[new m.ObjectIdentifier,new m.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new m.Any]})]}),new m.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:1}}),new m.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:2}}),new m.Constructed({idBlock:{tagClass:3,tagNumber:3},name:t.blockName||"",value:[o(t.builtInStandardAttributes||{},!1),s(!0),l(!0)]}),new m.Constructed({idBlock:{tagClass:3,tagNumber:4},name:t.blockName||"",value:[p.default.schema(t.directoryName||{})]}),new m.Constructed({idBlock:{tagClass:3,tagNumber:5},name:t.blockName||"",value:[new m.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new m.Choice({value:[new m.TeletexString,new m.PrintableString,new m.UniversalString,new m.Utf8String,new m.BmpString]})]}),new m.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new m.Choice({value:[new m.TeletexString,new m.PrintableString,new m.UniversalString,new m.Utf8String,new m.BmpString]})]})]}),new m.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:6}}),new m.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:7}}),new m.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:8}})]})}}]),e}();t.default=d},function(e,t){"use strict";t.APPLICATION_XML="application/xml",t.DEFAULT_PREFIX="",t.DEFAULT_NAMESPACE_URI="";var r;!function(e){e[e.None=0]="None",e[e.Element=1]="Element",e[e.Attribute=2]="Attribute",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.EntityReference=5]="EntityReference",e[e.Entity=6]="Entity",e[e.ProcessingInstruction=7]="ProcessingInstruction",e[e.Comment=8]="Comment",e[e.Document=9]="Document",e[e.DocumentType=10]="DocumentType",e[e.DocumentFragment=11]="DocumentFragment",e[e.Notation=12]="Notation",e[e.Whitespace=13]="Whitespace",e[e.SignificantWhitespace=14]="SignificantWhitespace",e[e.EndElement=15]="EndElement",e[e.EndEntity=16]="EndEntity",e[e.XmlDeclaration=17]="XmlDeclaration"}(r=t.XmlNodeType||(t.XmlNodeType={}))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}n(r(15)),n(r(116)),n(r(71)),n(r(72)),n(r(118)),n(r(117))},function(e,t){"use strict";function r(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=e,a=/[^%](%\d+)/g,i=null,o=[];i=a.exec(n);)o.push({arg:i[1],index:i.index});for(var s=o.length-1;s>=0;s--){var l=o[s],u=l.arg.substring(1),c=l.index+1;n=n.substring(0,c)+arguments[+u]+n.substring(c+1+u.length)}return n=n.replace("%%","%")}function n(e,t){for(var r=e+"";r.length<t;)r="0"+r;return r}var a=function(){function e(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];this.prefix="XMLJS",this.code=e,this.name=this.constructor.name,arguments[0]=o[e];var i=r.apply(this,arguments);this.message=""+this.prefix+n(e,4)+": "+i,this.stack=new Error(this.message).stack}return e}();t.XmlError=a;var i;!function(e){e[e.NONE=0]="NONE",e[e.NULL_REFERENCE=1]="NULL_REFERENCE",e[e.NULL_PARAM=2]="NULL_PARAM",e[e.DECORATOR_NULL_PARAM=3]="DECORATOR_NULL_PARAM",e[e.COLLECTION_LIMIT=4]="COLLECTION_LIMIT",e[e.METHOD_NOT_IMPLEMENTED=5]="METHOD_NOT_IMPLEMENTED",e[e.METHOD_NOT_SUPPORTED=6]="METHOD_NOT_SUPPORTED",e[e.PARAM_REQUIRED=7]="PARAM_REQUIRED",e[e.CONVERTER_UNSUPPORTED=8]="CONVERTER_UNSUPPORTED",e[e.ELEMENT_MALFORMED=9]="ELEMENT_MALFORMED",e[e.ELEMENT_MISSING=10]="ELEMENT_MISSING",e[e.ATTRIBUTE_MISSING=11]="ATTRIBUTE_MISSING",e[e.CONTENT_MISSING=12]="CONTENT_MISSING",e[e.CRYPTOGRAPHIC=13]="CRYPTOGRAPHIC",e[e.CRYPTOGRAPHIC_NO_MODULE=14]="CRYPTOGRAPHIC_NO_MODULE",e[e.CRYPTOGRAPHIC_UNKNOWN_TRANSFORM=15]="CRYPTOGRAPHIC_UNKNOWN_TRANSFORM",e[e.ALGORITHM_NOT_SUPPORTED=16]="ALGORITHM_NOT_SUPPORTED",e[e.ALGORITHM_WRONG_NAME=17]="ALGORITHM_WRONG_NAME",e[e.XML_EXCEPTION=18]="XML_EXCEPTION"}(i=t.XE||(t.XE={}));var o={};o[i.NONE]="No decription",o[i.NULL_REFERENCE]="Null reference",o[i.NULL_PARAM]="'%1' has empty '%2' object",o[i.DECORATOR_NULL_PARAM]="Decorator '%1' has empty '%2' parameter",o[i.COLLECTION_LIMIT]="Collection of '%1' in element '%2' has wrong amount of items",o[i.METHOD_NOT_IMPLEMENTED]="Method is not implemented",o[i.METHOD_NOT_SUPPORTED]="Method is not supported",o[i.PARAM_REQUIRED]="Required parameter is missing '%1'",o[i.CONVERTER_UNSUPPORTED]="Converter is not supported",o[i.ELEMENT_MALFORMED]="Malformed element '%1'",o[i.ELEMENT_MISSING]="Element '%1' is missing in '%2'",o[i.ATTRIBUTE_MISSING]="Attribute '%1' is missing in '%2'",o[i.CONTENT_MISSING]="Content is missing in '%1'",o[i.CRYPTOGRAPHIC]="Cryptographic error: %1",o[i.CRYPTOGRAPHIC_NO_MODULE]="WebCrypto module is not found",o[i.CRYPTOGRAPHIC_UNKNOWN_TRANSFORM]="Unknown transform %1",o[i.ALGORITHM_NOT_SUPPORTED]="Algorithm is not supported '%1'",o[i.ALGORITHM_WRONG_NAME]="Algorithm wrong name in use '%1'",o[i.XML_EXCEPTION]="XML exception: %1"},function(e,t,r){"use strict";var n=r(1),a=null,i=function(){function e(){}return e.setEngine=function(e,t){a=t,a.name=e},Object.defineProperty(e,"crypto",{get:function(){if(!a)throw new n.XmlError(n.XE.CRYPTOGRAPHIC_NO_MODULE);return a},enumerable:!0,configurable:!0}),e.isNodePlugin=function(){return"undefined"==typeof self&&"undefined"==typeof window},e}();t.Application=i,+function(){i.isNodePlugin()||i.setEngine("W3 WebCrypto module",self.crypto)}()},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=r(7),i=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(a.XmlSignatureObject);t.KeyInfoClause=i},function(e,t,r){"use strict";function n(e,t){var r=new t;return r.element=e.Element,r}var a=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},o=r(1),s=r(1),l=r(6),u=r(7),c=function(e){function t(){var t=e.apply(this,arguments)||this;return t.innerXml=null,t}return a(t,e),t.prototype.GetOutput=function(){throw new o.XmlError(o.XE.METHOD_NOT_IMPLEMENTED)},t.prototype.LoadInnerXml=function(e){if(!e)throw new o.XmlError(o.XE.PARAM_REQUIRED,"node");this.innerXml=e},t.prototype.GetInnerXml=function(){return this.innerXml},t}(u.XmlSignatureObject);i([s.XmlAttribute({localName:l.XmlSignature.AttributeNames.Algorithm,defaultValue:""})],c.prototype,"Algorithm",void 0),i([s.XmlChildElement({localName:l.XmlSignature.ElementNames.XPath,defaultValue:""})],c.prototype,"XPath",void 0),c=i([s.XmlElement({localName:l.XmlSignature.ElementNames.Transform})],c),t.Transform=c;var m=function(e){function t(){return e.apply(this,arguments)||this}return a(t,e),t.prototype.OnLoadXml=function(t){e.prototype.OnLoadXml.call(this,t),this.items=this.GetIterator().map(function(e){switch(e.Algorithm){case l.XmlSignature.AlgorithmNamespaces.XmlDsigEnvelopedSignatureTransform:return n(e,f.XmlDsigEnvelopedSignatureTransform);case l.XmlSignature.AlgorithmNamespaces.XmlDsigC14NTransform:return n(e,f.XmlDsigC14NTransform);case l.XmlSignature.AlgorithmNamespaces.XmlDsigC14NWithCommentsTransform:return n(e,f.XmlDsigC14NWithCommentsTransform);case l.XmlSignature.AlgorithmNamespaces.XmlDsigExcC14NTransform:return n(e,f.XmlDsigExcC14NTransform);case l.XmlSignature.AlgorithmNamespaces.XmlDsigExcC14NWithCommentsTransform:return n(e,f.XmlDsigExcC14NWithCommentsTransform);case l.XmlSignature.AlgorithmNamespaces.XmlDsigBase64Transform:return n(e,f.XmlDsigBase64Transform);default:throw new o.XmlError(o.XE.CRYPTOGRAPHIC_UNKNOWN_TRANSFORM,e.Algorithm)}})},t}(u.XmlSignatureCollection);m=i([s.XmlElement({localName:l.XmlSignature.ElementNames.Transforms,parser:c})],m),t.Transforms=m;var f=r(33)},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(2),s=n(o),l=r(3),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.algorithmId=(0,l.getParametersValue)(t,"algorithmId",e.defaultValues("algorithmId")),"algorithmParams"in t&&(this.algorithmParams=(0,l.getParametersValue)(t,"algorithmParams",e.defaultValues("algorithmParams"))),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{algorithmIdentifier:"algorithm",algorithmParams:"params"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for AlgorithmIdentifier");this.algorithmId=r.result.algorithm.valueBlock.toString(),"params"in r.result&&(this.algorithmParams=r.result.params)}},{key:"toSchema",value:function(){var e=[];return e.push(new s.ObjectIdentifier({value:this.algorithmId})),"algorithmParams"in this&&this.algorithmParams instanceof s.Any==!1&&e.push(this.algorithmParams),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={algorithmId:this.algorithmId};return"algorithmParams"in this&&this.algorithmParams instanceof s.Any==!1&&(e.algorithmParams=this.algorithmParams.toJSON()),e}},{key:"isEqual",value:function(t){return t instanceof e!=!1&&(this.algorithmId===t.algorithmId&&("algorithmParams"in this?"algorithmParams"in t&&JSON.stringify(this.algorithmParams)===JSON.stringify(t.algorithmParams):!("algorithmParams"in t)))}}],[{key:"defaultValues",value:function(e){switch(e){case"algorithmId":return"";case"algorithmParams":return new s.Any;default:throw new Error("Invalid member name for AlgorithmIdentifier class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"algorithmId":return""===t;case"algorithmParams":return t instanceof s.Any;default:throw new Error("Invalid member name for AlgorithmIdentifier class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",optional:t.optional||!1,value:[new s.ObjectIdentifier({name:t.algorithmIdentifier||""}),new s.Any({name:t.algorithmParams||"",optional:!0})]})}}]),e}();t.default=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(1),s=r(4),l=r(5),u={get:function(e){switch(e){case"der":case"ber":case"cer":case"per":case"xer":return"http://uri.etsi.org/01903/v1.2.2#"+e.toUpperCase()}},set:function(e){var t=/#(\w+)$/,r=t.exec(e);return r?r[1].toLowerCase():null}},c=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.XadesObject);a([i.XmlAttribute({localName:s.XmlXades.AttributeNames.Id,defaultValue:""})],c.prototype,"Id",void 0),a([i.XmlAttribute({localName:s.XmlXades.AttributeNames.Encoding,defaultValue:null,converter:u})],c.prototype,"Encoding",void 0),a([i.XmlContent({required:!0,converter:o.XmlBase64Converter})],c.prototype,"Value",void 0),c=a([i.XmlElement({localName:"EncapsulatedPKIData"})],c),t.EncapsulatedPKIData=c},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(1),s=r(9),l=r(4),u=r(5),c=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(u.XadesObject);a([i.XmlChildElement({parser:s.DigestMethod,required:!0})],c.prototype,"DigestMethod",void 0),a([i.XmlChildElement({localName:s.XmlSignature.ElementNames.DigestValue,namespaceURI:s.XmlSignature.NamespaceURI,prefix:s.XmlSignature.DefaultPrefix,converter:o.XmlBase64Converter,required:!0})],c.prototype,"DigestValue",void 0),c=a([i.XmlElement({localName:l.XmlXades.ElementNames.DigestAlgAndValue})],c),t.DigestAlgAndValueType=c;var m=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.X509IssuerSerial);m=a([i.XmlElement({localName:l.XmlXades.ElementNames.IssuerSerial,namespaceURI:l.XmlXades.NamespaceURI,prefix:l.XmlXades.DefaultPrefix})],m),t.IssuerSerial=m;var f=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(u.XadesObject);a([i.XmlChildElement({localName:l.XmlXades.ElementNames.CertDigest,parser:c,required:!0})],f.prototype,"CertDigest",void 0),a([i.XmlChildElement({parser:m,required:!0})],f.prototype,"IssuerSerial",void 0),a([i.XmlAttribute({localName:l.XmlXades.AttributeNames.URI})],f.prototype,"Uri",void 0),f=a([i.XmlElement({localName:l.XmlXades.ElementNames.Cert})],f),t.Cert=f;var h=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(u.XadesCollection);h=a([i.XmlElement({localName:"CertIDList",parser:f})],h),t.CertIDList=h;var p=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(h);p=a([i.XmlElement({localName:l.XmlXades.ElementNames.SigningCertificate})],p),t.SigningCertificate=p},function(e,t){"use strict";var r=function(){function e(e){this.items=new Array,e&&(this.items=e)}return Object.defineProperty(e.prototype,"Count",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),e.prototype.Item=function(e){return this.items[e]||null},e.prototype.Add=function(e){this.items.push(e)},e.prototype.Pop=function(){return this.items.pop()},e.prototype.RemoveAt=function(e){this.items=this.items.filter(function(t,r){
return r!==e})},e.prototype.Clear=function(){this.items=new Array},e.prototype.GetIterator=function(){return this.items},e.prototype.ForEach=function(e){this.GetIterator().forEach(e)},e.prototype.Map=function(t){return new e(this.GetIterator().map(t))},e.prototype.Filter=function(t){return new e(this.GetIterator().filter(t))},e.prototype.Sort=function(t){return new e(this.GetIterator().sort(t))},e.prototype.Every=function(e){return this.GetIterator().every(e)},e.prototype.Some=function(e){return this.GetIterator().some(e)},e.prototype.IsEmpty=function(){return 0===this.Count},e}();t.Collection=r},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=r(1),i=r(14),o=function(){function e(){}return e.prototype.getAlgorithmName=function(){return this.namespaceURI},e}();t.XmlAlgorithm=o;var s=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.Digest=function(e){var t=this;return Promise.resolve().then(function(){var r;if("string"==typeof e)r=a.Convert.FromString(e,"utf8");else if(e instanceof Uint8Array)r=e;else{var n=(new XMLSerializer).serializeToString(e);r=a.Convert.FromString(n,"utf8")}return i.Application.crypto.subtle.digest(t.algorithm,r)}).then(function(e){return new Uint8Array(e)})},t}(o);t.HashAlgorithm=s;var l=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.Sign=function(e,t,r){var n=a.Convert.FromString(e,"utf8");return i.Application.crypto.subtle.sign(r,t,n)},t.prototype.Verify=function(e,t,r,n){var o=a.Convert.FromString(e,"utf8");return i.Application.crypto.subtle.verify(n||this.algorithm,t,r,o)},t}(o);t.SignatureAlgorithm=l},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}n(r(110)),n(r(111)),n(r(23)),n(r(112)),n(r(113))},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=r(21);t.SHA1="SHA-1",t.SHA256="SHA-256",t.SHA384="SHA-384",t.SHA512="SHA-512",t.SHA1_NAMESPACE="http://www.w3.org/2000/09/xmldsig#sha1",t.SHA256_NAMESPACE="http://www.w3.org/2001/04/xmlenc#sha256",t.SHA384_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#sha384",t.SHA512_NAMESPACE="http://www.w3.org/2001/04/xmlenc#sha512";var i=function(e){function r(){var r=e.apply(this,arguments)||this;return r.algorithm={name:t.SHA1},r.namespaceURI=t.SHA1_NAMESPACE,r}return n(r,e),r}(a.HashAlgorithm);t.Sha1=i;var o=function(e){function r(){var r=e.apply(this,arguments)||this;return r.algorithm={name:t.SHA256},r.namespaceURI=t.SHA256_NAMESPACE,r}return n(r,e),r}(a.HashAlgorithm);t.Sha256=o;var s=function(e){function r(){var r=e.apply(this,arguments)||this;return r.algorithm={name:t.SHA384},r.namespaceURI=t.SHA384_NAMESPACE,r}return n(r,e),r}(a.HashAlgorithm);t.Sha384=s;var l=function(e){function r(){var r=e.apply(this,arguments)||this;return r.algorithm={name:t.SHA512},r.namespaceURI=t.SHA512_NAMESPACE,r}return n(r,e),r}(a.HashAlgorithm);t.Sha512=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(2),u=a(l),c=r(3),m=r(78),f=n(m),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.typesAndValues=(0,c.getParametersValue)(t,"typesAndValues",e.defaultValues("typesAndValues")),this.valueBeforeDecode=(0,c.getParametersValue)(t,"valueBeforeDecode",e.defaultValues("valueBeforeDecode")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{blockName:"RDN",repeatedSet:"typesAndValues"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RDN");"typesAndValues"in r.result&&(this.typesAndValues=Array.from(r.result.typesAndValues,function(e){return new f.default({schema:e})})),this.valueBeforeDecode=r.result.RDN.valueBeforeDecode}},{key:"toSchema",value:function(){if(0===this.valueBeforeDecode.byteLength)return new u.Sequence({value:[new u.Set({value:Array.from(this.typesAndValues,function(e){return e.toSchema()})})]});var e=u.fromBER(this.valueBeforeDecode);return e.result}},{key:"toJSON",value:function(){return{typesAndValues:Array.from(this.typesAndValues,function(e){return e.toJSON()})}}},{key:"isEqual",value:function(t){if(t instanceof e){if(this.typesAndValues.length!==t.typesAndValues.length)return!1;var r=!0,n=!1,a=void 0;try{for(var i,s=this.typesAndValues.entries()[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var l=o(i.value,2),u=l[0],m=l[1];if(m.isEqual(t.typesAndValues[u])===!1)return!1}}catch(e){n=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw a}}return!0}return t instanceof ArrayBuffer&&(0,c.isEqualBuffer)(this.valueBeforeDecode,t)}}],[{key:"defaultValues",value:function(e){switch(e){case"typesAndValues":return[];case"valueBeforeDecode":return new ArrayBuffer(0);default:throw new Error("Invalid member name for RelativeDistinguishedNames class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"typesAndValues":return 0===t.length;case"valueBeforeDecode":return 0===t.byteLength;default:throw new Error("Invalid member name for RelativeDistinguishedNames class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Repeated({name:t.repeatedSequence||"",value:new u.Set({value:[new u.Repeated({name:t.repeatedSet||"",value:f.default.schema(t.typeAndValue||{})})]})})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t,r){A={name:e,crypto:t,subtle:r}}function o(){return A}function s(){if(null!==A.subtle)return A.subtle}function l(e){if(null!==A.crypto)return A.crypto.getRandomValues(e);throw new Error("No support for Web Cryptography API")}function u(e){var t="";switch(e.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.113549.1.1.5";break;case"SHA-256":t="1.2.840.113549.1.1.11";break;case"SHA-384":t="1.2.840.113549.1.1.12";break;case"SHA-512":t="1.2.840.113549.1.1.13"}break;case"RSA-PSS":t="1.2.840.113549.1.1.10";break;case"RSA-OAEP":t="1.2.840.113549.1.1.7";break;case"ECDSA":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.10045.4.1";break;case"SHA-256":t="1.2.840.10045.4.3.2";break;case"SHA-384":t="1.2.840.10045.4.3.3";break;case"SHA-512":t="1.2.840.10045.4.3.4"}break;case"ECDH":switch(e.kdf.toUpperCase()){case"SHA-1":t="1.3.133.16.840.63.0.2";break;case"SHA-256":t="1.3.132.1.11.1";break;case"SHA-384":t="1.3.132.1.11.2";break;case"SHA-512":t="1.3.132.1.11.3"}break;case"AES-CTR":break;case"AES-CBC":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.2";break;case 192:t="2.16.840.1.101.3.4.1.22";break;case 256:t="2.16.840.1.101.3.4.1.42"}break;case"AES-CMAC":break;case"AES-GCM":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.6";break;case 192:t="2.16.840.1.101.3.4.1.26";break;case 256:t="2.16.840.1.101.3.4.1.46"}break;case"AES-CFB":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.4";break;case 192:t="2.16.840.1.101.3.4.1.24";break;case 256:t="2.16.840.1.101.3.4.1.44"}break;case"AES-KW":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.5";break;case 192:t="2.16.840.1.101.3.4.1.25";break;case 256:t="2.16.840.1.101.3.4.1.45"}break;case"HMAC":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.113549.2.7";break;case"SHA-256":t="1.2.840.113549.2.9";break;case"SHA-384":t="1.2.840.113549.2.10";break;case"SHA-512":t="1.2.840.113549.2.11"}break;case"DH":t="1.2.840.113549.1.9.16.3.5";break;case"SHA-1":t="1.3.14.3.2.26";break;case"SHA-256":t="2.16.840.1.101.3.4.2.1";break;case"SHA-384":t="2.16.840.1.101.3.4.2.2";break;case"SHA-512":t="2.16.840.1.101.3.4.2.3";break;case"CONCAT":break;case"HKDF":break;case"PBKDF2":t="1.2.840.113549.1.5.12";break;case"P-256":t="1.2.840.10045.3.1.7";break;case"P-384":t="1.3.132.0.34";break;case"P-521":t="1.3.132.0.35"}return t}function c(e,t){var r={algorithm:{},usages:[]};switch(e.toUpperCase()){case"RSASSA-PKCS1-V1_5":switch(t.toLowerCase()){case"generatekey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["sign","verify"]};break;case"verify":case"sign":case"importkey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSASSA-PKCS1-v1_5"},usages:[]}}break;case"RSA-PSS":switch(t.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"},saltLength:20},usages:["sign","verify"]};break;case"generatekey":r={algorithm:{name:"RSA-PSS",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSA-PSS"},usages:[]}}break;case"RSA-OAEP":switch(t.toLowerCase()){case"encrypt":case"decrypt":r={algorithm:{name:"RSA-OAEP"},usages:["encrypt","decrypt"]};break;case"generatekey":r={algorithm:{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"importkey":r={algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]};break;case"exportkey":default:return{algorithm:{name:"RSA-OAEP"},usages:[]}}break;case"ECDSA":switch(t.toLowerCase()){case"generatekey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["verify"]};break;case"verify":case"sign":r={algorithm:{name:"ECDSA",hash:{name:"SHA-256"}},usages:["sign"]};break;default:return{algorithm:{name:"ECDSA"},usages:[]}}break;case"ECDH":switch(t.toLowerCase()){case"exportkey":case"importkey":case"generatekey":r={algorithm:{name:"ECDH",namedCurve:"P-256"},usages:["deriveKey","deriveBits"]};break;case"derivekey":case"derivebits":r={algorithm:{name:"ECDH",namedCurve:"P-256",public:[]},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"ECDH"},usages:[]}}break;case"AES-CTR":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CTR",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CTR",counter:new Uint8Array(16),length:10},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CTR"},usages:[]}}break;case"AES-CBC":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CBC",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CBC",iv:l(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CBC"},usages:[]}}break;case"AES-GCM":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-GCM",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-GCM",iv:l(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-GCM"},usages:[]}}break;case"AES-KW":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":case"wrapkey":case"unwrapkey":r={algorithm:{name:"AES-KW",length:256},usages:["wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-KW"},usages:[]}}break;case"HMAC":switch(t.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"HMAC"},usages:["sign","verify"]};break;case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"HMAC",length:32,hash:{name:"SHA-256"}},usages:["sign","verify"]};break;default:return{algorithm:{name:"HMAC"},usages:[]}}break;case"HKDF":switch(t.toLowerCase()){case"derivekey":r={algorithm:{name:"HKDF",hash:"SHA-256",salt:new Uint8Array([]),info:new Uint8Array([])},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"HKDF"},usages:[]}}break;case"PBKDF2":switch(t.toLowerCase()){case"derivekey":r={algorithm:{name:"PBKDF2",hash:{name:"SHA-256"},salt:new Uint8Array([]),iterations:1e3},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"PBKDF2"},usages:[]}}}return r}function m(e){if(e.byteLength%2!==0)return new ArrayBuffer(0);var t=e.byteLength/2,r=new ArrayBuffer(t),n=new Uint8Array(r);n.set(new Uint8Array(e,0,t));var a=void 0,i=void 0,o=new ArrayBuffer(t),s=new Uint8Array(o);s.set(new Uint8Array(e,t,t));var l=void 0,u=void 0;switch(!0){case 0!==(128&n[0]):a=new ArrayBuffer(t+1),i=new Uint8Array(a),i[0]=0,i.set(n,1);break;case 0===n[0]&&0===(128&n[1]):a=new ArrayBuffer(t-1),i=new Uint8Array(a),i.set(new Uint8Array(e,1,t-1));break;default:a=r,i=n}switch(!0){case 0!==(128&s[0]):l=new ArrayBuffer(t+1),u=new Uint8Array(l),u[0]=0,u.set(s,1);break;case 0===s[0]&&0===(128&s[1]):l=new ArrayBuffer(t-1),u=new Uint8Array(l),u.set(new Uint8Array(e,1,t-1));break;default:l=o,u=s}var c=new b.Integer;c.valueBlock.isHexOnly=!0,c.valueBlock.valueHex=a.slice();var m=new b.Integer;return m.valueBlock.isHexOnly=!0,m.valueBlock.valueHex=l.slice(),new b.Sequence({value:[c,m]}).toBER(!1)}function f(e){var t=e.replace(/^\s+|\s+$/g,"");return t=t.replace(/\s+/g," "),t=t.toLowerCase()}function h(e){function t(e){var t=new Uint8Array(e.valueBlock.valueHex);switch(e.valueBlock.valueHex.byteLength){case 32:case 48:case 66:return e.valueBlock.valueHex;case 33:case 49:case 67:return t.slice(1).buffer;case 31:case 47:case 65:var r=new ArrayBuffer(e.valueBlock.valueHex.byteLength+1),n=new Uint8Array(r);return n.set(t,1),r;default:return new ArrayBuffer(0)}}if(e instanceof b.Sequence==!1)return new ArrayBuffer(0);if(2!==e.valueBlock.value.length)return new ArrayBuffer(0);if(e.valueBlock.value[0]instanceof b.Integer==!1)return new ArrayBuffer(0);if(e.valueBlock.value[1]instanceof b.Integer==!1)return new ArrayBuffer(0);var r=t(e.valueBlock.value[0]),n=t(e.valueBlock.value[1]);return(0,S.utilConcatBuf)(r,n)}function p(e){switch(e){case"1.2.840.113549.1.1.1":case"1.2.840.113549.1.1.5":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case"1.2.840.113549.1.1.11":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"1.2.840.113549.1.1.12":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"1.2.840.113549.1.1.13":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"1.2.840.113549.1.1.10":return{name:"RSA-PSS"};case"1.2.840.113549.1.1.7":return{name:"RSA-OAEP"};case"1.2.840.10045.2.1":case"1.2.840.10045.4.1":return{name:"ECDSA",hash:{name:"SHA-1"}};case"1.2.840.10045.4.3.2":return{name:"ECDSA",hash:{name:"SHA-256"}};case"1.2.840.10045.4.3.3":return{name:"ECDSA",hash:{name:"SHA-384"}};case"1.2.840.10045.4.3.4":return{name:"ECDSA",hash:{name:"SHA-512"}};case"1.3.133.16.840.63.0.2":return{name:"ECDH",kdf:"SHA-1"};case"1.3.132.1.11.1":return{name:"ECDH",kdf:"SHA-256"};case"1.3.132.1.11.2":return{name:"ECDH",kdf:"SHA-384"};case"1.3.132.1.11.3":return{name:"ECDH",kdf:"SHA-512"};case"2.16.840.1.101.3.4.1.2":return{name:"AES-CBC",length:128};case"2.16.840.1.101.3.4.1.22":return{name:"AES-CBC",length:192};case"2.16.840.1.101.3.4.1.42":return{name:"AES-CBC",length:256};case"2.16.840.1.101.3.4.1.6":return{name:"AES-GCM",length:128};case"2.16.840.1.101.3.4.1.26":return{name:"AES-GCM",length:192};case"2.16.840.1.101.3.4.1.46":return{name:"AES-GCM",length:256};case"2.16.840.1.101.3.4.1.4":return{name:"AES-CFB",length:128};case"2.16.840.1.101.3.4.1.24":return{name:"AES-CFB",length:192};case"2.16.840.1.101.3.4.1.44":return{name:"AES-CFB",length:256};case"2.16.840.1.101.3.4.1.5":return{name:"AES-KW",length:128};case"2.16.840.1.101.3.4.1.25":return{name:"AES-KW",length:192};case"2.16.840.1.101.3.4.1.45":return{name:"AES-KW",length:256};case"1.2.840.113549.2.7":return{name:"HMAC",hash:{name:"SHA-1"}};case"1.2.840.113549.2.9":return{name:"HMAC",hash:{name:"SHA-256"}};case"1.2.840.113549.2.10":return{name:"HMAC",hash:{name:"SHA-384"}};case"1.2.840.113549.2.11":return{name:"HMAC",hash:{name:"SHA-512"}};case"1.2.840.113549.1.9.16.3.5":return{name:"DH"};case"1.3.14.3.2.26":return{name:"SHA-1"};case"2.16.840.1.101.3.4.2.1":return{name:"SHA-256"};case"2.16.840.1.101.3.4.2.2":return{name:"SHA-384"};case"2.16.840.1.101.3.4.2.3":return{name:"SHA-512"};case"1.2.840.113549.1.5.12":return{name:"PBKDF2"};case"1.2.840.10045.3.1.7":return{name:"P-256"};case"1.3.132.0.34":return{name:"P-384"};case"1.3.132.0.35":return{name:"P-521"}}return{}}function d(e){var t="";switch(e.algorithmId){case"1.2.840.10045.4.1":case"1.2.840.113549.1.1.5":t="SHA-1";break;case"1.2.840.10045.4.3.2":case"1.2.840.113549.1.1.11":t="SHA-256";break;case"1.2.840.10045.4.3.3":case"1.2.840.113549.1.1.12":t="SHA-384";break;case"1.2.840.10045.4.3.4":case"1.2.840.113549.1.1.13":t="SHA-512";break;case"1.2.840.113549.1.1.10":try{var r=new N.default({schema:e.algorithmParams});if("hashAlgorithm"in r){var n=p(r.hashAlgorithm.algorithmId);if("name"in n==!1)return"";t=n.name}else t="SHA-1"}catch(e){}}return t}function v(e,t,r,n){switch(e.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;default:return Promise.reject("Unknown hash function: "+e)}if(t instanceof ArrayBuffer==!1)return Promise.reject('Please set "Zbuffer" as "ArrayBuffer"');if(0===t.byteLength)return Promise.reject('"Zbuffer" has zero length, error');if(n instanceof ArrayBuffer==!1)return Promise.reject('Please set "SharedInfo" as "ArrayBuffer"');if(r>255)return Promise.reject('Please set "Counter" variable to value less or equal to 255');var a=new ArrayBuffer(4),i=new Uint8Array(a);i[0]=0,i[1]=0,i[2]=0,i[3]=r;var o=new ArrayBuffer(0),l=s();return"undefined"==typeof l?Promise.reject("Unable to create WebCrypto object"):(o=(0,S.utilConcatBuf)(o,t),o=(0,S.utilConcatBuf)(o,a),o=(0,S.utilConcatBuf)(o,n),l.digest({name:e},o).then(function(e){return{counter:r,result:e}}))}function y(e,t,r,n){var a=0,i=1,o=[];switch(e.toUpperCase()){case"SHA-1":a=160;break;case"SHA-256":a=256;break;case"SHA-384":a=384;break;case"SHA-512":a=512;break;default:return Promise.reject("Unknown hash function: "+e)}if(t instanceof ArrayBuffer==!1)return Promise.reject('Please set "Zbuffer" as "ArrayBuffer"');if(0===t.byteLength)return Promise.reject('"Zbuffer" has zero length, error');if(n instanceof ArrayBuffer==!1)return Promise.reject('Please set "SharedInfo" as "ArrayBuffer"');var s=r/a;Math.floor(s)>0&&(i=Math.floor(s),s-i>0&&i++);for(var l=1;l<=i;l++)o.push(v(e,t,l,n));return Promise.all(o).then(function(e){for(var t=new ArrayBuffer(0),n=1,a=!0;a;){a=!1;var i=!0,o=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;if(c.counter===n){t=(0,S.utilConcatBuf)(t,c.result),a=!0;break}}}catch(e){o=!0,s=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw s}}n++}if(r>>=3,t.byteLength>r){for(var m=new ArrayBuffer(r),f=new Uint8Array(m),h=new Uint8Array(t),p=0;p<r;p++)f[p]=h[p];return m}return t})}Object.defineProperty(t,"__esModule",{value:!0}),t.setEngine=i,t.getEngine=o,t.getCrypto=s,t.getRandomValues=l,t.getOIDByAlgorithm=u,t.getAlgorithmParameters=c,t.createCMSECDSASignature=m,t.stringPrep=f,t.createECDSASignatureFromCMS=h,t.getAlgorithmByOID=p,t.getHashAlgorithm=d,t.kdfWithCounter=v,t.kdf=y;var g=r(2),b=a(g),S=r(3),w=r(17),C=(n(w),r(47)),N=n(C),P=r(84),k=n(P),A={name:"none",crypto:null,subtle:null};!function(){if("undefined"!=typeof self&&"crypto"in self){var e="webcrypto",t=self.crypto,r=null;"webkitSubtle"in self.crypto&&(r=self.crypto.webkitSubtle,e="safari"),"subtle"in self.crypto&&(r=self.crypto.subtle),A={name:e,crypto:t,subtle:new k.default({name:e,crypto:r})}}}()},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(4),s=r(5),l=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesObject);a([i.XmlAttribute({localName:o.XmlXades.AttributeNames.Qualifier})],l.prototype,"Qualifier",void 0),a([i.XmlContent({defaultValue:"",required:!0})],l.prototype,"Value",void 0),l=a([i.XmlElement({localName:o.XmlXades.ElementNames.Identifier})],l),t.Identifier=l;var u=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.OnLoadXml=function(e){e.textContent&&(this.Uri=e.textContent)},t.prototype.OnGetXml=function(e){this.Uri&&(e.textContent=this.Uri)},t}(s.XadesObject);a([i.XmlContent({defaultValue:"",required:!0})],u.prototype,"Uri",void 0),u=a([i.XmlElement({localName:o.XmlXades.ElementNames.DocumentationReference})],u),t.DocumentationReference=u;var c=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesCollection);c=a([i.XmlElement({localName:o.XmlXades.ElementNames.DocumentationReferences,parser:u})],c),t.DocumentationReferences=c;var m=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesObject);a([i.XmlChildElement({parser:l,required:!0})],m.prototype,"Identifier",void 0),a([i.XmlChildElement({localName:o.XmlXades.ElementNames.Description,namespaceURI:o.XmlXades.NamespaceURI,prefix:o.XmlXades.DefaultPrefix,defaultValue:""})],m.prototype,"Description",void 0),a([i.XmlChildElement({parser:c})],m.prototype,"DocumentationReferences",void 0),m=a([i.XmlElement({localName:o.XmlXades.ElementNames.ObjectIdentifier})],m),t.ObjectIdentifier=m},function(e,t){"use strict";t.ELEMENT="element",t.ATTRIBUTE="attribute",t.CONTENT="content"},function(e,t,r){"use strict";var n=r(13),a=function(){function e(){}return e.ToString=function(e,t){void 0===t&&(t="utf8");var r=new Uint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);default:throw new n.XmlError(n.XE.CONVERTER_UNSUPPORTED)}},e.FromString=function(e,t){switch(void 0===t&&(t="utf8"),t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);default:throw new n.XmlError(n.XE.CONVERTER_UNSUPPORTED)}},e.ToBase64=function(e){if("undefined"!=typeof btoa){var t=this.ToString(e,"binary");return btoa(t)}if("undefined"!=typeof Buffer)return new Buffer(e).toString("base64");throw new n.XmlError(n.XE.CONVERTER_UNSUPPORTED)},e.FromBase64=function(e){if(e=e.replace(/\n/g,"").replace(/\r/g,"").replace(/\t/g,"").replace(/\s/g,""),"undefined"!=typeof atob)return this.FromBinary(atob(e));if("undefined"!=typeof Buffer)return new Buffer(e,"base64");throw new n.XmlError(n.XE.CONVERTER_UNSUPPORTED)},e.Base64Padding=function(e){var t=4-e.length%4;if(t<4)for(var r=0;r<t;r++)e+="=";return e},e.FromBase64Url=function(e){return this.FromBase64(this.Base64Padding(e.replace(/\-/g,"+").replace(/\_/g,"/")))},e.ToBase64Url=function(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")},e.FromUtf8String=function(e){for(var t=unescape(encodeURIComponent(e)),r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r},e.ToUtf8String=function(e){var t=String.fromCharCode.apply(null,e),r=decodeURIComponent(escape(t));return r},e.FromBinary=function(e){for(var t=e.length,r=new Uint8Array(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r},e.ToBinary=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e.ToHex=function(e){for(var t="",r=[],n=0;n<e.length;n++){var a=e[n].toString(16);r.push(1===a.length?"0"+a:a)}return r.join(t)},e.FromHex=function(e){for(var t=new Uint8Array(e.length/2),r=0;r<e.length;r+=2){var n=e.slice(r,r+2);t[r/2]=parseInt(n,16)}return t},e.ToDateTime=function(e){return new Date(e)},e.FromDateTime=function(e){var t=e.toISOString();return t},e}();t.Convert=a},function(e,t,r){(function(e){"use strict";function n(e,t){for(var r,n=null==e.ownerDocument?e:e.ownerDocument,a=document.createNSResolver(null==e.ownerDocument?e.documentElement:e.ownerDocument.documentElement),i=n.evaluate(t,e,a,XPathResult.ANY_TYPE,null),o=[];r=i.iterateNext();)o.push(r);return o}function a(e,r){var n=t.Select(e,r);return n&&n.length>0?n[0]:null}function i(e,t){if(void 0===t&&(t={}),e&&e.nodeType===u.XmlNodeType.Element){var r=e;r.namespaceURI&&"http://www.w3.org/XML/1998/namespace"!==r.namespaceURI&&!t[r.prefix||""]&&(t[r.prefix?r.prefix:""]=e.namespaceURI);for(var n=0;n<e.childNodes.length;n++){var a=e.childNodes.item(n);a&&a.nodeType===u.XmlNodeType.Element&&i(a,t)}}}function o(e){var t={};return i(e,t),t}function s(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=arguments[0],a=1;a<arguments.length;a++){var i=arguments[a];for(var o in i)n[o]=i[o]}return n}var l,u=r(11);if("undefined"==typeof self){var c="xmldom-alpha";l=e,l.XMLSerializer=r(36)(c).XMLSerializer,l.DOMParser=r(36)(c).DOMParser,l.DOMImplementation=r(36)(c).DOMImplementation,l.document=(new DOMImplementation).createDocument("http://www.w3.org/1999/xhtml","html",null)}else l=self;t.Select="undefined"!=typeof self?n:r(124),t.SelectSingleNode=a,t.SelectNamespaces=o,t.assign=s}).call(t,function(){return this}())},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=r(13),i=r(31),o=r(20),s=r(11),l=function(e){function t(){var t=e.apply(this,arguments)||this;return t.items=new Array,t}return n(t,e),t.prototype.HasChanged=function(){var t=e.prototype.HasChanged.call(this),r=this.Some(function(e){return e.HasChanged()});return t||r},t.prototype.OnGetXml=function(e){for(var t=0,r=this.GetIterator();t<r.length;t++){var n=r[t],a=n.GetXml();a&&e.appendChild(a)}},t.prototype.OnLoadXml=function(e){var t=this.GetStatic();if(!t.parser)throw new a.XmlError(a.XE.XML_EXCEPTION,t.localName+" doesn't have required 'parser' in @XmlElement");for(var r=0;r<e.childNodes.length;r++){var n=e.childNodes.item(r);if(n.nodeType===s.XmlNodeType.Element&&n.localName===t.parser.localName&&n.namespaceURI==t.namespaceURI){var i=n,o=new t.parser;o.LoadXml(i),this.Add(o)}}},Object.defineProperty(t.prototype,"Count",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),t.prototype.Item=function(e){return this.items[e]||null},t.prototype.Add=function(e){this.items.push(e),this.element=null},t.prototype.Pop=function(){return this.element=null,this.items.pop()},t.prototype.RemoveAt=function(e){this.items=this.items.filter(function(t,r){return r!==e}),this.element=null},t.prototype.Clear=function(){this.items=new Array,this.element=null},t.prototype.GetIterator=function(){return this.items},t.prototype.ForEach=function(e){this.GetIterator().forEach(e)},t.prototype.Map=function(e){return new o.Collection(this.GetIterator().map(e))},t.prototype.Filter=function(e){return new o.Collection(this.GetIterator().filter(e))},t.prototype.Sort=function(e){return new o.Collection(this.GetIterator().sort(e))},t.prototype.Every=function(e){return this.GetIterator().every(e)},t.prototype.Some=function(e){return this.GetIterator().some(e)},t.prototype.IsEmpty=function(){return 0===this.Count},t}(i.XmlObject);t.XmlCollection=l},function(e,t,r){"use strict";var n=r(27),a=r(11),i=r(13),o=r(29),s=r(11),l="xml_root",u=function(){function e(){this.prefix=this.GetStatic().prefix||null,this.localName=this.GetStatic().localName,this.namespaceURI=this.GetStatic().namespaceURI}return Object.defineProperty(e.prototype,"Element",{get:function(){return this.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Prefix",{get:function(){return this.prefix},set:function(e){this.prefix=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"LocalName",{get:function(){return this.localName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NamespaceURI",{get:function(){return this.namespaceURI||null},enumerable:!0,configurable:!0}),e.prototype.GetStatic=function(){return this.constructor},e.prototype.GetPrefix=function(){return this.Prefix?this.prefix+":":""},e.prototype.HasChanged=function(){var e=this.GetStatic();if(e.items)for(var t in e.items){var r=e.items[t],n=this[t];if(r.parser&&n&&n.HasChanged())return!0}return null===this.element},e.prototype.OnGetXml=function(e){},e.prototype.GetXml=function(e){if(!e&&!this.HasChanged())return this.element||null;var t=this.CreateDocument(),r=this.CreateElement(),o=this.GetStatic(),s=this.localName;if(o.items)for(var l in o.items){var u=this[l],c=o.items[l];switch(c.type){case n.CONTENT:var m=c,f=m.converter?m.converter.get(u):u;if(m.required&&(null===f||void 0===f))throw new i.XmlError(i.XE.CONTENT_MISSING,s);(m.defaultValue!==u||m.required)&&(r.textContent=f);break;case n.ATTRIBUTE:var m=c,f=m.converter?m.converter.get(u):u;if(m.required&&(null===f||void 0===f))throw new i.XmlError(i.XE.ATTRIBUTE_MISSING,m.localName,s);(m.defaultValue!==u||m.required)&&(m.namespaceURI?r.setAttributeNS(m.namespaceURI,m.localName,f):r.setAttribute(m.localName,f));break;case n.ELEMENT:var m=c,h=null;if(m.parser){if(m.required&&!u||m.minOccurs&&!u.Count)throw new i.XmlError(i.XE.ELEMENT_MISSING,u.localName,s);u&&(h=u.GetXml(void 0===u.element&&(m.required||u.Count)))}else{var f=m.converter?m.converter.get(u):u;if(m.required&&void 0===f)throw new i.XmlError(i.XE.ELEMENT_MISSING,m.localName,s);(u!==m.defaultValue||m.required)&&(h=m.namespaceURI?t.createElementNS(m.namespaceURI,""+(m.prefix?m.prefix+":":"")+m.localName):t.createElement(""+(m.prefix?m.prefix+":":"")+m.localName),h.textContent=f)}if(h)if(m.noRoot){for(var p=[],d=0;d<h.childNodes.length;d++){var v=h.childNodes.item(d);v.nodeType===a.XmlNodeType.Element&&p.push(v)}if(p.length<m.minOccurs||p.length>m.maxOccurs)throw new i.XmlError(i.XE.COLLECTION_LIMIT,u.localName,o.localName);p.forEach(function(e){return r.appendChild(e.cloneNode(!0))})}else{if(h.childNodes.length<m.minOccurs||h.childNodes.length>m.maxOccurs)throw new i.XmlError(i.XE.COLLECTION_LIMIT,u.localName,o.localName);
r.appendChild(h)}}}return this.OnGetXml(r),this.element=r,r},e.prototype.OnLoadXml=function(e){},e.LoadXml=function(e){var t=new this;return t.LoadXml(e),t},e.prototype.LoadXml=function(t){var r;if("string"==typeof t){var o=e.Parse(t);r=o.documentElement}else r=t;if(!r)throw new i.XmlError(i.XE.PARAM_REQUIRED,"element");var s=this.GetStatic(),l=this.localName;if(r.localName!==l||r.namespaceURI!=this.NamespaceURI)throw new i.XmlError(i.XE.ELEMENT_MALFORMED,l);if(s.items)for(var u in s.items){var m=s.items[u];switch(m.type){case n.CONTENT:var f=m;if(f.required&&!r.textContent)throw new i.XmlError(i.XE.CONTENT_MISSING,l);if(r.textContent){var h=f.converter?f.converter.set(r.textContent):r.textContent;this[u]=h}else this[u]=f.defaultValue;break;case n.ATTRIBUTE:var f=m,p=void 0,d=void 0;if(f.namespaceURI?(p=r.hasAttributeNS.bind(r,f.namespaceURI,f.localName),d=r.getAttributeNS.bind(r,f.namespaceURI,f.localName)):(p=r.hasAttribute.bind(r,f.localName),d=r.getAttribute.bind(r,f.localName)),f.required&&!p())throw new i.XmlError(i.XE.ATTRIBUTE_MISSING,f.localName,l);if(p()){var h=f.converter?f.converter.set(d()):d();this[u]=h}else this[u]=f.defaultValue;break;case n.ELEMENT:var f=m;if(f.noRoot){if(!f.parser)throw new i.XmlError(i.XE.XML_EXCEPTION,"Schema for '"+f.localName+"' with flag noRoot must have 'parser'");var v=new f.parser;if(!(v instanceof c.XmlCollection))throw new i.XmlError(i.XE.XML_EXCEPTION,"Schema for '"+f.localName+"' with flag noRoot must have 'parser' like instance of XmlCollection");if(v.OnLoadXml(r),delete v.element,v.Count<f.minOccurs||v.Count>f.maxOccurs)throw new i.XmlError(i.XE.COLLECTION_LIMIT,f.parser.localName,l);this[u]=v;continue}for(var y=null,g=0;g<r.childNodes.length;g++){var b=r.childNodes.item(g);if(b.nodeType===a.XmlNodeType.Element){var S=b;if(S.localName===f.localName&&S.namespaceURI==f.namespaceURI){y=S;break}}}if(f.required&&!y)throw new i.XmlError(i.XE.ELEMENT_MISSING,f.parser?f.parser.localName:f.localName,l);if(f.parser){if(y){var h=new f.parser;h.localName=f.localName,h.namespaceURI=f.namespaceURI,this[u]=h,h.LoadXml(y)}}else if(y){var h=f.converter?f.converter.set(y.textContent):y.textContent;this[u]=h}else this[u]=f.defaultValue}}this.OnLoadXml(r),this.prefix=r.prefix||"",this.element=r},e.prototype.toString=function(){var e=this.GetXml();return e?(new XMLSerializer).serializeToString(e):""},e.Parse=function(e){return(new DOMParser).parseFromString(e,s.APPLICATION_XML)},e.GetElement=function(e,t,r){void 0===r&&(r=!0);var n=e.getElementsByTagName(t);if(r&&0===n.length)throw new i.XmlError(i.XE.ELEMENT_MISSING,t,e.localName);return n[0]||null},e.prototype.GetElement=function(t,r){if(void 0===r&&(r=!0),!this.element)throw new i.XmlError(i.XE.NULL_PARAM,this.localName);return e.GetElement(this.element,t,r)},e.GetAttribute=function(e,t,r,n){if(void 0===n&&(n=!0),e.hasAttribute(t))return e.getAttribute(t);if(n)throw new i.XmlError(i.XE.ATTRIBUTE_MISSING,t,e.localName);return r},e.prototype.GetAttribute=function(t,r,n){if(void 0===n&&(n=!0),!this.element)throw new i.XmlError(i.XE.NULL_PARAM,this.localName);return e.GetAttribute(this.element,t,r,n)},e.GetElementById=function(e,t){if(null==e||null==t)return null;var r=null;return e.nodeType===a.XmlNodeType.Document&&(r=e.getElementById(t)),null==r&&(r=o.SelectSingleNode(e,"//*[@Id='"+t+"']"),null==r&&(r=o.SelectSingleNode(e,"//*[@ID='"+t+"']"),null==r&&(r=o.SelectSingleNode(e,"//*[@id='"+t+"']")))),r},e.prototype.CreateElement=function(e,t,r,n){void 0===r&&(r=null),void 0===n&&(n=null),e||(e=this.CreateDocument()),t=t||this.localName,r=r||this.NamespaceURI,n=n||this.prefix;var a=e.createElementNS(this.NamespaceURI,(n?n+":":"")+t);return e.importNode(a,!0),a},e.prototype.CreateDocument=function(){return e.CreateDocument(this.localName,this.NamespaceURI,this.Prefix)},e.CreateDocument=function(e,t,r){void 0===e&&(e=l),void 0===t&&(t=null),void 0===r&&(r=null);var n="",a="",i="";r&&(n=r+":",a=":"+r),t&&(i=" xmlns"+a+'="'+t+'"');var o=""+n+e,u=(new DOMParser).parseFromString("<"+o+i+"></"+o+">",s.APPLICATION_XML);return u},e.GetChildren=function(e,t,r){e=e.documentElement||e;for(var n=[],i=0;i<e.childNodes.length;i++){var o=e.childNodes[i];o.nodeType!==a.XmlNodeType.Element||o.localName!==t||o.namespaceURI!==r&&r||n.push(o)}return n},e.prototype.GetChildren=function(t,r){if(!this.element)throw new i.XmlError(i.XE.NULL_PARAM,this.localName);return e.GetChildren(this.element,t,r||this.NamespaceURI||void 0)},e.GetFirstChild=function(e,t,r){e=e.documentElement||e;for(var n=0;n<e.childNodes.length;n++){var i=e.childNodes[n];if(i.nodeType===a.XmlNodeType.Element&&i.localName===t&&(i.namespaceURI===r||!r))return i}return null},e.GetChild=function(e,t,r,n){void 0===n&&(n=!0);for(var o=0;o<e.childNodes.length;o++){var s=e.childNodes[o];if(s.nodeType===a.XmlNodeType.Element&&s.localName===t&&(s.namespaceURI===r||!r))return s}if(n)throw new i.XmlError(i.XE.ELEMENT_MISSING,t,e.localName);return null},e.prototype.GetChild=function(t,r){if(void 0===r&&(r=!0),!this.element)throw new i.XmlError(i.XE.NULL_PARAM,this.localName);return e.GetChild(this.element,t,this.NamespaceURI||void 0,r)},e.prototype.GetFirstChild=function(t,r){if(!this.element)throw new i.XmlError(i.XE.NULL_PARAM,this.localName);return e.GetFirstChild(this.element,t,r)},e}();t.XmlObject=u;var c=r(30)},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}n(r(6)),n(r(7)),n(r(68)),n(r(69)),n(r(42)),n(r(70)),n(r(73)),n(r(119)),n(r(74)),n(r(75)),n(r(16)),n(r(33))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}n(r(120)),n(r(121)),n(r(122)),n(r(123))},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(1),s=r(9),l=r(4),u=r(5),c=r(18),m=r(8),f=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(u.XadesObject);a([i.XmlAttribute({localName:l.XmlXades.AttributeNames.URI,defaultValue:"",required:!0})],f.prototype,"Uri",void 0),a([i.XmlAttribute({localName:l.XmlXades.AttributeNames.ReferencedData,defaultValue:!1})],f.prototype,"ReferencedData",void 0),f=a([i.XmlElement({localName:l.XmlXades.ElementNames.Include})],f),t.Include=f;var h=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(u.XadesObject);a([i.XmlAttribute({localName:l.XmlXades.AttributeNames.URI,defaultValue:""})],h.prototype,"Uri",void 0),a([i.XmlAttribute({localName:l.XmlXades.AttributeNames.Id,defaultValue:""})],h.prototype,"Id",void 0),a([i.XmlChildElement({localName:s.XmlSignature.ElementNames.DigestMethod,namespaceURI:s.XmlSignature.NamespaceURI,prefix:s.XmlSignature.DefaultPrefix,required:!0})],h.prototype,"DigestMethod",void 0),a([i.XmlChildElement({localName:s.XmlSignature.ElementNames.DigestMethod,namespaceURI:s.XmlSignature.NamespaceURI,prefix:s.XmlSignature.DefaultPrefix,converter:o.XmlBase64Converter,required:!0})],h.prototype,"DigestValue",void 0),h=a([i.XmlElement({localName:l.XmlXades.ElementNames.ReferenceInfo})],h),t.ReferenceInfo=h;var p=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(u.XadesCollection);p=a([i.XmlElement({localName:"ReferenceInfos",parser:h})],p),t.ReferenceInfos=p;var d=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(c.EncapsulatedPKIData);d=a([i.XmlElement({localName:l.XmlXades.ElementNames.EncapsulatedTimeStamp})],d),t.EncapsulatedTimeStamp=d;var v=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(u.XadesCollection);v=a([i.XmlElement({localName:"EncapsulatedPKIDatas",parser:d})],v),t.EncapsulatedTimeStampCollection=v;var y=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(m.Any);y=a([i.XmlElement({localName:l.XmlXades.ElementNames.XMLTimeStamp})],y),t.XMLTimeStamp=y;var g=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(u.XadesCollection);g=a([i.XmlElement({localName:"XMLTimeStampCollection",parser:y})],g),t.XMLTimeStampCollection=g;var b=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(u.XadesObject);a([i.XmlAttribute({localName:l.XmlXades.AttributeNames.Id,defaultValue:""})],b.prototype,"Id",void 0),a([i.XmlChildElement({parser:f})],b.prototype,"Include",void 0),a([i.XmlChildElement({parser:p,noRoot:!0})],b.prototype,"ReferenceInfo",void 0),a([i.XmlChildElement({parser:s.CanonicalizationMethod})],b.prototype,"CanonicalizationMethod",void 0),a([i.XmlChildElement({parser:v,noRoot:!0})],b.prototype,"EncapsulatedTimeStamp",void 0),a([i.XmlChildElement({parser:g,noRoot:!0})],b.prototype,"XMLTimeStamp",void 0),b=a([i.XmlElement({localName:"GenericTimeStamp"})],b),t.GenericTimeStamp=b},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(9),s=r(4),l=r(5),u=r(34),c=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.XadesObject);a([i.XmlAttribute({localName:s.XmlXades.AttributeNames.Id,defaultValue:""})],c.prototype,"Id",void 0),a([i.XmlChildElement({parser:u.Include})],c.prototype,"Include",void 0),a([i.XmlChildElement({parser:o.CanonicalizationMethod})],c.prototype,"CanonicalizationMethod",void 0),a([i.XmlChildElement({parser:u.EncapsulatedTimeStampCollection,noRoot:!0})],c.prototype,"EncapsulatedTimeStamp",void 0),a([i.XmlChildElement({parser:u.XMLTimeStampCollection,noRoot:!0})],c.prototype,"XMLTimeStamp",void 0),c=a([i.XmlElement({localName:s.XmlXades.ElementNames.XAdESTimeStamp})],c),t.XAdESTimeStamp=c},function(e,t,r){function n(e){return r(a(e))}function a(e){return i[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var i={"./collection":20,"./collection.js":20,"./const":27,"./const.js":27,"./convert":28,"./convert.js":28,"./converters":37,"./converters.js":37,"./decorators":38,"./decorators.js":38,"./error":13,"./error.js":13,"./index":1,"./index.js":1,"./namespace_manager":39,"./namespace_manager.js":39,"./utils":29,"./utils.js":29,"./xml":11,"./xml.js":11,"./xml_collection":30,"./xml_collection.js":30,"./xml_object":31,"./xml_object.js":31};n.keys=function(){return Object.keys(i)},n.resolve=a,e.exports=n,n.id=36},function(e,t,r){"use strict";var n=r(28);t.XmlBase64Converter={get:function(e){if(e)return n.Convert.ToBase64(e)},set:function(e){return n.Convert.FromBase64(e)}},t.XmlNumberConverter={get:function(e){return e?e.toString():"0"},set:function(e){return Number(e)}},t.XmlBooleanConverter={get:function(e){return e?e.toString():"false"},set:function(e){return!(!e||"true"!==e.toLowerCase())}}},function(e,t,r){"use strict";function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=arguments[0],a=1;a<arguments.length;a++){var i=arguments[a];for(var o in i)n[o]=i[o]}return n}function a(e){return function(t){var r=t;r.localName=e.localName||r.name,r.namespaceURI=e.namespaceURI||r.namespaceURI||null,r.prefix=e.prefix||r.prefix||null,r.parser=e.parser||r.parser,r.target!==r&&(r.items=n({},r.items)),r.target=t}}function i(e){return void 0===e&&(e={}),function(t,r){var a=t.constructor,i=r;a.items||(a.items={}),a.target!==a&&(a.items=n({},a.items)),a.target=t,e.parser?a.items[i]={parser:e.parser,required:e.required||!1,maxOccurs:e.maxOccurs||c,minOccurs:void 0===e.minOccurs?0:e.minOccurs,noRoot:e.noRoot||!1}:a.items[i]={namespaceURI:e.namespaceURI||null,required:e.required||!1,prefix:e.prefix||null,defaultValue:e.defaultValue,converter:e.converter},e.localName=e.localName||e.parser&&e.parser.localName||i,a.items[i].namespaceURI=e.namespaceURI||e.parser&&e.parser.namespaceURI||null,a.items[i].prefix=e.prefix||e.parser&&e.parser.prefix||null,a.items[i].localName=e.localName,a.items[i].type=u.ELEMENT,l(t,i,e)}}function o(e){return void 0===e&&(e={required:!1,namespaceURI:null}),function(t,r){var a=t.constructor,i=r;e.localName||(e.localName=r),a.items||(a.items={}),a.target!==a&&(a.items=n({},a.items)),a.target=t,a.items[r]=e,a.items[r].type=u.ATTRIBUTE,l(t,i,e)}}function s(e){return void 0===e&&(e={required:!1}),function(t,r){var a=t.constructor,i=r;a.items||(a.items={}),a.target!==a&&(a.items=n({},a.items)),a.target=t,a.items[r]=e,a.items[r].type=u.CONTENT,l(t,i,e)}}function l(e,t,r){var n="_"+t,a={set:function(e){this[n]!==e&&(this.element=null,this[n]=e)},get:function(){if(void 0===this[n]){var e=r.defaultValue;r.parser&&(e=new r.parser,e.localName=r.localName),this[n]=e}return this[n]}};Object.defineProperty(e,n,{writable:!0,enumerable:!1}),Object.defineProperty(e,t,a)}var u=r(27),c=1e9;t.XmlElement=a,t.XmlChildElement=i,t.XmlAttribute=o,t.XmlContent=s},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=r(20),i=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.Add=function(t){t.prefix=t.prefix||"",t.namespace=t.namespace||"",e.prototype.Add.call(this,t)},t.prototype.GetPrefix=function(e,t){void 0===t&&(t=this.Count-1);var r=this.Count-1;e=e||"",t>r&&(t=r);for(var n=t;n>=0;n--){var a=this.items[n];if(a.prefix===e)return a}return null},t.prototype.GetNamespace=function(e,t){void 0===t&&(t=this.Count-1);var r=this.Count-1;e=e||"",t>r&&(t=r);for(var n=t;n>=0;n--){var a=this.items[n];if(a.namespace===e)return a}return null},t}(a.Collection);t.NamespaceManager=i},function(e,t,r){"use strict";function n(e,t){return e==t?0:e?t?e.prefix?t.prefix?e.prefix.localeCompare(t.prefix):1:-1:1:-1}function a(e,t){if(!e.namespaceURI&&t.namespaceURI)return-1;if(!t.namespaceURI&&e.namespaceURI)return 1;var r=e.namespaceURI+e.localName,n=t.namespaceURI+t.localName;return r===n?0:r<n?-1:1}function i(e,t,r){void 0===r&&(r=0);var n=t||null;if(e.prefix===n)return++r;if(e.attributes)for(var a=0;a<e.attributes.length;a++){var s=e.attributes[a];if(!o(s)&&t&&e.attributes[a].prefix===t)return++r}for(var u=e.firstChild;u;u=u.nextSibling)if(u.nodeType===l.XmlNodeType.Element){var c=u,m=i(c,t,r);if(u.nodeType===l.XmlNodeType.Element&&m)return++r+m}return r}function o(e){var t=/xmlns:/;return!(null===e||e.nodeType!==l.XmlNodeType.Attribute||"xmlns"!==e.nodeName&&!t.test(e.nodeName))}var s,l=r(1);!function(e){e[e.BeforeDocElement=0]="BeforeDocElement",e[e.InsideDocElement=1]="InsideDocElement",e[e.AfterDocElement=2]="AfterDocElement"}(s=t.XmlCanonicalizerState||(t.XmlCanonicalizerState={}));var u=function(){function e(e,t,r){void 0===r&&(r=new l.NamespaceManager),this.propagatedNamespaces=new l.NamespaceManager,this.result=[],this.visibleNamespaces=new l.NamespaceManager,this.inclusiveNamespacesPrefixList=[],this.state=s.BeforeDocElement,this.withComments=e,this.exclusive=t,this.propagatedNamespaces=r}return Object.defineProperty(e.prototype,"InclusiveNamespacesPrefixList",{get:function(){return this.inclusiveNamespacesPrefixList.join(" ")},set:function(e){this.inclusiveNamespacesPrefixList=e.split(" ")},enumerable:!0,configurable:!0}),e.prototype.Canonicalize=function(e){if(!e)throw new l.XmlError(l.XE.CRYPTOGRAPHIC,"Parameter 1 is not Node");var t;e.nodeType===l.XmlNodeType.Document?(this.document=e,t=this.document.documentElement):(this.document=e.ownerDocument,t=e),this.WriteNode(t);var r=this.result.join("");return r},e.prototype.WriteNode=function(e){switch(e.nodeType){case l.XmlNodeType.Document:case l.XmlNodeType.DocumentFragment:this.WriteDocumentNode(e);break;case l.XmlNodeType.Element:this.WriteElementNode(e);break;case l.XmlNodeType.CDATA:case l.XmlNodeType.SignificantWhitespace:case l.XmlNodeType.Text:this.WriteTextNode(e);break;case l.XmlNodeType.Whitespace:this.state===s.InsideDocElement&&this.WriteTextNode(e);break;case l.XmlNodeType.Comment:this.WriteCommentNode(e);break;case l.XmlNodeType.ProcessingInstruction:this.WriteProcessingInstructionNode(e);break;case l.XmlNodeType.EntityReference:for(var t=0;t<e.childNodes.length;t++)this.WriteNode(e.childNodes[t]);break;case l.XmlNodeType.Attribute:throw new l.XmlError(l.XE.CRYPTOGRAPHIC,"Attribute node is impossible here");case l.XmlNodeType.EndElement:throw new l.XmlError(l.XE.CRYPTOGRAPHIC,"Attribute node is impossible here");case l.XmlNodeType.EndEntity:throw new l.XmlError(l.XE.CRYPTOGRAPHIC,"Attribute node is impossible here");case l.XmlNodeType.DocumentType:case l.XmlNodeType.Entity:case l.XmlNodeType.Notation:case l.XmlNodeType.XmlDeclaration:}},e.prototype.WriteDocumentNode=function(e){this.state=s.BeforeDocElement;for(var t=e.firstChild;null!=t;t=t.nextSibling)this.WriteNode(t)},e.prototype.WriteTextNode=function(e){this.result.push(this.NormalizeString(e.nodeValue,e.nodeType))},e.prototype.WriteCommentNode=function(e){this.withComments&&(this.state===s.AfterDocElement?this.result.push(String.fromCharCode(10)+"<!--"):this.result.push("<!--"),this.result.push(this.NormalizeString(e.nodeValue,l.XmlNodeType.Comment)),this.state===s.BeforeDocElement?this.result.push("-->"+String.fromCharCode(10)):this.result.push("-->"))},e.prototype.WriteProcessingInstructionNode=function(e){this.state===s.AfterDocElement?this.result.push("\n<?"):this.result.push("<?"),this.result.push(e.nodeName),e.nodeValue&&(this.result.push(" "),this.result.push(this.NormalizeString(e.nodeValue,l.XmlNodeType.ProcessingInstruction))),this.state===s.BeforeDocElement?this.result.push("?>\n"):this.result.push("?>")},e.prototype.WriteElementNode=function(e){this.state===s.BeforeDocElement&&(this.state=s.InsideDocElement),this.result.push("<"),this.result.push(e.nodeName);var t=this.WriteNamespacesAxis(e);this.WriteAttributesAxis(e),this.result.push(">");for(var r=e.firstChild;null!=r;r=r.nextSibling)this.WriteNode(r);for(this.result.push("</"),this.result.push(e.nodeName),this.result.push(">"),this.state===s.BeforeDocElement&&(this.state=s.AfterDocElement);t--;)this.visibleNamespaces.Pop()},e.prototype.WriteNamespacesAxis=function(e){for(var t=[],r=0,a=0;a<e.attributes.length;a++){var s=e.attributes[a];if(o(s)){if("xmlns"===s.localName&&!s.prefix&&!s.nodeValue){var l={prefix:s.prefix,namespace:s.nodeValue};t.push(l),this.visibleNamespaces.Add(l),r++}var u=null,c=void 0;(c=/xmlns:(\w+)/.exec(s.nodeName))&&(u=c[1]);var m=!0;if(this.exclusive&&!this.IsNamespaceInclusive(e,u)){var f=i(e,u);if(f>1)m=!1;else if(0===f)continue}if(!this.IsNamespaceRendered(u,s.nodeValue)&&m){var l={prefix:u,namespace:s.nodeValue};t.push(l),this.visibleNamespaces.Add(l),r++}}else if(s.prefix&&!this.IsNamespaceRendered(s.prefix,s.namespaceURI)){var l={prefix:s.prefix,namespace:s.namespaceURI};t.push(l),this.visibleNamespaces.Add(l),r++}}if(!this.IsNamespaceRendered(e.prefix,e.namespaceURI)&&"http://www.w3.org/2000/xmlns/"!==e.namespaceURI){var l={prefix:e.prefix,namespace:e.namespaceURI};t.push(l),this.visibleNamespaces.Add(l),r++}t.sort(n);for(var h=null,p=0,d=t;p<d.length;p++){var v=d[p];v.prefix!==h&&(h=v.prefix,this.result.push(" xmlns"),v.prefix&&this.result.push(":"+v.prefix),this.result.push('="'),this.result.push(v.namespace),this.result.push('"'))}return r},e.prototype.WriteAttributesAxis=function(e){for(var t=[],r=0;r<e.attributes.length;r++){var n=e.attributes[r];o(n)||t.push(n)}t.sort(a);for(var i=0,s=t;i<s.length;i++){var n=s[i];null!=n&&(this.result.push(" "),this.result.push(n.nodeName),this.result.push('="'),this.result.push(this.NormalizeString(n.nodeValue,l.XmlNodeType.Attribute)),this.result.push('"'))}},e.prototype.NormalizeString=function(e,t){var r=[];if(e)for(var n=0;n<e.length;n++){var a=e[n];"<"!==a||t!==l.XmlNodeType.Attribute&&!this.IsTextNode(t)?">"===a&&this.IsTextNode(t)?r.push("&gt;"):"&"!==a||t!==l.XmlNodeType.Attribute&&!this.IsTextNode(t)?'"'===a&&t===l.XmlNodeType.Attribute?r.push("&quot;"):"\t"===a&&t===l.XmlNodeType.Attribute?r.push("&#x9;"):"\n"===a&&t===l.XmlNodeType.Attribute?r.push("&#xA;"):"\r"===a?r.push("&#xD;"):r.push(a):r.push("&amp;"):r.push("&lt;")}return r.join("")},e.prototype.IsTextNode=function(e){switch(e){case l.XmlNodeType.Text:case l.XmlNodeType.CDATA:case l.XmlNodeType.SignificantWhitespace:case l.XmlNodeType.Whitespace:return!0}return!1},e.prototype.IsNamespaceInclusive=function(e,t){var r=t||null;return e.prefix!==r&&this.inclusiveNamespacesPrefixList.indexOf(r||"")!==-1},e.prototype.IsNamespaceRendered=function(e,t){if(e=e||"",t=t||"",!e&&!t)return!0;if("xml"===e&&"http://www.w3.org/XML/1998/namespace"===t)return!0;var r=this.visibleNamespaces.GetPrefix(e);return!!r&&r.namespace===t},e}();t.XmlCanonicalizer=u},function(e,t,r){"use strict";var n=r(1),a=r(1),i=r(12),o=r(22),s=r(32),l=r(33),u={};u[o.RSA_PKCS1_SHA1_NAMESPACE]=o.RsaPkcs1Sha1,u[o.RSA_PKCS1_SHA256_NAMESPACE]=o.RsaPkcs1Sha256,u[o.RSA_PKCS1_SHA384_NAMESPACE]=o.RsaPkcs1Sha384,u[o.RSA_PKCS1_SHA512_NAMESPACE]=o.RsaPkcs1Sha512,u[o.ECDSA_SHA1_NAMESPACE]=o.EcdsaSha1,u[o.ECDSA_SHA256_NAMESPACE]=o.EcdsaSha256,u[o.ECDSA_SHA384_NAMESPACE]=o.EcdsaSha384,u[o.ECDSA_SHA512_NAMESPACE]=o.EcdsaSha512,u[o.HMAC_SHA1_NAMESPACE]=o.HmacSha1,u[o.HMAC_SHA256_NAMESPACE]=o.HmacSha256,u[o.HMAC_SHA384_NAMESPACE]=o.HmacSha384,u[o.HMAC_SHA512_NAMESPACE]=o.HmacSha512;var c={};c[o.SHA1_NAMESPACE]=o.Sha1,c[o.SHA256_NAMESPACE]=o.Sha256,c[o.SHA384_NAMESPACE]=o.Sha384,c[o.SHA512_NAMESPACE]=o.Sha512;var m=function(){function e(){}return e.CreateFromName=function(e){var t;switch(e){case s.XmlSignature.AlgorithmNamespaces.XmlDsigBase64Transform:t=new l.XmlDsigBase64Transform;break;case s.XmlSignature.AlgorithmNamespaces.XmlDsigC14NTransform:t=new l.XmlDsigC14NTransform;break;case s.XmlSignature.AlgorithmNamespaces.XmlDsigC14NWithCommentsTransform:t=new l.XmlDsigC14NWithCommentsTransform;break;case s.XmlSignature.AlgorithmNamespaces.XmlDsigEnvelopedSignatureTransform:t=new l.XmlDsigEnvelopedSignatureTransform;break;case s.XmlSignature.AlgorithmNamespaces.XmlDsigXPathTransform:throw new n.XmlError(n.XE.ALGORITHM_NOT_SUPPORTED,e);case s.XmlSignature.AlgorithmNamespaces.XmlDsigXsltTransform:throw new n.XmlError(n.XE.ALGORITHM_NOT_SUPPORTED,e);case s.XmlSignature.AlgorithmNamespaces.XmlDsigExcC14NTransform:t=new l.XmlDsigExcC14NTransform;break;case s.XmlSignature.AlgorithmNamespaces.XmlDsigExcC14NWithCommentsTransform:t=new l.XmlDsigExcC14NWithCommentsTransform;break;case s.XmlSignature.AlgorithmNamespaces.XmlDecryptionTransform:throw new n.XmlError(n.XE.ALGORITHM_NOT_SUPPORTED,e);default:throw new n.XmlError(n.XE.ALGORITHM_NOT_SUPPORTED,e)}return t},e.CreateSignatureAlgorithm=function(e){var t=u[e.Algorithm]||null;if(t)return new t;if(e.Algorithm===o.RSA_PSS_WITH_PARAMS_NAMESPACE){var r;if(e.Any.Some(function(e){return e instanceof i.PssAlgorithmParams&&(r=e),!!r}),r)switch(r.DigestMethod.Algorithm){case o.SHA1_NAMESPACE:return new o.RsaPssSha1(r.SaltLength);case o.SHA256_NAMESPACE:return new o.RsaPssSha256(r.SaltLength);case o.SHA384_NAMESPACE:return new o.RsaPssSha384(r.SaltLength);case o.SHA512_NAMESPACE:return new o.RsaPssSha512(r.SaltLength)}throw new n.XmlError(n.XE.CRYPTOGRAPHIC,"Cannot get params for RSA-PSS algoriithm")}throw new Error("signature algorithm '"+e.Algorithm+"' is not supported")},e.CreateHashAlgorithm=function(e){var t=c[e];if(t)return new t;throw new Error("hash algorithm '"+e+"' is not supported")},e.GetHashAlgorithm=function(e){var t="string"==typeof e?{name:e}:e;switch(t.name.toUpperCase()){case o.SHA1:return new o.Sha1;case o.SHA256:return new o.Sha256;case o.SHA384:return new o.Sha384;case o.SHA512:return new o.Sha512;default:throw new a.XmlError(a.XE.ALGORITHM_NOT_SUPPORTED,t.name)}},e.GetSignatureAlgorithm=function(e){"string"==typeof e.hash&&(e.hash={name:e.hash});var t=e.hash.name;if(!t)throw new Error("Signing algorithm doesn't have name for hash");var r;switch(e.name.toUpperCase()){case o.RSA_PKCS1.toUpperCase():switch(t.toUpperCase()){case o.SHA1:r=new o.RsaPkcs1Sha1;break;case o.SHA256:r=new o.RsaPkcs1Sha256;break;case o.SHA384:r=new o.RsaPkcs1Sha384;break;case o.SHA512:r=new o.RsaPkcs1Sha512;break;default:throw new a.XmlError(a.XE.ALGORITHM_NOT_SUPPORTED,e.name+":"+t)}break;case o.RSA_PSS.toUpperCase():var n=e.saltLength;switch(t.toUpperCase()){case o.SHA1:r=new o.RsaPssSha1(n);break;case o.SHA256:r=new o.RsaPssSha256(n);break;case o.SHA384:r=new o.RsaPssSha384(n);break;case o.SHA512:r=new o.RsaPssSha512(n);break;default:throw new a.XmlError(a.XE.ALGORITHM_NOT_SUPPORTED,e.name+":"+t)}break;case o.ECDSA:switch(t.toUpperCase()){case o.SHA1:r=new o.EcdsaSha1;break;case o.SHA256:r=new o.EcdsaSha256;break;case o.SHA384:r=new o.EcdsaSha384;break;case o.SHA512:r=new o.EcdsaSha512;break;default:throw new a.XmlError(a.XE.ALGORITHM_NOT_SUPPORTED,e.name+":"+t)}break;case o.HMAC:switch(t.toUpperCase()){case o.SHA1:r=new o.HmacSha1;break;case o.SHA256:r=new o.HmacSha256;break;case o.SHA384:r=new o.HmacSha384;break;case o.SHA512:r=new o.HmacSha512;break;default:throw new a.XmlError(a.XE.ALGORITHM_NOT_SUPPORTED,e.name+":"+t)}break;default:throw new a.XmlError(a.XE.ALGORITHM_NOT_SUPPORTED,e.name)}return r},e}();t.CryptoConfig=m},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(7),s=r(6),l=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(o.XmlSignatureObject);a([i.XmlAttribute({localName:s.XmlSignature.AttributeNames.Algorithm,required:!0,defaultValue:s.XmlSignature.DefaultDigestMethod})],l.prototype,"Algorithm",void 0),l=a([i.XmlElement({localName:s.XmlSignature.ElementNames.DigestMethod})],l),t.DigestMethod=l},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(2),s=n(o),l=r(3),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.type=(0,l.getParametersValue)(t,"type",e.defaultValues("type")),this.values=(0,l.getParametersValue)(t,"values",e.defaultValues("values")),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{type:"type",values:"values"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ATTRIBUTE");this.type=r.result.type.valueBlock.toString(),this.values=r.result.values}},{key:"toSchema",value:function(){return new s.Sequence({value:[new s.ObjectIdentifier({value:this.type}),new s.Set({value:this.values})]})}},{key:"toJSON",value:function(){return{type:this.type,values:Array.from(this.values,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return"";case"values":return[];default:throw new Error("Invalid member name for Attribute class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"type":return""===t;case"values":return 0===t.length;default:throw new Error("Invalid member name for Attribute class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.type||""}),new s.Set({name:t.setName||"",value:[new s.Repeated({name:t.values||"",value:new s.Any})]})]})}}]),e}();t.default=u},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(2),s=n(o),l=r(3),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.x=(0,l.getParametersValue)(t,"x",e.defaultValues("x")),this.y=(0,l.getParametersValue)(t,"y",e.defaultValues("y")),this.namedCurve=(0,l.getParametersValue)(t,"namedCurve",e.defaultValues("namedCurve")),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return i(e,[{key:"fromSchema",value:function(e){if(e instanceof ArrayBuffer==!1)throw new Error("Object's schema was not verified against input data for ECPublicKey");var t=new Uint8Array(e);if(4!==t[0])throw new Error("Object's schema was not verified against input data for ECPublicKey");var r=void 0;switch(this.namedCurve){case"1.2.840.10045.3.1.7":r=32;break;case"1.3.132.0.34":r=48;break;case"1.3.132.0.35":r=66;break;default:throw new Error("Incorrect curve OID: "+this.namedCurve)}if(e.byteLength!==2*r+1)throw new Error("Object's schema was not verified against input data for ECPublicKey");this.x=e.slice(1,r+1),this.y=e.slice(1+r,2*r+1)}},{key:"toSchema",value:function(){return new s.RawData({data:(0,l.utilConcatBuf)(new Uint8Array([4]).buffer,this.x,this.y)})}},{key:"toJSON",value:function(){var e="";switch(this.namedCurve){case"1.2.840.10045.3.1.7":e="P-256";break;case"1.3.132.0.34":e="P-384";break;case"1.3.132.0.35":e="P-521"}return{crv:e,x:(0,l.toBase64)((0,l.arrayBufferToString)(this.x),!0,!0),y:(0,l.toBase64)((0,l.arrayBufferToString)(this.y),!0,!0)}}},{key:"fromJSON",value:function(e){var t=0;if(!("crv"in e))throw new Error('Absent mandatory parameter "crv"');switch(e.crv.toUpperCase()){case"P-256":this.namedCurve="1.2.840.10045.3.1.7",t=32;break;case"P-384":this.namedCurve="1.3.132.0.34",t=48;break;case"P-521":this.namedCurve="1.3.132.0.35",t=66}if(!("x"in e))throw new Error('Absent mandatory parameter "x"');if(this.x=(0,l.stringToArrayBuffer)((0,l.fromBase64)(e.x,!0)).slice(0,t),!("y"in e))throw new Error('Absent mandatory parameter "y"');this.y=(0,l.stringToArrayBuffer)((0,l.fromBase64)(e.y,!0)).slice(0,t)}}],[{key:"defaultValues",value:function(e){switch(e){case"x":case"y":return new ArrayBuffer(0);case"namedCurve":return"";default:throw new Error("Invalid member name for ECCPublicKey class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"x":case"y":return(0,l.isEqualBuffer)(r,e.defaultValues(t));case"namedCurve":return""===r;default:throw new Error("Invalid member name for ECCPublicKey class: "+t)}}},{key:"schema",value:function(){
arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new s.RawData}}]),e}();t.default=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),l=a(s),u=r(3),c=r(104),m=n(c),f=r(101),h=n(f),p=r(77),d=n(p),v=r(80),y=n(v),g=r(92),b=n(g),S=r(89),w=n(S),C=r(93),N=n(C),P=r(81),k=n(P),A=r(83),E=n(A),O=r(98),X=n(O),I=r(79),R=n(I),B=r(95),_=n(B),x=r(87),j=n(x),T=r(91),D=n(T),U=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.extnID=(0,u.getParametersValue)(t,"extnID",e.defaultValues("extnID")),this.critical=(0,u.getParametersValue)(t,"critical",e.defaultValues("critical")),"extnValue"in t?this.extnValue=new l.OctetString({valueHex:t.extnValue}):this.extnValue=e.defaultValues("extnValue"),"parsedValue"in t&&(this.parsedValue=(0,u.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema({names:{extnID:"extnID",critical:"critical",extnValue:"extnValue"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for EXTENSION");if(this.extnID=r.result.extnID.valueBlock.toString(),"critical"in r.result&&(this.critical=r.result.critical.valueBlock.value),this.extnValue=r.result.extnValue,r=l.fromBER(this.extnValue.valueBlock.valueHex),r.offset!==-1)switch(this.extnID){case"2.5.29.9":this.parsedValue=new m.default({schema:r.result});break;case"2.5.29.14":this.parsedValue=r.result;break;case"2.5.29.15":this.parsedValue=r.result;break;case"2.5.29.16":this.parsedValue=new h.default({schema:r.result});break;case"2.5.29.17":case"2.5.29.18":this.parsedValue=new d.default({schema:r.result});break;case"2.5.29.19":this.parsedValue=new y.default({schema:r.result});break;case"2.5.29.20":case"2.5.29.27":this.parsedValue=r.result;break;case"2.5.29.21":this.parsedValue=r.result;break;case"2.5.29.24":this.parsedValue=r.result;break;case"2.5.29.28":this.parsedValue=new b.default({schema:r.result});break;case"2.5.29.29":this.parsedValue=new w.default({schema:r.result});break;case"2.5.29.30":this.parsedValue=new N.default({schema:r.result});break;case"2.5.29.31":case"2.5.29.46":this.parsedValue=new k.default({schema:r.result});break;case"2.5.29.32":this.parsedValue=new E.default({schema:r.result});break;case"2.5.29.33":this.parsedValue=new X.default({schema:r.result});break;case"2.5.29.35":this.parsedValue=new R.default({schema:r.result});break;case"2.5.29.36":this.parsedValue=new _.default({schema:r.result});break;case"2.5.29.37":this.parsedValue=new j.default({schema:r.result});break;case"2.5.29.54":this.parsedValue=r.result;break;case"1.3.6.1.5.5.7.1.1":case"1.3.6.1.5.5.7.1.11":this.parsedValue=new D.default({schema:r.result})}}},{key:"toSchema",value:function(){var t=[];return t.push(new l.ObjectIdentifier({value:this.extnID})),this.critical!==e.defaultValues("critical")&&t.push(new l.Boolean({value:this.critical})),t.push(this.extnValue),new l.Sequence({value:t})}},{key:"toJSON",value:function(){var t={extnID:this.extnID,extnValue:this.extnValue.toJSON()};return this.critical!==e.defaultValues("critical")&&(t.critical=this.critical),"parsedValue"in this&&(t.parsedValue=this.parsedValue.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"extnID":return"";case"critical":return!1;case"extnValue":return new l.OctetString;case"parsedValue":return{};default:throw new Error("Invalid member name for Extension class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new l.Sequence({name:t.blockName||"",value:[new l.ObjectIdentifier({name:t.extnID||""}),new l.Boolean({name:t.critical||"",optional:!0}),new l.OctetString({name:t.extnValue||""})]})}}]),e}();t.default=U},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),l=a(s),u=r(3),c=r(25),m=r(17),f=n(m),h=r(44),p=n(h),d=r(103),v=n(d),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.algorithm=(0,u.getParametersValue)(t,"algorithm",e.defaultValues("algorithm")),this.subjectPublicKey=(0,u.getParametersValue)(t,"subjectPublicKey",e.defaultValues("subjectPublicKey")),"parsedKey"in t&&(this.parsedKey=(0,u.getParametersValue)(t,"parsedKey",e.defaultValues("parsedKey"))),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return o(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema({names:{algorithm:{names:{blockName:"algorithm"}},subjectPublicKey:"subjectPublicKey"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PUBLIC_KEY_INFO");switch(this.algorithm=new f.default({schema:r.result.algorithm}),this.subjectPublicKey=r.result.subjectPublicKey,this.algorithm.algorithmId){case"1.2.840.10045.2.1":"algorithmParams"in this.algorithm&&this.algorithm.algorithmParams instanceof l.ObjectIdentifier&&(this.parsedKey=new p.default({namedCurve:this.algorithm.algorithmParams.valueBlock.toString(),schema:this.subjectPublicKey.valueBlock.valueHex}));break;case"1.2.840.113549.1.1.1":var n=l.fromBER(this.subjectPublicKey.valueBlock.valueHex);n.offset!==-1&&(this.parsedKey=new v.default({schema:n.result}))}}},{key:"toSchema",value:function(){return new l.Sequence({value:[this.algorithm.toSchema(),this.subjectPublicKey]})}},{key:"toJSON",value:function(){if("parsedKey"in this==!1)return{algorithm:this.algorithm.toJSON(),subjectPublicKey:this.subjectPublicKey.toJSON()};var e={};switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA"}var t=this.parsedKey.toJSON(),r=!0,n=!1,a=void 0;try{for(var i,o=Object.keys(t)[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value;e[s]=t[s]}}catch(e){n=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}return e}},{key:"fromJSON",value:function(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new p.default({json:e}),this.algorithm=new f.default({algorithmId:"1.2.840.10045.2.1",algorithmParams:new l.ObjectIdentifier({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new v.default({json:e}),this.algorithm=new f.default({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new l.Null});break;default:throw new Error('Invalid value for "kty" parameter: '+e.kty)}this.subjectPublicKey=new l.BitString({valueHex:this.parsedKey.toSchema().toBER(!1)})}}},{key:"importKey",value:function(e){var t=Promise.resolve(),r=this;if("undefined"==typeof e)return Promise.reject("Need to provide publicKey input parameter");var n=(0,c.getCrypto)();return"undefined"==typeof n?Promise.reject("Unable to create WebCrypto object"):(t=t.then(function(){return n.exportKey("spki",e)}),t=t.then(function(e){var t=l.fromBER(e);try{r.fromSchema(t.result)}catch(e){return Promise.reject("Error during initializing object from schema")}},function(e){return Promise.reject("Error during exporting public key: "+e)}))}}],[{key:"defaultValues",value:function(e){switch(e){case"algorithm":return new f.default;case"subjectPublicKey":return new l.BitString;default:throw new Error("Invalid member name for PublicKeyInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new l.Sequence({name:t.blockName||"",value:[f.default.schema(t.algorithm||{}),new l.BitString({name:t.subjectPublicKey||""})]})}}]),e}();t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),l=a(s),u=r(3),c=r(17),m=n(c),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.hashAlgorithm=(0,u.getParametersValue)(t,"hashAlgorithm",e.defaultValues("hashAlgorithm")),this.maskGenAlgorithm=(0,u.getParametersValue)(t,"maskGenAlgorithm",e.defaultValues("maskGenAlgorithm")),this.saltLength=(0,u.getParametersValue)(t,"saltLength",e.defaultValues("saltLength")),this.trailerField=(0,u.getParametersValue)(t,"trailerField",e.defaultValues("trailerField")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema({names:{hashAlgorithm:{names:{blockName:"hashAlgorithm"}},maskGenAlgorithm:{names:{blockName:"maskGenAlgorithm"}},saltLength:"saltLength",trailerField:"trailerField"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RSASSA_PSS_params");"hashAlgorithm"in r.result&&(this.hashAlgorithm=new m.default({schema:r.result.hashAlgorithm})),"maskGenAlgorithm"in r.result&&(this.maskGenAlgorithm=new m.default({schema:r.result.maskGenAlgorithm})),"saltLength"in r.result&&(this.saltLength=r.result.saltLength.valueBlock.valueDec),"trailerField"in r.result&&(this.trailerField=r.result.trailerField.valueBlock.valueDec)}},{key:"toSchema",value:function(){var t=[];return this.hashAlgorithm.isEqual(e.defaultValues("hashAlgorithm"))||t.push(new l.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(e.defaultValues("maskGenAlgorithm"))||t.push(new l.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.saltLength!==e.defaultValues("saltLength")&&t.push(new l.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[new l.Integer({value:this.saltLength})]})),this.trailerField!==e.defaultValues("trailerField")&&t.push(new l.Constructed({idBlock:{tagClass:3,tagNumber:3},value:[new l.Integer({value:this.trailerField})]})),new l.Sequence({value:t})}},{key:"toJSON",value:function(){var t={};return this.hashAlgorithm.isEqual(e.defaultValues("hashAlgorithm"))||(t.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(e.defaultValues("maskGenAlgorithm"))||(t.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.saltLength!==e.defaultValues("saltLength")&&(t.saltLength=this.saltLength),this.trailerField!==e.defaultValues("trailerField")&&(t.trailerField=this.trailerField),t}}],[{key:"defaultValues",value:function(e){switch(e){case"hashAlgorithm":return new m.default({algorithmId:"1.3.14.3.2.26",algorithmParams:new l.Null});case"maskGenAlgorithm":return new m.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new m.default({algorithmId:"1.3.14.3.2.26",algorithmParams:new l.Null}).toSchema()});case"saltLength":return 20;case"trailerField":return 1;default:throw new Error("Invalid member name for RSASSAPSSParams class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new l.Sequence({name:t.blockName||"",value:[new l.Constructed({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[m.default.schema(t.hashAlgorithm||{})]}),new l.Constructed({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[m.default.schema(t.maskGenAlgorithm||{})]}),new l.Constructed({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[new l.Integer({name:t.saltLength||""})]}),new l.Constructed({idBlock:{tagClass:3,tagNumber:3},optional:!0,value:[new l.Integer({name:t.trailerField||""})]})]})}}]),e}();t.default=f},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(4),s=r(5),l=r(8),u=r(18),c=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.Any);c=a([i.XmlElement({localName:o.XmlXades.ElementNames.OtherCertificate})],c),t.OtherCertificate=c;var m=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesCollection);m=a([i.XmlElement({localName:"OtherCertificateCollection",parser:c})],m),t.OtherCertificateCollection=m;var f=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(u.EncapsulatedPKIData);f=a([i.XmlElement({localName:o.XmlXades.ElementNames.EncapsulatedX509Certificate})],f),t.EncapsulatedX509Certificate=f;var h=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesCollection);h=a([i.XmlElement({localName:"EncapsulatedX509CertificateCollection",parser:f})],h),t.EncapsulatedX509CertificateCollection=h;var p=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesObject);a([i.XmlAttribute({localName:o.XmlXades.AttributeNames.Id,defaultValue:""})],p.prototype,"Id",void 0),a([i.XmlChildElement({parser:h,noRoot:!0})],p.prototype,"EncapsulatedX509Certificates",void 0),a([i.XmlChildElement({parser:m,noRoot:!0})],p.prototype,"OtherCertificates",void 0),p=a([i.XmlElement({localName:o.XmlXades.ElementNames.CertificateValues})],p),t.CertificateValues=p},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(4),s=r(5),l=r(26),u=r(8),c=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(u.Any);c=a([i.XmlElement({localName:o.XmlXades.ElementNames.CommitmentTypeQualifier})],c),t.CommitmentTypeQualifier=c;var m=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesCollection);m=a([i.XmlElement({localName:o.XmlXades.ElementNames.CommitmentTypeQualifiers,parser:c})],m),t.CommitmentTypeQualifiers=m;var f=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesObject);a([i.XmlContent({required:!0})],f.prototype,"Value",void 0),f=a([i.XmlElement({localName:o.XmlXades.ElementNames.ObjectReference})],f),t.ObjectReference=f;var h=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesCollection);h=a([i.XmlElement({localName:"ObjectReferences",parser:f})],h),t.ObjectReferenceCollection=h;var p={set:function(e){return!0},get:function(e){}},d=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesObject);a([i.XmlChildElement({localName:o.XmlXades.ElementNames.CommitmentTypeId,required:!0,namespaceURI:o.XmlXades.NamespaceURI,prefix:o.XmlXades.DefaultPrefix,parser:l.ObjectIdentifier})],d.prototype,"CommitmentTypeId",void 0),a([i.XmlChildElement({parser:h,noRoot:!0})],d.prototype,"ObjectReference",void 0),a([i.XmlChildElement({localName:o.XmlXades.ElementNames.AllSignedDataObjects,namespaceURI:o.XmlXades.NamespaceURI,prefix:o.XmlXades.DefaultPrefix,converter:p,defaultValue:!1})],d.prototype,"AllSignedDataObjects",void 0),a([i.XmlChildElement({localName:o.XmlXades.ElementNames.CommitmentTypeQualifiers,parser:c})],d.prototype,"CommitmentTypeQualifiers",void 0),d=a([i.XmlElement({localName:o.XmlXades.ElementNames.CommitmentTypeIndication})],d),t.CommitmentTypeIndication=d},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(4),s=r(5),l=r(19),u=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesObject);a([i.XmlAttribute({localName:o.XmlXades.AttributeNames.Id,defaultValue:""})],u.prototype,"Id",void 0),a([i.XmlChildElement({localName:o.XmlXades.ElementNames.CertRefs,parser:l.CertIDList,required:!0})],u.prototype,"CertRefs",void 0),u=a([i.XmlElement({localName:o.XmlXades.ElementNames.CompleteCertificateRefs})],u),t.CompleteCertificateRefs=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(1),s=r(4),l=r(5),u=r(19),c=r(52),m=r(8),f=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(m.Any);f=a([i.XmlElement({localName:s.XmlXades.ElementNames.OtherRef})],f),t.OtherRef=f;var h=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.XadesCollection);h=a([i.XmlElement({localName:s.XmlXades.ElementNames.OtherRefs})],h),t.OtherRefs=h;var p=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.XadesObject);a([i.XmlChildElement({localName:s.XmlXades.ElementNames.ByName,namespaceURI:s.XmlXades.NamespaceURI,prefix:s.XmlXades.DefaultPrefix,required:!0})],p.prototype,"ByName",void 0),a([i.XmlChildElement({localName:s.XmlXades.ElementNames.ByKey,namespaceURI:s.XmlXades.NamespaceURI,prefix:s.XmlXades.DefaultPrefix,converter:o.XmlBase64Converter,required:!0})],p.prototype,"ByKey",void 0),p=a([i.XmlElement({localName:s.XmlXades.ElementNames.OCSPIdentifier})],p),t.ResponderID=p;var d=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.XadesObject);a([i.XmlAttribute({localName:s.XmlXades.AttributeNames.URI,defaultValue:""})],d.prototype,"URI",void 0),a([i.XmlChildElement({parser:p,required:!0})],d.prototype,"ResponderID",void 0),a([i.XmlChildElement({localName:s.XmlXades.ElementNames.IssueTime,namespaceURI:s.XmlXades.NamespaceURI,prefix:s.XmlXades.DefaultPrefix,converter:c.XmlDateTimeConverter,required:!0})],d.prototype,"ProducedAt",void 0),d=a([i.XmlElement({localName:s.XmlXades.ElementNames.OCSPIdentifier})],d),t.OCSPIdentifier=d;var v=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.XadesObject);a([i.XmlChildElement({parser:d})],v.prototype,"OCSPIdentifier",void 0),a([i.XmlChildElement({parser:u.DigestAlgAndValueType,required:!0})],v.prototype,"DigestAlgAndValue",void 0),v=a([i.XmlElement({localName:s.XmlXades.ElementNames.OCSPRef})],v),t.OCSPRef=v;var y=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.XadesCollection);y=a([i.XmlElement({localName:s.XmlXades.ElementNames.OCSPRefs})],y),t.OCSPRefs=y;var g=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.XadesObject);a([i.XmlAttribute({localName:s.XmlXades.AttributeNames.URI,defaultValue:""})],g.prototype,"URI",void 0),a([i.XmlChildElement({localName:s.XmlXades.ElementNames.Issuer,namespaceURI:s.XmlXades.NamespaceURI,prefix:s.XmlXades.DefaultPrefix,required:!0})],g.prototype,"Issuer",void 0),a([i.XmlChildElement({localName:s.XmlXades.ElementNames.IssueTime,namespaceURI:s.XmlXades.NamespaceURI,prefix:s.XmlXades.DefaultPrefix,converter:c.XmlDateTimeConverter,required:!0})],g.prototype,"IssueTime",void 0),a([i.XmlChildElement({localName:s.XmlXades.ElementNames.Number,namespaceURI:s.XmlXades.NamespaceURI,prefix:s.XmlXades.DefaultPrefix,converter:o.XmlNumberConverter})],g.prototype,"Number",void 0),g=a([i.XmlElement({localName:s.XmlXades.ElementNames.CRLIdentifier})],g),t.CRLIdentifier=g;var b=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.XadesObject);a([i.XmlChildElement({parser:u.DigestAlgAndValueType,required:!0})],b.prototype,"DigestAlgAndValue",void 0),a([i.XmlChildElement({parser:g})],b.prototype,"CRLIdentifier",void 0),b=a([i.XmlElement({localName:s.XmlXades.ElementNames.CRLRef})],b),t.CRLRef=b;var S=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.XadesCollection);S=a([i.XmlElement({localName:s.XmlXades.ElementNames.CRLRefs})],S),t.CRLRefs=S;var w=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.XadesObject);a([i.XmlAttribute({localName:s.XmlXades.AttributeNames.Id,defaultValue:""})],w.prototype,"Id",void 0),a([i.XmlChildElement({parser:S})],w.prototype,"CRLRefs",void 0),a([i.XmlChildElement({parser:y})],w.prototype,"OCSPRefs",void 0),a([i.XmlChildElement({parser:h})],w.prototype,"OtherRefs",void 0),w=a([i.XmlElement({localName:s.XmlXades.ElementNames.CompleteRevocationRefs})],w),t.CompleteRevocationRefs=w},function(e,t){"use strict";t.XmlDateTimeConverter={set:function(e){return new Date(e)},get:function(e){if(e)return e.toISOString()}}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(9),s=r(4),l=r(5),u=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.XadesObject);a([i.XmlChildElement({parser:o.Signature,required:!0})],u.prototype,"Signature",void 0),u=a([i.XmlElement({localName:s.XmlXades.ElementNames.CounterSignature})],u),t.CounterSignature=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(4),s=r(5),l=r(26),u=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesObject);a([i.XmlAttribute({localName:o.XmlXades.AttributeNames.ObjectReference,required:!0})],u.prototype,"ObjectReference",void 0),a([i.XmlChildElement({localName:o.XmlXades.ElementNames.Description,namespaceURI:o.XmlXades.NamespaceURI,prefix:o.XmlXades.DefaultPrefix})],u.prototype,"Description",void 0),a([i.XmlChildElement({parser:l.ObjectIdentifier})],u.prototype,"ObjectIdentifier",void 0),a([i.XmlChildElement({localName:o.XmlXades.ElementNames.MimeType,namespaceURI:o.XmlXades.NamespaceURI,prefix:o.XmlXades.DefaultPrefix})],u.prototype,"MimeType",void 0),a([i.XmlChildElement({localName:o.XmlXades.ElementNames.Encoding,namespaceURI:o.XmlXades.NamespaceURI,prefix:o.XmlXades.DefaultPrefix})],u.prototype,"Encoding",void 0),u=a([i.XmlElement({localName:o.XmlXades.ElementNames.DataObjectFormat})],u),t.DataObjectFormat=u},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}n(r(8)),n(r(48)),n(r(49)),n(r(50)),n(r(51)),n(r(53)),n(r(54)),n(r(18)),n(r(34)),n(r(26)),n(r(108)),n(r(56)),n(r(109)),n(r(57)),n(r(58)),n(r(59)),n(r(60)),n(r(61)),n(r(62)),n(r(63)),n(r(19)),n(r(64)),n(r(65)),n(r(66)),n(r(35)),n(r(107)),n(r(4))},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(4),s=r(5),l=r(61),u=r(65),c=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesObject);a([i.XmlAttribute({localName:o.XmlXades.AttributeNames.Target,required:!0})],c.prototype,"Target",void 0),a([i.XmlAttribute({localName:o.XmlXades.AttributeNames.Id,defaultValue:""})],c.prototype,"Id",void 0),a([i.XmlChildElement({parser:l.SignedProperties})],c.prototype,"SignedProperties",void 0),a([i.XmlChildElement({parser:u.UnsignedProperties})],c.prototype,"UnsignedProperties",void 0),c=a([i.XmlElement({localName:o.XmlXades.ElementNames.QualifyingProperties})],c),t.QualifyingProperties=c},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(4),s=r(5),l=r(18),u=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.EncapsulatedPKIData);u=a([i.XmlElement({localName:o.XmlXades.ElementNames.OtherValue})],u),t.OtherValue=u;var c=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesCollection);c=a([i.XmlElement({localName:o.XmlXades.ElementNames.OCSPValues,parser:u})],c),t.OtherValues=c;var m=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.EncapsulatedPKIData);m=a([i.XmlElement({localName:o.XmlXades.ElementNames.EncapsulatedOCSPValue})],m),t.EncapsulatedOCSPValue=m;var f=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesCollection);f=a([i.XmlElement({localName:o.XmlXades.ElementNames.OCSPValues})],f),t.OCSPValues=f;var h=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.EncapsulatedPKIData);h=a([i.XmlElement({localName:o.XmlXades.ElementNames.EncapsulatedCRLValue})],h),t.EncapsulatedCRLValue=h;var p=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesCollection);p=a([i.XmlElement({localName:o.XmlXades.ElementNames.CRLValues,parser:h})],p),t.CRLValues=p;var d=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesObject);a([i.XmlAttribute({localName:o.XmlXades.AttributeNames.Id,defaultValue:""})],d.prototype,"Id",void 0),a([i.XmlChildElement({parser:p})],d.prototype,"CRLValues",void 0),a([i.XmlChildElement({parser:f})],d.prototype,"OCSPValues",void 0),a([i.XmlChildElement({parser:c})],d.prototype,"OtherValues",void 0),d=a([i.XmlElement({localName:o.XmlXades.ElementNames.RevocationValues})],d),t.RevocationValues=d},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(1),s=r(9),l=r(4),u=r(5),c=r(8),m=r(26),f=r(19),h=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(u.XadesObject);a([i.XmlContent({converter:o.XmlNumberConverter,required:!0})],h.prototype,"Value",void 0),h=a([i.XmlElement({localName:"int"})],h),t.Integer=h;var p=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(u.XadesCollection);p=a([i.XmlElement({localName:"IntegerList",parser:h})],p),t.IntegerList=p;var d=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(u.XadesObject);a([i.XmlChildElement({localName:l.XmlXades.ElementNames.Organization,namespaceURI:l.XmlXades.NamespaceURI,prefix:l.XmlXades.DefaultPrefix,required:!0})],d.prototype,"Organization",void 0),a([i.XmlChildElement({localName:l.XmlXades.ElementNames.NoticeNumbers,parser:p,required:!0})],d.prototype,"NoticeNumbers",void 0),d=a([i.XmlElement({localName:l.XmlXades.ElementNames.NoticeRef})],d),t.NoticeReference=d;var v=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(u.XadesObject);a([i.XmlChildElement({localName:l.XmlXades.ElementNames.NoticeRef,parser:d})],v.prototype,"NoticeRef",void 0),a([i.XmlChildElement({localName:l.XmlXades.ElementNames.ExplicitText,namespaceURI:l.XmlXades.NamespaceURI,prefix:l.XmlXades.DefaultPrefix})],v.prototype,"ExplicitText",void 0),v=a([i.XmlElement({localName:l.XmlXades.ElementNames.SPUserNotice})],v),t.SPUserNotice=v;var y=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(c.Any);y=a([i.XmlElement({localName:l.XmlXades.ElementNames.SigPolicyQualifier})],y),t.SigPolicyQualifier=y;var g=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(u.XadesCollection);g=a([i.XmlElement({localName:l.XmlXades.ElementNames.SigPolicyQualifiers,parser:y})],g),t.SigPolicyQualifiers=g;var b=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(u.XadesObject);a([i.XmlChildElement({localName:l.XmlXades.ElementNames.SigPolicyId,parser:m.ObjectIdentifier,required:!0})],b.prototype,"SigPolicyId",void 0),a([i.XmlChildElement({
parser:s.Transforms})],b.prototype,"Transforms",void 0),a([i.XmlChildElement({localName:l.XmlXades.ElementNames.SigPolicyHash,parser:f.DigestAlgAndValueType,required:!0})],b.prototype,"SigPolicyHash",void 0),a([i.XmlChildElement({localName:l.XmlXades.ElementNames.SigPolicyQualifiers,parser:g})],b.prototype,"SigPolicyQualifiers",void 0),b=a([i.XmlElement({localName:l.XmlXades.ElementNames.SignaturePolicyId})],b),t.SignaturePolicyId=b;var S={set:function(e){return!0},get:function(e){return""}},w=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(u.XadesObject);a([i.XmlChildElement({localName:l.XmlXades.ElementNames.SignaturePolicyId,namespaceURI:l.XmlXades.NamespaceURI,prefix:l.XmlXades.DefaultPrefix,parser:b})],w.prototype,"SignaturePolicyId",void 0),a([i.XmlChildElement({localName:l.XmlXades.ElementNames.SignaturePolicyImplied,namespaceURI:l.XmlXades.NamespaceURI,prefix:l.XmlXades.DefaultPrefix,converter:S,defaultValue:!1})],w.prototype,"SignaturePolicyImplied",void 0),w=a([i.XmlElement({localName:l.XmlXades.ElementNames.SignaturePolicyIdentifier})],w),t.SignaturePolicyIdentifier=w},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(4),s=r(5),l=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesObject);a([i.XmlChildElement({localName:o.XmlXades.ElementNames.City,defaultValue:"",namespaceURI:o.XmlXades.NamespaceURI,prefix:o.XmlXades.DefaultPrefix})],l.prototype,"City",void 0),a([i.XmlChildElement({localName:o.XmlXades.ElementNames.StateOrProvince,defaultValue:"",namespaceURI:o.XmlXades.NamespaceURI,prefix:o.XmlXades.DefaultPrefix})],l.prototype,"StateOrProvince",void 0),a([i.XmlChildElement({localName:o.XmlXades.ElementNames.PostalCode,defaultValue:"",namespaceURI:o.XmlXades.NamespaceURI,prefix:o.XmlXades.DefaultPrefix})],l.prototype,"PostalCode",void 0),a([i.XmlChildElement({localName:o.XmlXades.ElementNames.CountryName,defaultValue:"",namespaceURI:o.XmlXades.NamespaceURI,prefix:o.XmlXades.DefaultPrefix})],l.prototype,"CountryName",void 0),l=a([i.XmlElement({localName:o.XmlXades.ElementNames.SignatureProductionPlace})],l),t.SignatureProductionPlace=l},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(4),s=r(5),l=r(35),u=r(54),c=r(49),m=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.XAdESTimeStamp);m=a([i.XmlElement({localName:o.XmlXades.ElementNames.IndividualDataObjectsTimeStamp})],m),t.IndividualDataObjectsTimeStamp=m;var f=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesCollection);f=a([i.XmlElement({localName:"IndividualDataObjectsTimeStampCollection",parser:m})],f),t.IndividualDataObjectsTimeStampCollection=f;var h=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.XAdESTimeStamp);h=a([i.XmlElement({localName:o.XmlXades.ElementNames.AllDataObjectsTimeStamp})],h),t.AllDataObjectsTimeStamp=h;var p=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesCollection);p=a([i.XmlElement({localName:"DataObjectFormatCollection",parser:u.DataObjectFormat})],p),t.DataObjectFormatCollection=p;var d=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesCollection);d=a([i.XmlElement({localName:"CommitmentTypeIndicationCollection",parser:c.CommitmentTypeIndication})],d),t.CommitmentTypeIndicationCollection=d;var v=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesCollection);v=a([i.XmlElement({localName:"AllDataObjectsTimeStampCollection",parser:h})],v),t.AllDataObjectsTimeStampCollection=v;var y=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesObject);a([i.XmlAttribute({localName:o.XmlXades.AttributeNames.Id,defaultValue:""})],y.prototype,"Id",void 0),a([i.XmlChildElement({parser:p,noRoot:!0})],y.prototype,"DataObjectFormats",void 0),a([i.XmlChildElement({parser:d,noRoot:!0})],y.prototype,"CommitmentTypeIndications",void 0),a([i.XmlChildElement({parser:v,noRoot:!0})],y.prototype,"AllDataObjectsTimeStamps",void 0),a([i.XmlChildElement({parser:f,noRoot:!0})],y.prototype,"IndividualDataObjectsTimeStamps",void 0),y=a([i.XmlElement({localName:o.XmlXades.ElementNames.SignedDataObjectProperties})],y),t.SignedDataObjectProperties=y},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(4),s=r(5),l=r(62),u=r(60),c=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesObject);a([i.XmlAttribute({localName:o.XmlXades.AttributeNames.Id,defaultValue:""})],c.prototype,"Id",void 0),a([i.XmlChildElement({parser:l.SignedSignatureProperties})],c.prototype,"SignedSignatureProperties",void 0),a([i.XmlChildElement({parser:u.SignedDataObjectProperties})],c.prototype,"SignedDataObjectProperties",void 0),c=a([i.XmlElement({localName:o.XmlXades.ElementNames.SignedProperties})],c),t.SignedProperties=c},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(4),s=r(5),l=r(52),u=r(19),c=r(58),m=r(59),f=r(63),h=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesObject);a([i.XmlAttribute({localName:o.XmlXades.AttributeNames.Id,defaultValue:""})],h.prototype,"Id",void 0),a([i.XmlChildElement({localName:o.XmlXades.ElementNames.SigningTime,namespaceURI:o.XmlXades.NamespaceURI,prefix:o.XmlXades.DefaultPrefix,converter:l.XmlDateTimeConverter})],h.prototype,"SigningTime",void 0),a([i.XmlChildElement({parser:u.SigningCertificate})],h.prototype,"SigningCertificate",void 0),a([i.XmlChildElement({parser:c.SignaturePolicyIdentifier})],h.prototype,"SignaturePolicyIdentifier",void 0),a([i.XmlChildElement({parser:m.SignatureProductionPlace})],h.prototype,"SignatureProductionPlace",void 0),a([i.XmlChildElement({parser:f.SignerRole})],h.prototype,"SignerRole",void 0),h=a([i.XmlElement({localName:o.XmlXades.ElementNames.SignedSignatureProperties})],h),t.SignedSignatureProperties=h},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(4),s=r(5),l=r(18),u=r(8),c=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(u.Any);c=a([i.XmlElement({localName:o.XmlXades.ElementNames.ClaimedRole})],c),t.ClaimedRole=c;var m=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesCollection);m=a([i.XmlElement({localName:o.XmlXades.ElementNames.ClaimedRoles,parser:c})],m),t.ClaimedRoles=m;var f=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.EncapsulatedPKIData);f=a([i.XmlElement({localName:o.XmlXades.ElementNames.CertifiedRole})],f),t.CertifiedRole=f;var h=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesCollection);h=a([i.XmlElement({localName:o.XmlXades.ElementNames.CertifiedRoles,parser:f})],h),t.CertifiedRoles=h;var p=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesObject);a([i.XmlChildElement({parser:m})],p.prototype,"ClaimedRoles",void 0),a([i.XmlChildElement({parser:h})],p.prototype,"CertifiedRoles",void 0),p=a([i.XmlElement({localName:o.XmlXades.ElementNames.SignerRole})],p),t.SignerRole=p},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(4),s=r(5),l=r(8),u=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.Any);u=a([i.XmlElement({localName:o.XmlXades.ElementNames.UnsignedDataObjectProperty})],u),t.UnsignedDataObjectProperty=u;var c=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesCollection);a([i.XmlAttribute({localName:o.XmlXades.AttributeNames.Id,defaultValue:""})],c.prototype,"Id",void 0),c=a([i.XmlElement({localName:o.XmlXades.ElementNames.UnsignedSignatureProperties,parser:u})],c),t.UnsignedDataObjectProperties=c},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(4),s=r(5),l=r(66),u=r(64),c=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesObject);a([i.XmlAttribute({localName:o.XmlXades.AttributeNames.Id,defaultValue:""})],c.prototype,"Id",void 0),a([i.XmlChildElement({parser:l.UnsignedSignatureProperties})],c.prototype,"UnsignedSignatureProperties",void 0),a([i.XmlChildElement({parser:u.UnsignedDataObjectProperties})],c.prototype,"UnsignedDataObjectProperties",void 0),c=a([i.XmlElement({localName:o.XmlXades.ElementNames.UnsignedProperties})],c),t.UnsignedProperties=c},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(4),s=r(5),l=r(35),u=r(50),c=r(51),m=r(53),f=r(48),h=r(57),p=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.XAdESTimeStamp);p=a([i.XmlElement({localName:o.XmlXades.ElementNames.SignatureTimeStamp})],p),t.SignatureTimeStamp=p;var d=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.XAdESTimeStamp);d=a([i.XmlElement({localName:o.XmlXades.ElementNames.SigAndRefsTimeStamp})],d),t.SigAndRefsTimeStamp=d;var v=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.XAdESTimeStamp);v=a([i.XmlElement({localName:o.XmlXades.ElementNames.RefsOnlyTimeStamp})],v),t.RefsOnlyTimeStamp=v;var y=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.XAdESTimeStamp);y=a([i.XmlElement({localName:o.XmlXades.ElementNames.ArchiveTimeStamp})],y),t.ArchiveTimeStamp=y;var g=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(u.CompleteCertificateRefs);g=a([i.XmlElement({localName:o.XmlXades.ElementNames.AttributeCertificateRefs})],g),t.AttributeCertificateRefs=g;var b=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(c.CompleteRevocationRefs);b=a([i.XmlElement({localName:o.XmlXades.ElementNames.AttributeRevocationRefs})],b),t.AttributeRevocationRefs=b;var S=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(f.CertificateValues);S=a([i.XmlElement({localName:o.XmlXades.ElementNames.AttrAuthoritiesCertValues})],S),t.AttrAuthoritiesCertValues=S;var w=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(h.RevocationValues);w=a([i.XmlElement({localName:o.XmlXades.ElementNames.AttributeRevocationValues})],w),t.AttributeRevocationValues=w;var C=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesObject);C=a([i.XmlElement({localName:"UnsignedSignatureProperty"})],C),t.UnsignedSignatureProperty=C;var N=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.OnLoadXml=function(e){for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes.item(t);if(r.nodeType===i.XmlNodeType.Element){var n=void 0;switch(r.localName){case o.XmlXades.ElementNames.CounterSignature:n=m.CounterSignature;break;case o.XmlXades.ElementNames.SignatureTimeStamp:n=p;break;case o.XmlXades.ElementNames.CompleteCertificateRefs:n=u.CompleteCertificateRefs;break;case o.XmlXades.ElementNames.CompleteRevocationRefs:n=c.CompleteRevocationRefs;break;case o.XmlXades.ElementNames.AttributeCertificateRefs:n=g;break;case o.XmlXades.ElementNames.AttributeRevocationRefs:n=b;break;case o.XmlXades.ElementNames.SigAndRefsTimeStamp:n=d;break;case o.XmlXades.ElementNames.RefsOnlyTimeStamp:n=v;break;case o.XmlXades.ElementNames.CertificateValues:n=f.CertificateValues;break;case o.XmlXades.ElementNames.RevocationValues:n=h.RevocationValues;break;case o.XmlXades.ElementNames.AttrAuthoritiesCertValues:n=S;break;case o.XmlXades.ElementNames.AttributeRevocationValues:n=w;break;case o.XmlXades.ElementNames.ArchiveTimeStamp:n=y}if(n){var a=n.LoadXml(r);this.Add(a)}}}},t}(s.XadesCollection);a([i.XmlAttribute({localName:o.XmlXades.AttributeNames.Id,defaultValue:""})],N.prototype,"Id",void 0),N=a([i.XmlElement({localName:o.XmlXades.ElementNames.UnsignedSignatureProperties,parser:C})],N),t.UnsignedSignatureProperties=N},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}n(r(114))},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(7),s=r(6),l=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(o.XmlSignatureObject);a([i.XmlAttribute({localName:s.XmlSignature.AttributeNames.Algorithm,required:!0,defaultValue:s.XmlSignature.DefaultCanonMethod})],l.prototype,"Algorithm",void 0),l=a([i.XmlElement({localName:s.XmlSignature.ElementNames.CanonicalizationMethod})],l),t.CanonicalizationMethod=l},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(6),s=r(7),l=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XmlSignatureObject);a([i.XmlAttribute({localName:o.XmlSignature.AttributeNames.Id,defaultValue:""})],l.prototype,"Id",void 0),a([i.XmlAttribute({localName:o.XmlSignature.AttributeNames.MimeType,defaultValue:""})],l.prototype,"MimeType",void 0),a([i.XmlAttribute({localName:o.XmlSignature.AttributeNames.Encoding,defaultValue:""})],l.prototype,"Encoding",void 0),l=a([i.XmlElement({localName:o.XmlSignature.ElementNames.Object})],l),t.DataObject=l;var u=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XmlSignatureCollection);u=a([i.XmlElement({localName:"xmldsig_objects",parser:l})],u),t.DataObjects=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(1),s=r(6),l=r(7),u=r(12),c=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.OnLoadXml=function(e){for(var t=function(t){var n=e.childNodes.item(t);if(n.nodeType!==i.XmlNodeType.Element)return"continue";var a=null;switch(n.localName){case s.XmlSignature.ElementNames.KeyValue:a=u.KeyValue;break;case s.XmlSignature.ElementNames.X509Data:a=u.KeyInfoX509Data;break;case s.XmlSignature.ElementNames.SPKIData:a=u.SPKIData;break;case s.XmlSignature.ElementNames.KeyName:case s.XmlSignature.ElementNames.RetrievalMethod:case s.XmlSignature.ElementNames.PGPData:case s.XmlSignature.ElementNames.MgmtData:}if(a){var o=new a;if(o.LoadXml(n),o instanceof u.KeyValue){var l=null;if([m.RsaKeyValue,m.EcdsaKeyValue].some(function(e){try{for(var t=new e,r=0;r<n.childNodes.length;r++){var a=n.childNodes.item(r);if(a.nodeType===i.XmlNodeType.Element)return t.LoadXml(a),l=t,!0}}catch(e){}return!1}),!l)throw new i.XmlError(i.XE.CRYPTOGRAPHIC,"Unsupported KeyValue in use");o.Value=l}r.Add(o)}},r=this,n=0;n<e.childNodes.length;n++)t(n)},t}(l.XmlSignatureCollection);a([o.XmlAttribute({localName:s.XmlSignature.AttributeNames.Id,defaultValue:""})],c.prototype,"Id",void 0),c=a([o.XmlElement({localName:s.XmlSignature.ElementNames.KeyInfo})],c),t.KeyInfo=c;var m=r(12)},function(e,t,r){"use strict";function n(e){switch(e){case"P-256":return"urn:oid:1.2.840.10045.3.1.7";case"P-384":return"urn:oid:1.3.132.0.34";case"P-521":return"urn:oid:1.3.132.0.35"}throw new s.XmlError(s.XE.CRYPTOGRAPHIC,"Unknown NamedCurve")}function a(e){switch(e){case"urn:oid:1.2.840.10045.3.1.7":return"P-256";case"urn:oid:1.3.132.0.34":return"P-384";case"urn:oid:1.3.132.0.35":return"P-521"}throw new s.XmlError(s.XE.CRYPTOGRAPHIC,"Unknown NamedCurve OID")}var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=r(1),l=r(1),u=r(1),c=r(32),m=r(14),f=r(15),h="http://www.w3.org/2001/04/xmldsig-more#",p="ecdsa",d=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),t}(u.XmlObject);o([u.XmlChildElement({localName:c.XmlSignature.ElementNames.X,namespaceURI:h,prefix:p,required:!0,converter:l.XmlBase64Converter})],d.prototype,"X",void 0),o([u.XmlChildElement({localName:c.XmlSignature.ElementNames.Y,namespaceURI:h,prefix:p,required:!0,converter:l.XmlBase64Converter})],d.prototype,"Y",void 0),d=o([u.XmlElement({localName:c.XmlSignature.ElementNames.PublicKey,namespaceURI:h,prefix:p})],d),t.EcdsaPublicKey=d;var v=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),t}(u.XmlObject);o([u.XmlAttribute({localName:c.XmlSignature.AttributeNames.URI,required:!0})],v.prototype,"Uri",void 0),v=o([u.XmlElement({localName:c.XmlSignature.ElementNames.NamedCurve,namespaceURI:h,prefix:p})],v),t.NamedCurve=v;var y=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),t}(u.XmlObject);o([u.XmlChildElement({parser:v})],y.prototype,"NamedCurve",void 0),y=o([u.XmlElement({localName:c.XmlSignature.ElementNames.DomainParameters,namespaceURI:h,prefix:p})],y),t.DomainParameters=y;var g=function(e){function t(){var t=e.apply(this,arguments)||this;return t.name=c.XmlSignature.ElementNames.ECDSAKeyValue,t.m_key=null,t.m_jwk=null,t.m_keyusage=null,t}return i(t,e),Object.defineProperty(t.prototype,"NamedCurve",{get:function(){return n(this.DomainParameters.NamedCurve.Uri)},enumerable:!0,configurable:!0}),t.prototype.importKey=function(e){var t=this;return new Promise(function(r,a){if("ECDSA"!==e.algorithm.name.toUpperCase())throw new s.XmlError(s.XE.ALGORITHM_WRONG_NAME,e.algorithm.name);t.m_key=e,m.Application.crypto.subtle.exportKey("jwk",e).then(function(r){return t.m_jwk=r,t.PublicKey=new d,t.PublicKey.X=l.Convert.FromString(r.x,"base64url"),t.PublicKey.Y=l.Convert.FromString(r.y,"base64url"),t.DomainParameters||(t.DomainParameters=new y),t.DomainParameters.NamedCurve||(t.DomainParameters.NamedCurve=new v),t.DomainParameters.NamedCurve.Uri=n(r.crv),t.m_keyusage=e.usages,Promise.resolve(t)}).then(r,a)})},t.prototype.exportKey=function(e){var t=this;return Promise.resolve().then(function(){if(t.m_key)return t.m_key;var e=l.Convert.ToBase64Url(t.PublicKey.X),r=l.Convert.ToBase64Url(t.PublicKey.Y),n=a(t.DomainParameters.NamedCurve.Uri),i={kty:"EC",crv:n,x:e,y:r,ext:!0};return t.m_keyusage=["verify"],m.Application.crypto.subtle.importKey("jwk",i,{name:"ECDSA",namedCurve:n},!0,t.m_keyusage)}).then(function(e){return t.m_key=e,t.m_key})},t}(f.KeyInfoClause);o([u.XmlChildElement({parser:y})],g.prototype,"DomainParameters",void 0),o([u.XmlChildElement({parser:d,required:!0})],g.prototype,"PublicKey",void 0),g=o([u.XmlElement({localName:c.XmlSignature.ElementNames.ECDSAKeyValue,namespaceURI:h,prefix:p})],g),t.EcdsaKeyValue=g},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(1),s=r(1),l=r(1),u=r(6),c=r(42),m=r(15),f=r(14),h=r(41),p=r(22),d=function(e){function t(){var t=e.apply(this,arguments)||this;return t.m_key=null,t.m_jwk=null,t.m_keyusage=[],t}return n(t,e),t.prototype.importKey=function(e){var t=this;return new Promise(function(r,n){var a=e.algorithm.name.toUpperCase();if(a!==p.RSA_PKCS1.toUpperCase()&&a!==p.RSA_PSS.toUpperCase())throw new i.XmlError(i.XE.ALGORITHM_WRONG_NAME,e.algorithm.name);t.m_key=e,f.Application.crypto.subtle.exportKey("jwk",e).then(function(r){return t.m_jwk=r,t.Modulus=o.Convert.FromBase64Url(r.n),t.Exponent=o.Convert.FromBase64Url(r.e),t.m_keyusage=e.usages,Promise.resolve(t)}).then(r,n)})},t.prototype.exportKey=function(e){var t=this;return new Promise(function(r,n){if(t.m_key)return r(t.m_key);if(!t.Modulus)throw new i.XmlError(i.XE.CRYPTOGRAPHIC,"RsaKeyValue has no Modulus");var a=o.Convert.ToBase64Url(t.Modulus);if(!t.Exponent)throw new i.XmlError(i.XE.CRYPTOGRAPHIC,"RsaKeyValue has no Exponent");var s,l=o.Convert.ToBase64Url(t.Exponent);switch(e.name.toUpperCase()){case p.RSA_PKCS1.toUpperCase():s="R";break;case p.RSA_PSS.toUpperCase():s="P";break;default:throw new i.XmlError(i.XE.ALGORITHM_NOT_SUPPORTED,e.name)}switch(e.hash.name.toUpperCase()){case p.SHA1:s+="S1";break;case p.SHA256:s+="S256";break;case p.SHA384:s+="S384";break;case p.SHA512:s+="S512"}var u={kty:"RSA",alg:s,n:a,e:l,ext:!0};f.Application.crypto.subtle.importKey("jwk",u,e,!0,t.m_keyusage).then(r,n)})},t.prototype.LoadXml=function(t){e.prototype.LoadXml.call(this,t),this.m_keyusage=["verify"]},t}(m.KeyInfoClause);a([s.XmlChildElement({localName:u.XmlSignature.ElementNames.Modulus,prefix:u.XmlSignature.DefaultPrefix,namespaceURI:u.XmlSignature.NamespaceURI,required:!0,converter:o.XmlBase64Converter})],d.prototype,"Modulus",void 0),a([s.XmlChildElement({localName:u.XmlSignature.ElementNames.Exponent,prefix:u.XmlSignature.DefaultPrefix,namespaceURI:u.XmlSignature.NamespaceURI,required:!0,converter:o.XmlBase64Converter})],d.prototype,"Exponent",void 0),d=a([s.XmlElement({localName:u.XmlSignature.ElementNames.RSAKeyValue})],d),t.RsaKeyValue=d;var v="http://www.w3.org/2007/05/xmldsig-more#",y="pss",g=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.XmlObject);a([s.XmlChildElement({parser:c.DigestMethod})],g.prototype,"DigestMethod",void 0),a([s.XmlAttribute({localName:u.XmlSignature.AttributeNames.Algorithm,defaultValue:"http://www.w3.org/2007/05/xmldsig-more#MGF1"})],g.prototype,"Algorithm",void 0),g=a([s.XmlElement({localName:u.XmlSignature.ElementNames.MaskGenerationFunction,prefix:y,namespaceURI:v})],g),t.MaskGenerationFunction=g;var b=S=function(e){function t(t){var r=e.call(this)||this;return t&&r.FromAlgorithm(t),r}return n(t,e),t.prototype.FromAlgorithm=function(e){this.DigestMethod=new c.DigestMethod;var t=h.CryptoConfig.GetHashAlgorithm(e.hash);this.DigestMethod.Algorithm=t.namespaceURI,e.saltLength&&(this.SaltLength=e.saltLength)},t.FromAlgorithm=function(e){return new S(e)},t}(l.XmlObject);a([s.XmlChildElement({parser:c.DigestMethod})],b.prototype,"DigestMethod",void 0),a([s.XmlChildElement({parser:g})],b.prototype,"MGF",void 0),a([s.XmlChildElement({converter:o.XmlNumberConverter,prefix:y,namespaceURI:v})],b.prototype,"SaltLength",void 0),a([s.XmlChildElement({converter:o.XmlNumberConverter})],b.prototype,"TrailerField",void 0),b=S=a([s.XmlElement({localName:u.XmlSignature.ElementNames.RSAPSSParams,prefix:y,namespaceURI:v})],b),t.PssAlgorithmParams=b;var S},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(6),s=r(7),l=r(16),u=r(42),c=function(e){function t(t){var r=e.call(this)||this;return t&&(r.Uri=t),r}return n(t,e),t}(s.XmlSignatureObject);a([i.XmlAttribute({defaultValue:""})],c.prototype,"Id",void 0),a([i.XmlAttribute({localName:o.XmlSignature.AttributeNames.URI,defaultValue:""})],c.prototype,"Uri",void 0),a([i.XmlAttribute({localName:o.XmlSignature.AttributeNames.Type,defaultValue:""})],c.prototype,"Type",void 0),a([i.XmlChildElement({parser:l.Transforms})],c.prototype,"Transforms",void 0),a([i.XmlChildElement({required:!0,parser:u.DigestMethod})],c.prototype,"DigestMethod",void 0),a([i.XmlChildElement({required:!0,localName:o.XmlSignature.ElementNames.DigestValue,namespaceURI:o.XmlSignature.NamespaceURI,prefix:o.XmlSignature.DefaultPrefix,converter:i.XmlBase64Converter})],c.prototype,"DigestValue",void 0),c=a([i.XmlElement({localName:o.XmlSignature.ElementNames.Reference})],c),t.Reference=c;var m=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XmlSignatureCollection);m=a([i.XmlElement({localName:"References",parser:c})],m),t.References=m},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(1),s=r(1),l=r(7),u=r(6),c=r(12),m=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.OnLoadXml=function(e){for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes.item(t);if(r.nodeType===i.XmlNodeType.Element&&r.nodeName!==u.XmlSignature.ElementNames.HMACOutputLength){var n=void 0;switch(r.localName){case u.XmlSignature.ElementNames.RSAPSSParams:n=c.PssAlgorithmParams}if(n){var a=new n;a.LoadXml(r),this.Add(a)}}}},t}(l.XmlSignatureCollection);m=a([o.XmlElement({localName:"Other"})],m),t.SignatureMethodOther=m;var f=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.XmlSignatureObject);a([o.XmlAttribute({localName:u.XmlSignature.AttributeNames.Algorithm,required:!0,defaultValue:""})],f.prototype,"Algorithm",void 0),a([o.XmlChildElement({localName:u.XmlSignature.ElementNames.HMACOutputLength,namespaceURI:u.XmlSignature.NamespaceURI,prefix:u.XmlSignature.DefaultPrefix,converter:s.XmlNumberConverter})],f.prototype,"HMACOutputLength",void 0),a([o.XmlChildElement({parser:m,noRoot:!0,minOccurs:0})],f.prototype,"Any",void 0),f=a([o.XmlElement({localName:u.XmlSignature.ElementNames.SignatureMethod})],f),t.SignatureMethod=f},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);
return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(6),s=r(7),l=r(68),u=r(74),c=r(73),m=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XmlSignatureObject);a([i.XmlAttribute({localName:o.XmlSignature.AttributeNames.Id,defaultValue:""})],m.prototype,"Id",void 0),a([i.XmlChildElement({parser:l.CanonicalizationMethod,required:!0})],m.prototype,"CanonicalizationMethod",void 0),a([i.XmlChildElement({parser:u.SignatureMethod,required:!0})],m.prototype,"SignatureMethod",void 0),a([i.XmlChildElement({parser:c.References,minOccurs:1,noRoot:!0})],m.prototype,"References",void 0),m=a([i.XmlElement({localName:o.XmlSignature.ElementNames.SignedInfo})],m),t.SignedInfo=m},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),l=a(s),u=r(3),c=r(10),m=n(c),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.accessMethod=(0,u.getParametersValue)(t,"accessMethod",e.defaultValues("accessMethod")),this.accessLocation=(0,u.getParametersValue)(t,"accessLocation",e.defaultValues("accessLocation")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema({names:{accessMethod:"accessMethod",accessLocation:{names:{blockName:"accessLocation"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for AccessDescription");this.accessMethod=r.result.accessMethod.valueBlock.toString(),this.accessLocation=new m.default({schema:r.result.accessLocation})}},{key:"toSchema",value:function(){return new l.Sequence({value:[new l.ObjectIdentifier({value:this.accessMethod}),this.accessLocation.toSchema()]})}},{key:"toJSON",value:function(){return{accessMethod:this.accessMethod,accessLocation:this.accessLocation.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"accessMethod":return"";case"accessLocation":return new m.default;default:throw new Error("Invalid member name for AccessDescription class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new l.Sequence({name:t.blockName||"",value:[new l.ObjectIdentifier({name:t.accessMethod||""}),m.default.schema(t.accessLocation||{})]})}}]),e}();t.default=f},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),l=a(s),u=r(3),c=r(10),m=n(c),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.altNames=(0,u.getParametersValue)(t,"altNames",e.defaultValues("altNames")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema({names:{altNames:"altNames"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for AltName");"altNames"in r.result&&(this.altNames=Array.from(r.result.altNames,function(e){return new m.default({schema:e})}))}},{key:"toSchema",value:function(){return new l.Sequence({value:Array.from(this.altNames,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{altNames:Array.from(this.altNames,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"altNames":return[];default:throw new Error("Invalid member name for AltName class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new l.Sequence({name:t.blockName||"",value:[new l.Repeated({name:t.altNames||"",value:m.default.schema()})]})}}]),e}();t.default=f},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(2),s=n(o),l=r(3),u=r(25),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.type=(0,l.getParametersValue)(t,"type",e.defaultValues("type")),this.value=(0,l.getParametersValue)(t,"value",e.defaultValues("value")),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{type:"type",value:"typeValue"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ATTR_TYPE_AND_VALUE");this.type=r.result.type.valueBlock.toString(),this.value=r.result.typeValue}},{key:"toSchema",value:function(){return new s.Sequence({value:[new s.ObjectIdentifier({value:this.type}),this.value]})}},{key:"toJSON",value:function(){var e={type:this.type};return 0!==Object.keys(this.value).length?e.value=this.value.toJSON():e.value=this.value,e}},{key:"isEqual",value:function(t){if(t instanceof e){if(this.type!==t.type)return!1;if(this.value instanceof s.Utf8String&&t.value instanceof s.Utf8String||this.value instanceof s.BmpString&&t.value instanceof s.BmpString||this.value instanceof s.UniversalString&&t.value instanceof s.UniversalString||this.value instanceof s.NumericString&&t.value instanceof s.NumericString||this.value instanceof s.PrintableString&&t.value instanceof s.PrintableString||this.value instanceof s.TeletexString&&t.value instanceof s.TeletexString||this.value instanceof s.VideotexString&&t.value instanceof s.VideotexString||this.value instanceof s.IA5String&&t.value instanceof s.IA5String||this.value instanceof s.GraphicString&&t.value instanceof s.GraphicString||this.value instanceof s.VisibleString&&t.value instanceof s.VisibleString||this.value instanceof s.GeneralString&&t.value instanceof s.GeneralString||this.value instanceof s.CharacterString&&t.value instanceof s.CharacterString){var r=(0,u.stringPrep)(this.value.valueBlock.value),n=(0,u.stringPrep)(t.value.valueBlock.value);if(0!==r.localeCompare(n))return!1}else if((0,l.isEqualBuffer)(this.value.valueBeforeDecode,t.value.valueBeforeDecode)===!1)return!1;return!0}return t instanceof ArrayBuffer&&(0,l.isEqualBuffer)(this.value.valueBeforeDecode,t)}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return"";case"value":return{};default:throw new Error("Invalid member name for AttributeTypeAndValue class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.type||""}),new s.Any({name:t.value||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),l=a(s),u=r(3),c=r(10),m=n(c),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),"keyIdentifier"in t&&(this.keyIdentifier=(0,u.getParametersValue)(t,"keyIdentifier",e.defaultValues("keyIdentifier"))),"authorityCertIssuer"in t&&(this.authorityCertIssuer=(0,u.getParametersValue)(t,"authorityCertIssuer",e.defaultValues("authorityCertIssuer"))),"authorityCertSerialNumber"in t&&(this.authorityCertSerialNumber=(0,u.getParametersValue)(t,"authorityCertSerialNumber",e.defaultValues("authorityCertSerialNumber"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema({names:{keyIdentifier:"keyIdentifier",authorityCertIssuer:"authorityCertIssuer",authorityCertSerialNumber:"authorityCertSerialNumber"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for AuthorityKeyIdentifier");"keyIdentifier"in r.result&&(r.result.keyIdentifier.idBlock.tagClass=1,r.result.keyIdentifier.idBlock.tagNumber=4,this.keyIdentifier=r.result.keyIdentifier),"authorityCertIssuer"in r.result&&(this.authorityCertIssuer=Array.from(r.result.authorityCertIssuer,function(e){return new m.default({schema:e})})),"authorityCertSerialNumber"in r.result&&(r.result.authorityCertSerialNumber.idBlock.tagClass=1,r.result.authorityCertSerialNumber.idBlock.tagNumber=2,this.authorityCertSerialNumber=r.result.authorityCertSerialNumber)}},{key:"toSchema",value:function(){var e=[];if("keyIdentifier"in this){var t=this.keyIdentifier;t.idBlock.tagClass=3,t.idBlock.tagNumber=0,e.push(t)}if("authorityCertIssuer"in this&&e.push(new l.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new l.Sequence({value:Array.from(this.authorityCertIssuer,function(e){return e.toSchema()})})]})),"authorityCertSerialNumber"in this){var r=this.authorityCertSerialNumber;r.idBlock.tagClass=3,r.idBlock.tagNumber=2,e.push(r)}return new l.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"keyIdentifier"in this&&(e.keyIdentifier=this.keyIdentifier.toJSON()),"authorityCertIssuer"in this&&(e.authorityCertIssuer=Array.from(this.authorityCertIssuer,function(e){return e.toJSON()})),"authorityCertSerialNumber"in this&&(e.authorityCertSerialNumber=this.authorityCertSerialNumber.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"keyIdentifier":return new l.OctetString;case"authorityCertIssuer":return[];case"authorityCertSerialNumber":return new l.Integer;default:throw new Error("Invalid member name for AuthorityKeyIdentifier class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new l.Sequence({name:t.blockName||"",value:[new l.Primitive({name:t.keyIdentifier||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new l.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new l.Repeated({name:t.authorityCertIssuer||"",value:m.default.schema()})]}),new l.Primitive({name:t.authorityCertSerialNumber||"",optional:!0,idBlock:{tagClass:3,tagNumber:2}})]})}}]),e}();t.default=f},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(2),s=n(o),l=r(3),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.cA=(0,l.getParametersValue)(t,"cA",!1),"pathLenConstraint"in t&&(this.pathLenConstraint=(0,l.getParametersValue)(t,"pathLenConstraint",0)),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{cA:"cA",pathLenConstraint:"pathLenConstraint"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for BasicConstraints");"cA"in r.result&&(this.cA=r.result.cA.valueBlock.value),"pathLenConstraint"in r.result&&(r.result.pathLenConstraint.valueBlock.isHexOnly?this.pathLenConstraint=r.result.pathLenConstraint:this.pathLenConstraint=r.result.pathLenConstraint.valueBlock.valueDec)}},{key:"toSchema",value:function(){var t=[];return this.cA!==e.defaultValues("cA")&&t.push(new s.Boolean({value:this.cA})),"pathLenConstraint"in this&&(this.pathLenConstraint instanceof s.Integer?t.push(this.pathLenConstraint):t.push(new s.Integer({value:this.pathLenConstraint}))),new s.Sequence({value:t})}},{key:"toJSON",value:function(){var t={};return this.cA!==e.defaultValues("cA")&&(t.cA=this.cA),"pathLenConstraint"in this&&(this.pathLenConstraint instanceof s.Integer?t.pathLenConstraint=this.pathLenConstraint.toJSON():t.pathLenConstraint=this.pathLenConstraint),t}}],[{key:"defaultValues",value:function(e){switch(e){case"cA":return!1;default:throw new Error("Invalid member name for BasicConstraints class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Boolean({optional:!0,name:t.cA||""}),new s.Integer({optional:!0,name:t.pathLenConstraint||""})]})}}]),e}();t.default=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),l=a(s),u=r(3),c=r(85),m=n(c),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.distributionPoints=(0,u.getParametersValue)(t,"distributionPoints",e.defaultValues("distributionPoints")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema({names:{distributionPoints:"distributionPoints"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CRLDistributionPoints");this.distributionPoints=Array.from(r.result.distributionPoints,function(e){return new m.default({schema:e})})}},{key:"toSchema",value:function(){return new l.Sequence({value:Array.from(this.distributionPoints,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{distributionPoints:Array.from(this.distributionPoints,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"distributionPoints":return[];default:throw new Error("Invalid member name for CRLDistributionPoints class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new l.Sequence({name:t.blockName||"",value:[new l.Repeated({name:t.distributionPoints||"",value:m.default.schema()})]})}}]),e}();t.default=f},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"tbsCertificate",value:[new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new u.Integer({name:t.tbsCertificateVersion||"tbsCertificate.version"})]}),new u.Integer({name:t.tbsCertificateSerialNumber||"tbsCertificate.serialNumber"}),h.default.schema(t.signature||{names:{blockName:"tbsCertificate.signature"}}),d.default.schema(t.issuer||{names:{blockName:"tbsCertificate.issuer"}}),new u.Sequence({name:t.tbsCertificateValidity||"tbsCertificate.validity",value:[y.default.schema(t.notBefore||{names:{utcTimeName:"tbsCertificate.notBefore",generalTimeName:"tbsCertificate.notBefore"}}),y.default.schema(t.notAfter||{names:{utcTimeName:"tbsCertificate.notAfter",generalTimeName:"tbsCertificate.notAfter"}})]}),d.default.schema(t.subject||{names:{blockName:"tbsCertificate.subject"}}),b.default.schema(t.subjectPublicKeyInfo||{names:{blockName:"tbsCertificate.subjectPublicKeyInfo"}}),new u.Primitive({name:t.tbsCertificateIssuerUniqueID||"tbsCertificate.issuerUniqueID",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new u.Primitive({name:t.tbsCertificateSubjectUniqueID||"tbsCertificate.subjectUniqueID",optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[N.default.schema(t.extensions||{names:{blockName:"tbsCertificate.extensions"}})]})]})}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(2),u=a(l),c=r(3),m=r(25),f=r(17),h=n(f),p=r(24),d=n(p),v=r(105),y=n(v),g=r(46),b=n(g),S=r(45),w=n(S),C=r(88),N=n(C),P=r(47),k=n(P),A=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.tbs=(0,c.getParametersValue)(t,"tbs",e.defaultValues("tbs")),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.serialNumber=(0,c.getParametersValue)(t,"serialNumber",e.defaultValues("serialNumber")),this.signature=(0,c.getParametersValue)(t,"signature",e.defaultValues("signature")),this.issuer=(0,c.getParametersValue)(t,"issuer",e.defaultValues("issuer")),this.notBefore=(0,c.getParametersValue)(t,"notBefore",e.defaultValues("notBefore")),this.notAfter=(0,c.getParametersValue)(t,"notAfter",e.defaultValues("notAfter")),this.subject=(0,c.getParametersValue)(t,"subject",e.defaultValues("subject")),this.subjectPublicKeyInfo=(0,c.getParametersValue)(t,"subjectPublicKeyInfo",e.defaultValues("subjectPublicKeyInfo")),"issuerUniqueID"in t&&(this.issuerUniqueID=(0,c.getParametersValue)(t,"issuerUniqueID",e.defaultValues("issuerUniqueID"))),"subjectUniqueID"in t&&(this.subjectUniqueID=(0,c.getParametersValue)(t,"subjectUniqueID",e.defaultValues("subjectUniqueID"))),"extensions"in t&&(this.extensions=(0,c.getParametersValue)(t,"extensions",e.defaultValues("extensions"))),this.signatureAlgorithm=(0,c.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signatureValue=(0,c.getParametersValue)(t,"signatureValue",e.defaultValues("signatureValue")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{tbsCertificate:{names:{extensions:{names:{extensions:"tbsCertificate.extensions"}}}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CERT");this.tbs=r.result.tbsCertificate.valueBeforeDecode,"tbsCertificate.version"in r.result&&(this.version=r.result["tbsCertificate.version"].valueBlock.valueDec),this.serialNumber=r.result["tbsCertificate.serialNumber"],this.signature=new h.default({schema:r.result["tbsCertificate.signature"]}),this.issuer=new d.default({schema:r.result["tbsCertificate.issuer"]}),this.notBefore=new y.default({schema:r.result["tbsCertificate.notBefore"]}),this.notAfter=new y.default({schema:r.result["tbsCertificate.notAfter"]}),this.subject=new d.default({schema:r.result["tbsCertificate.subject"]}),this.subjectPublicKeyInfo=new b.default({schema:r.result["tbsCertificate.subjectPublicKeyInfo"]}),"tbsCertificate.issuerUniqueID"in r.result&&(this.issuerUniqueID=r.result["tbsCertificate.issuerUniqueID"].valueBlock.valueHex),"tbsCertificate.subjectUniqueID"in r.result&&(this.issuerUniqueID=r.result["tbsCertificate.subjectUniqueID"].valueBlock.valueHex),"tbsCertificate.extensions"in r.result&&(this.extensions=Array.from(r.result["tbsCertificate.extensions"],function(e){return new w.default({schema:e})})),this.signatureAlgorithm=new h.default({schema:r.result.signatureAlgorithm}),this.signatureValue=r.result.signatureValue}},{key:"encodeTBS",value:function(){var t=[];return"version"in this&&this.version!==e.defaultValues("version")&&t.push(new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new u.Integer({value:this.version})]})),t.push(this.serialNumber),t.push(this.signature.toSchema()),t.push(this.issuer.toSchema()),t.push(new u.Sequence({value:[this.notBefore.toSchema(),this.notAfter.toSchema()]})),t.push(this.subject.toSchema()),t.push(this.subjectPublicKeyInfo.toSchema()),"issuerUniqueID"in this&&t.push(new u.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:1},valueHex:this.issuerUniqueID})),"subjectUniqueID"in this&&t.push(new u.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:2},valueHex:this.subjectUniqueID})),"subjectUniqueID"in this&&t.push(new u.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[this.extensions.toSchema()]})),"extensions"in this&&t.push(new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[new u.Sequence({value:Array.from(this.extensions,function(e){return e.toSchema()})})]})),new u.Sequence({value:t})}},{key:"toSchema",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r={};if(t===!1){if(0===this.tbs.length)return e.schema().value[0];r=u.fromBER(this.tbs).result}else r=this.encodeTBS();return new u.Sequence({value:[r,this.signatureAlgorithm.toSchema(),this.signatureValue]})}},{key:"toJSON",value:function(){var t={tbs:(0,c.bufferToHexCodes)(this.tbs,0,this.tbs.byteLength),serialNumber:this.serialNumber.toJSON(),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),notBefore:this.notBefore.toJSON(),notAfter:this.notAfter.toJSON(),subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return"version"in this&&this.version!==e.defaultValues("version")&&(t.version=this.version),"issuerUniqueID"in this&&(t.issuerUniqueID=(0,c.bufferToHexCodes)(this.issuerUniqueID,0,this.issuerUniqueID.byteLength)),"subjectUniqueID"in this&&(t.subjectUniqueID=(0,c.bufferToHexCodes)(this.subjectUniqueID,0,this.subjectUniqueID.byteLength)),"extensions"in this&&(t.extensions=Array.from(this.extensions,function(e){return e.toJSON()})),t}},{key:"getPublicKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=(0,m.getCrypto)();if("undefined"==typeof t)return Promise.reject("Unable to create WebCrypto object");if(null===e){e={};var r=(0,m.getHashAlgorithm)(this.signatureAlgorithm);if(""===r)return Promise.reject("Unsupported signature algorithm: "+this.signatureAlgorithm.algorithmId);var n=(0,m.getAlgorithmByOID)(this.subjectPublicKeyInfo.algorithm.algorithmId);if("name"in n==!1)return Promise.reject("Unsupported public key algorithm: "+this.subjectPublicKeyInfo.algorithm.algorithmId);e.algorithm=(0,m.getAlgorithmParameters)(n.name,"importkey"),"hash"in e.algorithm.algorithm&&(e.algorithm.algorithm.hash.name=r)}var a=this.subjectPublicKeyInfo.toSchema(),i=a.toBER(!1),o=new Uint8Array(i);return t.importKey("spki",o,e.algorithm.algorithm,!0,e.algorithm.usages)}},{key:"getKeyHash",value:function(){var e=(0,m.getCrypto)();return"undefined"==typeof e?Promise.reject("Unable to create WebCrypto object"):e.digest({name:"sha-1"},new Uint8Array(this.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex))}},{key:"sign",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1",n=(0,m.getOIDByAlgorithm)({name:r});if(""===n)return Promise.reject("Unsupported hash algorithm: "+r);var a=(0,m.getAlgorithmParameters)(e.algorithm.name,"sign");switch(a.algorithm.hash.name=r,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.signature.algorithmId=(0,m.getOIDByAlgorithm)(a.algorithm),this.signatureAlgorithm.algorithmId=this.signature.algorithmId;break;case"RSA-PSS":switch(r.toUpperCase()){case"SHA-256":a.algorithm.saltLength=32;break;case"SHA-384":a.algorithm.saltLength=48;break;case"SHA-512":a.algorithm.saltLength=64}var i={};if("SHA-1"!==r.toUpperCase()){var o=(0,m.getOIDByAlgorithm)({name:r});if(""===o)return Promise.reject("Unsupported hash algorithm: "+r);i.hashAlgorithm=new h.default({algorithmId:o,algorithmParams:new u.Null}),i.maskGenAlgorithm=new h.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:i.hashAlgorithm.toSchema()})}20!==a.algorithm.saltLength&&(i.saltLength=a.algorithm.saltLength);var s=new k.default(i);this.signature=new h.default({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:s.toSchema()}),this.signatureAlgorithm=this.signature;break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}this.tbs=this.encodeTBS().toBER(!1);var l=(0,m.getCrypto)();return"undefined"==typeof l?Promise.reject("Unable to create WebCrypto object"):l.sign(a.algorithm,e,new Uint8Array(this.tbs)).then(function(e){"ECDSA"===a.algorithm.name&&(e=(0,m.createCMSECDSASignature)(e)),t.signatureValue=new u.BitString({valueHex:e})},function(e){return Promise.reject("Signing error: "+e)})}},{key:"verify",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=Promise.resolve(),n={},a=this.signatureValue,i=this.tbs;if(null!==t?n=t.subjectPublicKeyInfo:this.issuer.isEqual(this.subject)&&(n=this.subjectPublicKeyInfo),n instanceof b.default==!1)return Promise.reject("Please provide issuer certificate as a parameter");var o=(0,m.getCrypto)();if("undefined"==typeof o)return Promise.reject("Unable to create WebCrypto object");var s=(0,m.getHashAlgorithm)(this.signatureAlgorithm);return""===s?Promise.reject("Unsupported signature algorithm: "+this.signatureAlgorithm.algorithmId):(r=r.then(function(){var t=void 0;t="1.2.840.113549.1.1.10"===e.signatureAlgorithm.algorithmId?e.signatureAlgorithm.algorithmId:n.algorithm.algorithmId;var r=(0,m.getAlgorithmByOID)(t);if("name"in r==!1)return Promise.reject("Unsupported public key algorithm: "+t);var a=(0,m.getAlgorithmParameters)(r.name,"importkey");"hash"in a.algorithm&&(a.algorithm.hash.name=s);var i=n.toSchema(),l=i.toBER(!1),u=new Uint8Array(l);return o.importKey("spki",u,a.algorithm,!0,a.usages)}),r=r.then(function(t){var r=(0,m.getAlgorithmParameters)(t.algorithm.name,"verify");"hash"in r.algorithm&&(r.algorithm.hash.name=s);var n=a.valueBlock.valueHex;if("ECDSA"===t.algorithm.name){var l=u.fromBER(n);n=(0,m.createECDSASignatureFromCMS)(l.result)}if("RSA-PSS"===t.algorithm.name){var c=void 0;try{c=new k.default({schema:e.signatureAlgorithm.algorithmParams})}catch(e){return Promise.reject(e)}"saltLength"in c?r.algorithm.saltLength=c.saltLength:r.algorithm.saltLength=20;var f="SHA-1";if("hashAlgorithm"in c){var h=(0,m.getAlgorithmByOID)(c.hashAlgorithm.algorithmId);if("name"in h==!1)return Promise.reject("Unrecognized hash algorithm: "+c.hashAlgorithm.algorithmId);f=h.name}r.algorithm.hash.name=f}return o.verify(r.algorithm,t,new Uint8Array(n),new Uint8Array(i))}))}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 0;case"serialNumber":return new u.Integer;case"signature":return new h.default;case"issuer":return new d.default;case"notBefore":return new y.default;case"notAfter":return new y.default;case"subject":return new d.default;case"subjectPublicKeyInfo":return new b.default;case"issuerUniqueID":return new ArrayBuffer(0);case"subjectUniqueID":return new ArrayBuffer(0);case"extensions":return[];case"signatureAlgorithm":return new h.default;case"signatureValue":return new u.BitString;default:throw new Error("Invalid member name for Certificate class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[o(t.tbsCertificate),h.default.schema(t.signatureAlgorithm||{names:{blockName:"signatureAlgorithm"}}),new u.BitString({name:t.signatureValue||"signatureValue"})]})}}]),e}();t.default=A},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),l=a(s),u=r(3),c=r(96),m=n(c),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.certificatePolicies=(0,u.getParametersValue)(t,"certificatePolicies",e.defaultValues("certificatePolicies")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema({names:{certificatePolicies:"certificatePolicies"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CertificatePolicies");this.certificatePolicies=Array.from(r.result.certificatePolicies,function(e){return new m.default({schema:e})})}},{key:"toSchema",value:function(){return new l.Sequence({value:Array.from(this.certificatePolicies,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{certificatePolicies:Array.from(this.certificatePolicies,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"certificatePolicies":return[];default:throw new Error("Invalid member name for CertificatePolicies class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new l.Sequence({name:t.blockName||"",value:[new l.Repeated({name:t.certificatePolicies||"",value:m.default.schema()})]})}}]),e}();t.default=f},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),
n&&e(t,n),t}}(),s=r(2),l=a(s),u=r(3),c=r(46),m=n(c),f=r(100),h=n(f),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.crypto=(0,u.getParametersValue)(t,"crypto",{}),this.name=(0,u.getParametersValue)(t,"name","")}return o(e,[{key:"importKey",value:function(e,t,r,n,a){var i={};switch(t instanceof Uint8Array&&(t=t.buffer),e.toLowerCase()){case"raw":return this.crypto.importKey("raw",t,r,n,a);case"spki":var o=l.fromBER(t);if(o.offset===-1)return Promise.reject("Incorrect keyData");var s=new m.default;try{s.fromSchema(o.result)}catch(e){return Promise.reject("Incorrect keyData")}switch(r.name.toUpperCase()){case"RSA-PSS":switch(r.hash.name.toUpperCase()){case"SHA-1":i.alg="PS1";break;case"SHA-256":i.alg="PS256";break;case"SHA-384":i.alg="PS384";break;case"SHA-512":i.alg="PS512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}case"RSASSA-PKCS1-V1_5":if(a=["verify"],i.kty="RSA",i.ext=n,i.key_ops=a,"1.2.840.113549.1.1.1"!==s.algorithm.algorithmId)return Promise.reject("Incorrect public key algorithm: "+s.algorithm.algorithmId);if("alg"in i==!1)switch(r.hash.name.toUpperCase()){case"SHA-1":i.alg="RS1";break;case"SHA-256":i.alg="RS256";break;case"SHA-384":i.alg="RS384";break;case"SHA-512":i.alg="RS512";break;default:return Promise.reject("Incorrect public key algorithm: "+s.algorithm.algorithmId)}var c=s.toJSON(),f=!0,p=!1,d=void 0;try{for(var v,y=Object.keys(c)[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var g=v.value;i[g]=c[g]}}catch(e){p=!0,d=e}finally{try{!f&&y.return&&y.return()}finally{if(p)throw d}}break;case"ECDSA":a=["verify"];case"ECDH":if(i={kty:"EC",ext:n,key_ops:a},"1.2.840.10045.2.1"!==s.algorithm.algorithmId)return Promise.reject("Incorrect public key algorithm: "+s.algorithm.algorithmId);var b=s.toJSON(),S=!0,w=!1,C=void 0;try{for(var N,P=Object.keys(b)[Symbol.iterator]();!(S=(N=P.next()).done);S=!0){var k=N.value;i[k]=b[k]}}catch(e){w=!0,C=e}finally{try{!S&&P.return&&P.return()}finally{if(w)throw C}}break;case"RSA-OAEP":if(i.kty="RSA",i.ext=n,i.key_ops=a,"safari"===this.name.toLowerCase())i.alg="RSA-OAEP";else switch(r.hash.name.toUpperCase()){case"SHA-1":i.alg="RSA-OAEP-1";break;case"SHA-256":i.alg="RSA-OAEP-256";break;case"SHA-384":i.alg="RSA-OAEP-384";break;case"SHA-512":i.alg="RSA-OAEP-512";break;default:return Promise.reject("Incorrect public key algorithm: "+s.algorithm.algorithmId)}var A=s.toJSON(),E=!0,O=!1,X=void 0;try{for(var I,R=Object.keys(A)[Symbol.iterator]();!(E=(I=R.next()).done);E=!0){var B=I.value;i[B]=A[B]}}catch(e){O=!0,X=e}finally{try{!E&&R.return&&R.return()}finally{if(O)throw X}}break;default:return Promise.reject("Incorrect algorithm name: "+r.name.toUpperCase())}break;case"pkcs8":var _=new h.default,x=l.fromBER(t);if(x.offset===-1)return Promise.reject("Incorrect keyData");try{_.fromSchema(x.result)}catch(e){return Promise.reject("Incorrect keyData")}switch(r.name.toUpperCase()){case"RSA-PSS":switch(r.hash.name.toUpperCase()){case"SHA-1":i.alg="PS1";break;case"SHA-256":i.alg="PS256";break;case"SHA-384":i.alg="PS384";break;case"SHA-512":i.alg="PS512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}case"RSASSA-PKCS1-V1_5":if(a=["sign"],i.kty="RSA",i.ext=n,i.key_ops=a,"1.2.840.113549.1.1.1"!==_.privateKeyAlgorithm.algorithmId)return Promise.reject("Incorrect private key algorithm: "+_.privateKeyAlgorithm.algorithmId);if("alg"in i==!1)switch(r.hash.name.toUpperCase()){case"SHA-1":i.alg="RS1";break;case"SHA-256":i.alg="RS256";break;case"SHA-384":i.alg="RS384";break;case"SHA-512":i.alg="RS512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}var j=_.toJSON(),T=!0,D=!1,U=void 0;try{for(var V,H=Object.keys(j)[Symbol.iterator]();!(T=(V=H.next()).done);T=!0){var L=V.value;i[L]=j[L]}}catch(e){D=!0,U=e}finally{try{!T&&H.return&&H.return()}finally{if(D)throw U}}break;case"ECDSA":a=["sign"];case"ECDH":if(i={kty:"EC",ext:n,key_ops:a},"1.2.840.10045.2.1"!==_.privateKeyAlgorithm.algorithmId)return Promise.reject("Incorrect algorithm: "+_.privateKeyAlgorithm.algorithmId);var M=_.toJSON(),K=!0,q=!1,G=void 0;try{for(var F,J=Object.keys(M)[Symbol.iterator]();!(K=(F=J.next()).done);K=!0){var W=F.value;i[W]=M[W]}}catch(e){q=!0,G=e}finally{try{!K&&J.return&&J.return()}finally{if(q)throw G}}break;case"RSA-OAEP":if(i.kty="RSA",i.ext=n,i.key_ops=a,"safari"===this.name.toLowerCase())i.alg="RSA-OAEP";else switch(r.hash.name.toUpperCase()){case"SHA-1":i.alg="RSA-OAEP-1";break;case"SHA-256":i.alg="RSA-OAEP-256";break;case"SHA-384":i.alg="RSA-OAEP-384";break;case"SHA-512":i.alg="RSA-OAEP-512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}var Q=_.toJSON(),z=!0,Y=!1,Z=void 0;try{for(var $,ee=Object.keys(Q)[Symbol.iterator]();!(z=($=ee.next()).done);z=!0){var te=$.value;i[te]=Q[te]}}catch(e){Y=!0,Z=e}finally{try{!z&&ee.return&&ee.return()}finally{if(Y)throw Z}}break;default:return Promise.reject("Incorrect algorithm name: "+r.name.toUpperCase())}break;case"jwk":i=t;break;default:return Promise.reject("Incorrect format: "+e)}return"safari"===this.name.toLowerCase()&&i instanceof ArrayBuffer==!1&&(i=(0,u.stringToArrayBuffer)(JSON.stringify(i))),this.crypto.importKey("jwk",i,r,n,a)}},{key:"exportKey",value:function(e,t){var r=this.crypto.exportKey("jwk",t);switch("safari"===this.name.toLowerCase()&&(r=r.then(function(e){return JSON.parse((0,u.arrayBufferToString)(e))})),e.toLowerCase()){case"raw":return this.crypto.exportKey("raw",t);case"spki":r=r.then(function(e){var t=new m.default;try{t.fromJSON(e)}catch(e){return Promise.reject("Incorrect key data")}return t.toSchema().toBER(!1)});break;case"pkcs8":r=r.then(function(e){var t=new h.default;try{t.fromJSON(e)}catch(e){return Promise.reject("Incorrect key data")}return t.toSchema().toBER(!1)});break;case"jwk":break;default:return Promise.reject("Incorrect format: "+e)}return r}},{key:"convert",value:function(e,t,r,n,a,i){var o=this;switch(e.toLowerCase()){case"raw":switch(t.toLowerCase()){case"raw":return Promise.resolve(r);case"spki":return Promise.resolve().then(function(){return o.importKey("raw",r,n,a,i)}).then(function(e){return o.exportKey("spki",e)});case"pkcs8":return Promise.resolve().then(function(){return o.importKey("raw",r,n,a,i)}).then(function(e){return o.exportKey("pkcs8",e)});case"jwk":return Promise.resolve().then(function(){return o.importKey("raw",r,n,a,i)}).then(function(e){return o.exportKey("jwk",e)});default:return Promise.reject("Incorrect outputFormat: "+t)}case"spki":switch(t.toLowerCase()){case"raw":return Promise.resolve().then(function(){return o.importKey("spki",r,n,a,i)}).then(function(e){return o.exportKey("raw",e)});case"spki":return Promise.resolve(r);case"pkcs8":return Promise.reject("Impossible to convert between SPKI/PKCS8");case"jwk":return Promise.resolve().then(function(){return o.importKey("spki",r,n,a,i)}).then(function(e){return o.exportKey("jwk",e)});default:return Promise.reject("Incorrect outputFormat: "+t)}case"pkcs8":switch(t.toLowerCase()){case"raw":return Promise.resolve().then(function(){return o.importKey("pkcs8",r,n,a,i)}).then(function(e){return o.exportKey("raw",e)});case"spki":return Promise.reject("Impossible to convert between SPKI/PKCS8");case"pkcs8":return Promise.resolve(r);case"jwk":return Promise.resolve().then(function(){return o.importKey("pkcs8",r,n,a,i)}).then(function(e){return o.exportKey("jwk",e)});default:return Promise.reject("Incorrect outputFormat: "+t)}case"jwk":switch(t.toLowerCase()){case"raw":return Promise.resolve().then(function(){return o.importKey("jwk",r,n,a,i)}).then(function(e){return o.exportKey("raw",e)});case"spki":return Promise.resolve().then(function(){return o.importKey("jwk",r,n,a,i)}).then(function(e){return o.exportKey("spki",e)});case"pkcs8":return Promise.resolve().then(function(){return o.importKey("jwk",r,n,a,i)}).then(function(e){return o.exportKey("pkcs8",e)});case"jwk":return Promise.resolve(r);default:return Promise.reject("Incorrect outputFormat: "+t)}default:return Promise.reject("Incorrect inputFormat: "+e)}}},{key:"encrypt",value:function(){var e;return(e=this.crypto).encrypt.apply(e,arguments)}},{key:"decrypt",value:function(){var e;return(e=this.crypto).decrypt.apply(e,arguments)}},{key:"sign",value:function(){var e;return(e=this.crypto).sign.apply(e,arguments)}},{key:"verify",value:function(){var e;return(e=this.crypto).verify.apply(e,arguments)}},{key:"digest",value:function(){var e;return(e=this.crypto).digest.apply(e,arguments)}},{key:"generateKey",value:function(){var e;return(e=this.crypto).generateKey.apply(e,arguments)}},{key:"deriveKey",value:function(){var e;return(e=this.crypto).deriveKey.apply(e,arguments)}},{key:"deriveBits",value:function(){var e;return(e=this.crypto).deriveBits.apply(e,arguments)}},{key:"wrapKey",value:function(){var e;return(e=this.crypto).wrapKey.apply(e,arguments)}},{key:"unwrapKey",value:function(){var e;return(e=this.crypto).unwrapKey.apply(e,arguments)}}]),e}();t.default=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),l=a(s),u=r(3),c=r(10),m=n(c),f=r(24),h=n(f),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),"distributionPoint"in t&&(this.distributionPoint=(0,u.getParametersValue)(t,"distributionPoint",e.defaultValues("distributionPoint"))),"reasons"in t&&(this.reasons=(0,u.getParametersValue)(t,"reasons",e.defaultValues("reasons"))),"cRLIssuer"in t&&(this.cRLIssuer=(0,u.getParametersValue)(t,"cRLIssuer",e.defaultValues("cRLIssuer"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema({names:{distributionPoint:"distributionPoint",distributionPointNames:"distributionPointNames",reasons:"reasons",cRLIssuer:"cRLIssuer",cRLIssuerNames:"cRLIssuerNames"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for DistributionPoint");"distributionPoint"in r.result&&(0===r.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=Array.from(r.result.distributionPointNames,function(e){return new m.default({schema:e})})),1===r.result.distributionPoint.idBlock.tagNumber&&(r.result.distributionPoint.idBlock.tagClass=1,r.result.distributionPoint.idBlock.tagNumber=16,this.distributionPoint=new h.default({schema:r.result.distributionPoint}))),"reasons"in r.result&&(this.reasons=new l.BitString({valueHex:r.result.reasons.valueBlock.valueHex})),"cRLIssuer"in r.result&&(this.cRLIssuer=Array.from(r.result.cRLIssuerNames,function(e){return new m.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];if("distributionPoint"in this){var t=void 0;t=this.distributionPoint instanceof Array?new l.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,function(e){return e.toSchema()})}):new l.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.distributionPoint.toSchema()]}),e.push(new l.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}return"reasons"in this&&e.push(new l.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:this.reasons.valueBlock.valueHex})),"cRLIssuer"in this&&e.push(new l.Constructed({idBlock:{tagClass:3,tagNumber:2},value:Array.from(this.cRLIssuer,function(e){return e.toSchema()})})),new l.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"distributionPoint"in this&&(this.distributionPoint instanceof Array?e.distributionPoint=Array.from(this.distributionPoint,function(e){return e.toJSON()}):e.distributionPoint=this.distributionPoint.toJSON()),"reasons"in this&&(e.reasons=this.reasons.toJSON()),"cRLIssuer"in this&&(e.cRLIssuer=Array.from(this.cRLIssuer,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"distributionPoint":return[];case"reasons":return new l.BitString;case"cRLIssuer":return[];default:throw new Error("Invalid member name for DistributionPoint class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new l.Sequence({name:t.blockName||"",value:[new l.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new l.Choice({value:[new l.Constructed({name:t.distributionPoint||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new l.Repeated({name:t.distributionPointNames||"",value:m.default.schema()})]}),new l.Constructed({name:t.distributionPoint||"",optional:!0,idBlock:{tagClass:3,tagNumber:1},value:h.default.schema().valueBlock.value})]})]}),new l.Primitive({name:t.reasons||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new l.Constructed({name:t.cRLIssuer||"",optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[new l.Repeated({name:t.cRLIssuerNames||"",value:m.default.schema()})]})]})}}]),e}();t.default=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),l=a(s),u=r(3),c=r(44),m=n(c),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.version=(0,u.getParametersValue)(t,"version",e.defaultValues("version")),this.privateKey=(0,u.getParametersValue)(t,"privateKey",e.defaultValues("privateKey")),"namedCurve"in t&&(this.namedCurve=(0,u.getParametersValue)(t,"namedCurve",e.defaultValues("namedCurve"))),"publicKey"in t&&(this.publicKey=(0,u.getParametersValue)(t,"publicKey",e.defaultValues("publicKey"))),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return o(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema({names:{version:"version",privateKey:"privateKey",namedCurve:"namedCurve",publicKey:"publicKey"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ECPrivateKey");if(this.version=r.result.version.valueBlock.valueDec,this.privateKey=r.result.privateKey,"namedCurve"in r.result&&(this.namedCurve=r.result.namedCurve.valueBlock.toString()),"publicKey"in r.result){var n={schema:r.result.publicKey.valueBlock.valueHex};"namedCurve"in this&&(n.namedCurve=this.namedCurve),this.publicKey=new m.default(n)}}},{key:"toSchema",value:function(){var e=[new l.Integer({value:this.version}),this.privateKey];return"namedCurve"in this&&e.push(new l.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new l.ObjectIdentifier({value:this.namedCurve})]})),"publicKey"in this&&e.push(new l.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new l.BitString({valueHex:this.publicKey.toSchema().toBER(!1)})]})),new l.Sequence({value:e})}},{key:"toJSON",value:function(){if("namedCurve"in this==!1||e.compareWithDefault("namedCurve",this.namedCurve))throw new Error('Not enough information for making JSON: absent "namedCurve" value');var t="";switch(this.namedCurve){case"1.2.840.10045.3.1.7":t="P-256";break;case"1.3.132.0.34":t="P-384";break;case"1.3.132.0.35":t="P-521"}var r={crv:t,d:(0,u.toBase64)((0,u.arrayBufferToString)(this.privateKey.valueBlock.valueHex),!0,!0)};if("publicKey"in this){var n=this.publicKey.toJSON();r.x=n.x,r.y=n.y}return r}},{key:"fromJSON",value:function(e){var t=0;if(!("crv"in e))throw new Error('Absent mandatory parameter "crv"');switch(e.crv.toUpperCase()){case"P-256":this.namedCurve="1.2.840.10045.3.1.7",t=32;break;case"P-384":this.namedCurve="1.3.132.0.34",t=48;break;case"P-521":this.namedCurve="1.3.132.0.35",t=66}if(!("d"in e))throw new Error('Absent mandatory parameter "d"');this.privateKey=new l.OctetString({valueHex:(0,u.stringToArrayBuffer)((0,u.fromBase64)(e.d,!0)).slice(0,t)}),"x"in e&&"y"in e&&(this.publicKey=new m.default({json:e}))}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 1;case"privateKey":return new l.OctetString;case"namedCurve":return"";case"publicKey":return new m.default;default:throw new Error("Invalid member name for ECCPrivateKey class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues(t);case"privateKey":return r.isEqual(e.defaultValues(t));case"namedCurve":return""===r;case"publicKey":return m.default.compareWithDefault("namedCurve",r.namedCurve)&&m.default.compareWithDefault("x",r.x)&&m.default.compareWithDefault("y",r.y);default:throw new Error("Invalid member name for ECCPrivateKey class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new l.Sequence({name:t.blockName||"",value:[new l.Integer({name:t.version||""}),new l.OctetString({name:t.privateKey||""}),new l.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new l.ObjectIdentifier({name:t.namedCurve||""})]}),new l.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new l.BitString({name:t.publicKey||""})]})]})}}]),e}();t.default=f},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(2),s=n(o),l=r(3),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.keyPurposes=(0,l.getParametersValue)(t,"keyPurposes",e.defaultValues("keyPurposes")),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{keyPurposes:"keyPurposes"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ExtKeyUsage");this.keyPurposes=Array.from(r.result.keyPurposes,function(e){return e.valueBlock.toString()})}},{key:"toSchema",value:function(){return new s.Sequence({value:Array.from(this.keyPurposes,function(e){return new s.ObjectIdentifier({value:e})})})}},{key:"toJSON",value:function(){return{keyPurposes:Array.from(this.keyPurposes)}}}],[{key:"defaultValues",value:function(e){switch(e){case"keyPurposes":return[];default:throw new Error("Invalid member name for ExtKeyUsage class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Repeated({name:t.keyPurposes||"",value:new s.ObjectIdentifier})]})}}]),e}();t.default=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),l=a(s),u=r(3),c=r(45),m=n(c),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.extensions=(0,u.getParametersValue)(t,"extensions",e.defaultValues("extensions")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema({names:{extensions:"extensions"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for EXTENSIONS");this.extensions=Array.from(r.result.extensions,function(e){return new m.default({schema:e})})}},{key:"toSchema",value:function(){return new l.Sequence({value:Array.from(this.extensions,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{extensions:Array.from(this.extensions,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"extensions":return[];default:throw new Error("Invalid member name for Extensions class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,u.getParametersValue)(e,"names",{});return new l.Sequence({optional:t,name:r.blockName||"",value:[new l.Repeated({name:r.extensions||"",value:m.default.schema(r.extension||{})})]})}}]),e}();t.default=f},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),l=a(s),u=r(3),c=r(10),m=n(c),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.names=(0,u.getParametersValue)(t,"names",e.defaultValues("names")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for GeneralNames");this.names=Array.from(r.result.names,function(e){return new m.default({schema:e})})}},{key:"toSchema",value:function(){return new l.Sequence({value:Array.from(this.names,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{names:Array.from(this.names,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"names":return[];default:throw new Error("Invalid member name for GeneralNames class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new l.Sequence({value:[new l.Repeated({name:t.blockName||"names",value:m.default.schema()})]})}}]),e}();t.default=f},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),l=a(s),u=r(3),c=r(10),m=n(c),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.base=(0,u.getParametersValue)(t,"base",e.defaultValues("base")),this.minimum=(0,u.getParametersValue)(t,"minimum",e.defaultValues("minimum")),"maximum"in t&&(this.maximum=(0,u.getParametersValue)(t,"maximum",e.defaultValues("maximum"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema({names:{base:{names:{blockName:"base"}},minimum:"minimum",maximum:"maximum"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ");this.base=new m.default({schema:r.result.base}),"minimum"in r.result&&(r.result.minimum.valueBlock.isHexOnly?this.minimum=r.result.minimum:this.minimum=r.result.minimum.valueBlock.valueDec),"maximum"in r.result&&(r.result.maximum.valueBlock.isHexOnly?this.maximum=r.result.maximum:this.maximum=r.result.maximum.valueBlock.valueDec)}},{key:"toSchema",value:function(){var e=[];if(e.push(this.base.toSchema()),0!==this.minimum){var t=0;t=this.minimum instanceof l.Integer?this.minimum:new l.Integer({value:this.minimum}),e.push(new l.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if("maximum"in this){var r=0;r=this.maximum instanceof l.Integer?this.maximum:new l.Integer({value:this.maximum}),e.push(new l.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[r]}))}return new l.Sequence({value:e})}},{key:"toJSON",value:function(){var e={base:this.base.toJSON()};return 0!==this.minimum&&("number"==typeof this.minimum?e.minimum=this.minimum:e.minimum=this.minimum.toJSON()),"maximum"in this&&("number"==typeof this.maximum?e.maximum=this.maximum:e.maximum=this.maximum.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"base":return new m.default;case"minimum":return 0;case"maximum":return 0;default:throw new Error("Invalid member name for GeneralSubtree class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new l.Sequence({name:t.blockName||"",value:[m.default.schema(t.base||{}),new l.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new l.Integer({name:t.minimum||""})]}),new l.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new l.Integer({name:t.maximum||""})]})]})}}]),e}();t.default=f},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),l=a(s),u=r(3),c=r(76),m=n(c),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.accessDescriptions=(0,u.getParametersValue)(t,"accessDescriptions",e.defaultValues("accessDescriptions")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema({names:{accessDescriptions:"accessDescriptions"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for InfoAccess");this.accessDescriptions=Array.from(r.result.accessDescriptions,function(e){return new m.default({schema:e})})}},{key:"toSchema",value:function(){return new l.Sequence({value:Array.from(this.accessDescriptions,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{accessDescriptions:Array.from(this.accessDescriptions,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"accessDescriptions":return[];default:throw new Error("Invalid member name for InfoAccess class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new l.Sequence({name:t.blockName||"",value:[new l.Repeated({name:t.accessDescriptions||"",value:m.default.schema()})]})}}]),e}();t.default=f},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),l=a(s),u=r(3),c=r(10),m=n(c),f=r(24),h=n(f),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),"distributionPoint"in t&&(this.distributionPoint=(0,u.getParametersValue)(t,"distributionPoint",e.defaultValues("distributionPoint"))),this.onlyContainsUserCerts=(0,u.getParametersValue)(t,"onlyContainsUserCerts",e.defaultValues("onlyContainsUserCerts")),this.onlyContainsCACerts=(0,u.getParametersValue)(t,"onlyContainsCACerts",e.defaultValues("onlyContainsCACerts")),"onlySomeReasons"in t&&(this.onlySomeReasons=(0,u.getParametersValue)(t,"onlySomeReasons",e.defaultValues("onlySomeReasons"))),this.indirectCRL=(0,u.getParametersValue)(t,"indirectCRL",e.defaultValues("indirectCRL")),this.onlyContainsAttributeCerts=(0,u.getParametersValue)(t,"onlyContainsAttributeCerts",e.defaultValues("onlyContainsAttributeCerts")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema({names:{distributionPoint:"distributionPoint",distributionPointNames:"distributionPointNames",onlyContainsUserCerts:"onlyContainsUserCerts",onlyContainsCACerts:"onlyContainsCACerts",onlySomeReasons:"onlySomeReasons",indirectCRL:"indirectCRL",onlyContainsAttributeCerts:"onlyContainsAttributeCerts"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for IssuingDistributionPoint");if("distributionPoint"in r.result)switch(!0){case 0===r.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=Array.from(r.result.distributionPointNames,function(e){return new m.default({schema:e})});break;case 1===r.result.distributionPoint.idBlock.tagNumber:r.result.distributionPoint.idBlock.tagClass=1,r.result.distributionPoint.idBlock.tagNumber=16,this.distributionPoint=new h.default({schema:r.result.distributionPoint});break;default:throw new Error("Unknown tagNumber for distributionPoint: {$asn1.result.distributionPoint.idBlock.tagNumber}")}if("onlyContainsUserCerts"in r.result){var n=new Uint8Array(r.result.onlyContainsUserCerts.valueBlock.valueHex);this.onlyContainsUserCerts=0!==n[0]}if("onlyContainsCACerts"in r.result){var a=new Uint8Array(r.result.onlyContainsCACerts.valueBlock.valueHex);this.onlyContainsCACerts=0!==a[0]}if("onlySomeReasons"in r.result){var i=new Uint8Array(r.result.onlySomeReasons.valueBlock.valueHex);this.onlySomeReasons=i[0]}if("indirectCRL"in r.result){var o=new Uint8Array(r.result.indirectCRL.valueBlock.valueHex);this.indirectCRL=0!==o[0]}if("onlyContainsAttributeCerts"in r.result){var s=new Uint8Array(r.result.onlyContainsAttributeCerts.valueBlock.valueHex);this.onlyContainsAttributeCerts=0!==s[0]}}},{key:"toSchema",value:function(){var t=[];if("distributionPoint"in this){var r=void 0;this.distributionPoint instanceof Array?r=new l.Constructed({
idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,function(e){return e.toSchema()})}):(r=this.distributionPoint.toSchema(),r.idBlock.tagClass=3,r.idBlock.tagNumber=1),t.push(r)}if(this.onlyContainsUserCerts!==e.defaultValues("onlyContainsUserCerts")&&t.push(new l.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsCACerts!==e.defaultValues("onlyContainsCACerts")&&t.push(new l.Primitive({idBlock:{tagClass:3,tagNumber:2},valueHex:new Uint8Array([255]).buffer})),"onlySomeReasons"in this){var n=new ArrayBuffer(1),a=new Uint8Array(n);a[0]=this.onlySomeReasons,t.push(new l.Primitive({idBlock:{tagClass:3,tagNumber:3},valueHex:n}))}return this.indirectCRL!==e.defaultValues("indirectCRL")&&t.push(new l.Primitive({idBlock:{tagClass:3,tagNumber:4},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsAttributeCerts!==e.defaultValues("onlyContainsAttributeCerts")&&t.push(new l.Primitive({idBlock:{tagClass:3,tagNumber:5},valueHex:new Uint8Array([255]).buffer})),new l.Sequence({value:t})}},{key:"toJSON",value:function(){var t={};return"distributionPoint"in this&&(this.distributionPoint instanceof Array?t.distributionPoint=Array.from(this.distributionPoint,function(e){return e.toJSON()}):t.distributionPoint=this.distributionPoint.toJSON()),this.onlyContainsUserCerts!==e.defaultValues("onlyContainsUserCerts")&&(t.onlyContainsUserCerts=this.onlyContainsUserCerts),this.onlyContainsCACerts!==e.defaultValues("onlyContainsCACerts")&&(t.onlyContainsCACerts=this.onlyContainsCACerts),"onlySomeReasons"in this&&(t.onlySomeReasons=this.onlySomeReasons),this.indirectCRL!==e.defaultValues("indirectCRL")&&(t.indirectCRL=this.indirectCRL),this.onlyContainsAttributeCerts!==e.defaultValues("onlyContainsAttributeCerts")&&(t.onlyContainsAttributeCerts=this.onlyContainsAttributeCerts),t}}],[{key:"defaultValues",value:function(e){switch(e){case"distributionPoint":return[];case"onlyContainsUserCerts":return!1;case"onlyContainsCACerts":return!1;case"onlySomeReasons":return 0;case"indirectCRL":return!1;case"onlyContainsAttributeCerts":return!1;default:throw new Error("Invalid member name for IssuingDistributionPoint class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new l.Sequence({name:t.blockName||"",value:[new l.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new l.Choice({value:[new l.Constructed({name:t.distributionPoint||"",idBlock:{tagClass:3,tagNumber:0},value:[new l.Repeated({name:t.distributionPointNames||"",value:m.default.schema()})]}),new l.Constructed({name:t.distributionPoint||"",idBlock:{tagClass:3,tagNumber:1},value:h.default.schema().valueBlock.value})]})]}),new l.Primitive({name:t.onlyContainsUserCerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new l.Primitive({name:t.onlyContainsCACerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new l.Primitive({name:t.onlySomeReasons||"",optional:!0,idBlock:{tagClass:3,tagNumber:3}}),new l.Primitive({name:t.indirectCRL||"",optional:!0,idBlock:{tagClass:3,tagNumber:4}}),new l.Primitive({name:t.onlyContainsAttributeCerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:5}})]})}}]),e}();t.default=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),l=a(s),u=r(3),c=r(90),m=n(c),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),"permittedSubtrees"in t&&(this.permittedSubtrees=(0,u.getParametersValue)(t,"permittedSubtrees",e.defaultValues("permittedSubtrees"))),"excludedSubtrees"in t&&(this.excludedSubtrees=(0,u.getParametersValue)(t,"excludedSubtrees",e.defaultValues("excludedSubtrees"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema({names:{permittedSubtrees:"permittedSubtrees",excludedSubtrees:"excludedSubtrees"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for NameConstraints");"permittedSubtrees"in r.result&&(this.permittedSubtrees=Array.from(r.result.permittedSubtrees,function(e){return new m.default({schema:e})})),"excludedSubtrees"in r.result&&(this.excludedSubtrees=Array.from(r.result.excludedSubtrees,function(e){return new m.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return"permittedSubtrees"in this&&e.push(new l.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new l.Sequence({value:Array.from(this.permittedSubtrees,function(e){return e.toSchema()})})]})),"excludedSubtrees"in this&&e.push(new l.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new l.Sequence({value:Array.from(this.excludedSubtrees,function(e){return e.toSchema()})})]})),new l.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"permittedSubtrees"in this&&(e.permittedSubtrees=Array.from(this.permittedSubtrees,function(e){return e.toJSON()})),"excludedSubtrees"in this&&(e.excludedSubtrees=Array.from(this.excludedSubtrees,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"permittedSubtrees":return[];case"excludedSubtrees":return[];default:throw new Error("Invalid member name for NameConstraints class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new l.Sequence({name:t.blockName||"",value:[new l.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new l.Repeated({name:t.permittedSubtrees||"",value:m.default.schema()})]}),new l.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new l.Repeated({name:t.excludedSubtrees||"",value:m.default.schema()})]})]})}}]),e}();t.default=f},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(2),s=n(o),l=r(3),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.prime=(0,l.getParametersValue)(t,"prime",e.defaultValues("prime")),this.exponent=(0,l.getParametersValue)(t,"exponent",e.defaultValues("exponent")),this.coefficient=(0,l.getParametersValue)(t,"coefficient",e.defaultValues("coefficient")),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return i(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{prime:"prime",exponent:"exponent",coefficient:"coefficient"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OtherPrimeInfo");this.prime=r.result.prime.convertFromDER(),this.exponent=r.result.exponent.convertFromDER(),this.coefficient=r.result.coefficient.convertFromDER()}},{key:"toSchema",value:function(){return new s.Sequence({value:[this.prime.convertToDER(),this.exponent.convertToDER(),this.coefficient.convertToDER()]})}},{key:"toJSON",value:function(){return{r:(0,l.toBase64)((0,l.arrayBufferToString)(this.prime.valueBlock.valueHex),!0,!0),d:(0,l.toBase64)((0,l.arrayBufferToString)(this.exponent.valueBlock.valueHex),!0,!0),t:(0,l.toBase64)((0,l.arrayBufferToString)(this.coefficient.valueBlock.valueHex),!0,!0)}}},{key:"fromJSON",value:function(e){if(!("r"in e))throw new Error('Absent mandatory parameter "r"');if(this.prime=new s.Integer({valueHex:(0,l.stringToArrayBuffer)((0,l.fromBase64)(e.r,!0))}),!("d"in e))throw new Error('Absent mandatory parameter "d"');if(this.exponent=new s.Integer({valueHex:(0,l.stringToArrayBuffer)((0,l.fromBase64)(e.d,!0))}),!("t"in e))throw new Error('Absent mandatory parameter "t"');this.coefficient=new s.Integer({valueHex:(0,l.stringToArrayBuffer)((0,l.fromBase64)(e.t,!0))})}}],[{key:"defaultValues",value:function(e){switch(e){case"prime":return new s.Integer;case"exponent":return new s.Integer;case"coefficient":return new s.Integer;default:throw new Error("Invalid member name for OtherPrimeInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.prime||""}),new s.Integer({name:t.exponent||""}),new s.Integer({name:t.coefficient||""})]})}}]),e}();t.default=u},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(2),s=n(o),l=r(3),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),"requireExplicitPolicy"in t&&(this.requireExplicitPolicy=(0,l.getParametersValue)(t,"requireExplicitPolicy",e.defaultValues("requireExplicitPolicy"))),"inhibitPolicyMapping"in t&&(this.inhibitPolicyMapping=(0,l.getParametersValue)(t,"inhibitPolicyMapping",e.defaultValues("inhibitPolicyMapping"))),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{requireExplicitPolicy:"requireExplicitPolicy",inhibitPolicyMapping:"inhibitPolicyMapping"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyConstraints");if("requireExplicitPolicy"in r.result){var n=r.result.requireExplicitPolicy;n.idBlock.tagClass=1,n.idBlock.tagNumber=2;var a=n.toBER(!1),i=s.fromBER(a);this.requireExplicitPolicy=i.result.valueBlock.valueDec}if("inhibitPolicyMapping"in r.result){var o=r.result.inhibitPolicyMapping;o.idBlock.tagClass=1,o.idBlock.tagNumber=2;var l=o.toBER(!1),u=s.fromBER(l);this.inhibitPolicyMapping=u.result.valueBlock.valueDec}}},{key:"toSchema",value:function(){var e=[];if("requireExplicitPolicy"in this){var t=new s.Integer({value:this.requireExplicitPolicy});t.idBlock.tagClass=3,t.idBlock.tagNumber=0,e.push(t)}if("inhibitPolicyMapping"in this){var r=new s.Integer({value:this.inhibitPolicyMapping});r.idBlock.tagClass=3,r.idBlock.tagNumber=1,e.push(r)}return new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"requireExplicitPolicy"in this&&(e.requireExplicitPolicy=this.requireExplicitPolicy),"inhibitPolicyMapping"in this&&(e.inhibitPolicyMapping=this.inhibitPolicyMapping),e}}],[{key:"defaultValues",value:function(e){switch(e){case"requireExplicitPolicy":return 0;case"inhibitPolicyMapping":return 0;default:throw new Error("Invalid member name for PolicyConstraints class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Primitive({name:t.requireExplicitPolicy||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new s.Primitive({name:t.inhibitPolicyMapping||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}}]),e}();t.default=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),l=a(s),u=r(3),c=r(99),m=n(c),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.policyIdentifier=(0,u.getParametersValue)(t,"policyIdentifier",e.defaultValues("policyIdentifier")),"policyQualifiers"in t&&(this.policyQualifiers=(0,u.getParametersValue)(t,"policyQualifiers",e.defaultValues("policyQualifiers"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema({names:{policyIdentifier:"policyIdentifier",policyQualifiers:"policyQualifiers"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyInformation");this.policyIdentifier=r.result.policyIdentifier.valueBlock.toString(),"policyQualifiers"in r.result&&(this.policyQualifiers=Array.from(r.result.policyQualifiers,function(e){return new m.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new l.ObjectIdentifier({value:this.policyIdentifier})),"policyQualifiers"in this&&e.push(new l.Sequence({value:Array.from(this.policyQualifiers,function(e){return e.toSchema()})})),new l.Sequence({value:e})}},{key:"toJSON",value:function(){var e={policyIdentifier:this.policyIdentifier};return"policyQualifiers"in this&&(e.policyQualifiers=Array.from(this.policyQualifiers,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"policyIdentifier":return"";case"policyQualifiers":return[];default:throw new Error("Invalid member name for PolicyInformation class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new l.Sequence({name:t.blockName||"",value:[new l.ObjectIdentifier({name:t.policyIdentifier||""}),new l.Sequence({optional:!0,value:[new l.Repeated({name:t.policyQualifiers||"",value:m.default.schema()})]})]})}}]),e}();t.default=f},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(2),s=n(o),l=r(3),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.issuerDomainPolicy=(0,l.getParametersValue)(t,"issuerDomainPolicy",e.defaultValues("issuerDomainPolicy")),this.subjectDomainPolicy=(0,l.getParametersValue)(t,"subjectDomainPolicy",e.defaultValues("subjectDomainPolicy")),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{issuerDomainPolicy:"issuerDomainPolicy",subjectDomainPolicy:"subjectDomainPolicy"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyMapping");this.issuerDomainPolicy=r.result.issuerDomainPolicy.valueBlock.toString(),this.subjectDomainPolicy=r.result.subjectDomainPolicy.valueBlock.toString()}},{key:"toSchema",value:function(){return new s.Sequence({value:[new s.ObjectIdentifier({value:this.issuerDomainPolicy}),new s.ObjectIdentifier({value:this.subjectDomainPolicy})]})}},{key:"toJSON",value:function(){return{issuerDomainPolicy:this.issuerDomainPolicy,subjectDomainPolicy:this.subjectDomainPolicy}}}],[{key:"defaultValues",value:function(e){switch(e){case"issuerDomainPolicy":return"";case"subjectDomainPolicy":return"";default:throw new Error("Invalid member name for PolicyMapping class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.issuerDomainPolicy||""}),new s.ObjectIdentifier({name:t.subjectDomainPolicy||""})]})}}]),e}();t.default=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),l=a(s),u=r(3),c=r(97),m=n(c),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.mappings=(0,u.getParametersValue)(t,"mappings",e.defaultValues("mappings")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema({names:{mappings:"mappings"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyMappings");this.mappings=Array.from(r.result.mappings,function(e){return new m.default({schema:e})})}},{key:"toSchema",value:function(){return new l.Sequence({value:Array.from(this.mappings,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{mappings:Array.from(this.mappings,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"mappings":return[];default:throw new Error("Invalid member name for PolicyMappings class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new l.Sequence({name:t.blockName||"",value:[new l.Repeated({name:t.mappings||"",value:m.default.schema()})]})}}]),e}();t.default=f},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(2),s=n(o),l=r(3),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.policyQualifierId=(0,l.getParametersValue)(t,"policyQualifierId",e.defaultValues("policyQualifierId")),this.qualifier=(0,l.getParametersValue)(t,"qualifier",e.defaultValues("qualifier")),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{policyQualifierId:"policyQualifierId",qualifier:"qualifier"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyQualifierInfo");this.policyQualifierId=r.result.policyQualifierId.valueBlock.toString(),this.qualifier=r.result.qualifier}},{key:"toSchema",value:function(){return new s.Sequence({value:[new s.ObjectIdentifier({value:this.policyQualifierId}),this.qualifier]})}},{key:"toJSON",value:function(){return{policyQualifierId:this.policyQualifierId,qualifier:this.qualifier.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"policyQualifierId":return"";case"qualifier":return new s.Any;default:throw new Error("Invalid member name for PolicyQualifierInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.policyQualifierId||""}),new s.Any({name:t.qualifier||""})]})}}]),e}();t.default=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),l=a(s),u=r(3),c=r(17),m=n(c),f=r(43),h=n(f),p=r(86),d=n(p),v=r(102),y=n(v),g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.version=(0,u.getParametersValue)(t,"version",e.defaultValues("version")),this.privateKeyAlgorithm=(0,u.getParametersValue)(t,"privateKeyAlgorithm",e.defaultValues("privateKeyAlgorithm")),this.privateKey=(0,u.getParametersValue)(t,"privateKey",e.defaultValues("privateKey")),"attributes"in t&&(this.attributes=(0,u.getParametersValue)(t,"attributes",e.defaultValues("attributes"))),"parsedKey"in t&&(this.parsedKey=(0,u.getParametersValue)(t,"parsedKey",e.defaultValues("parsedKey"))),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return o(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema({names:{version:"version",privateKeyAlgorithm:{names:{blockName:"privateKeyAlgorithm"}},privateKey:"privateKey",attributes:"attributes"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PKCS8");switch(this.version=r.result.version.valueBlock.valueDec,this.privateKeyAlgorithm=new m.default({schema:r.result.privateKeyAlgorithm}),this.privateKey=r.result.privateKey,"attributes"in r.result&&(this.attributes=Array.from(r.result.attributes,function(e){return new h.default({schema:e})})),this.privateKeyAlgorithm.algorithmId){case"1.2.840.113549.1.1.1":var n=l.fromBER(this.privateKey.valueBlock.valueHex);n.offset!==-1&&(this.parsedKey=new y.default({schema:n.result}));break;case"1.2.840.10045.2.1":if("algorithmParams"in this.privateKeyAlgorithm&&this.privateKeyAlgorithm.algorithmParams instanceof l.ObjectIdentifier){var a=l.fromBER(this.privateKey.valueBlock.valueHex);a.offset!==-1&&(this.parsedKey=new d.default({namedCurve:this.privateKeyAlgorithm.algorithmParams.valueBlock.toString(),schema:a.result}))}}}},{key:"toSchema",value:function(){var e=[new l.Integer({value:this.version}),this.privateKeyAlgorithm.toSchema(),this.privateKey];return"attributes"in this&&e.push(new l.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,function(e){return e.toSchema()})})),new l.Sequence({value:e})}},{key:"toJSON",value:function(){if("parsedKey"in this==!1){var e={version:this.version,privateKeyAlgorithm:this.privateKeyAlgorithm.toJSON(),privateKey:this.privateKey.toJSON()};return"attributes"in this&&(e.attributes=Array.from(this.attributes,function(e){return e.toJSON()})),e}var t={};switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.10045.2.1":t.kty="EC";break;case"1.2.840.113549.1.1.1":t.kty="RSA"}var r=this.parsedKey.toJSON(),n=!0,a=!1,i=void 0;try{for(var o,s=Object.keys(r)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;t[l]=r[l]}}catch(e){a=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}return t}},{key:"fromJSON",value:function(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new d.default({json:e}),this.privateKeyAlgorithm=new m.default({algorithmId:"1.2.840.10045.2.1",algorithmParams:new l.ObjectIdentifier({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new y.default({json:e}),this.privateKeyAlgorithm=new m.default({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new l.Null});break;default:throw new Error('Invalid value for "kty" parameter: '+e.kty)}this.privateKey=new l.OctetString({valueHex:this.parsedKey.toSchema().toBER(!1)})}}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"privateKeyAlgorithm":return new m.default;case"privateKey":return new l.OctetString;case"attributes":return[];default:throw new Error("Invalid member name for PrivateKeyInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new l.Sequence({name:t.blockName||"",value:[new l.Integer({name:t.version||""}),m.default.schema(t.privateKeyAlgorithm||{}),new l.OctetString({name:t.privateKey||""}),new l.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new l.Repeated({name:t.attributes||"",value:h.default.schema()})]})]})}}]),e}();t.default=g},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(2),s=n(o),l=r(3),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),"notBefore"in t&&(this.notBefore=(0,l.getParametersValue)(t,"notBefore",e.defaultValues("notBefore"))),"notAfter"in t&&(this.notAfter=(0,l.getParametersValue)(t,"notAfter",e.defaultValues("notAfter"))),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{notBefore:"notBefore",notAfter:"notAfter"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PrivateKeyUsagePeriod");if("notBefore"in r.result){var n=new s.GeneralizedTime;n.fromBuffer(r.result.notBefore.valueBlock.valueHex),this.notBefore=n.toDate()}if("notAfter"in r.result){var a=new s.GeneralizedTime({valueHex:r.result.notAfter.valueBlock.valueHex});a.fromBuffer(r.result.notAfter.valueBlock.valueHex),this.notAfter=a.toDate()}}},{key:"toSchema",value:function(){var e=[];return"notBefore"in this&&e.push(new s.Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:new s.GeneralizedTime({valueDate:this.notBefore}).valueBlock.valueHex})),"notAfter"in this&&e.push(new s.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:new s.GeneralizedTime({valueDate:this.notAfter}).valueBlock.valueHex})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"notBefore"in this&&(e.notBefore=this.notBefore),"notAfter"in this&&(e.notAfter=this.notAfter),e}}],[{key:"defaultValues",value:function(e){switch(e){case"notBefore":return new Date;case"notAfter":return new Date;default:throw new Error("Invalid member name for PrivateKeyUsagePeriod class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Primitive({name:t.notBefore||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new s.Primitive({name:t.notAfter||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}}]),e}();t.default=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),l=a(s),u=r(3),c=r(94),m=n(c),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.version=(0,u.getParametersValue)(t,"version",e.defaultValues("version")),this.modulus=(0,u.getParametersValue)(t,"modulus",e.defaultValues("modulus")),this.publicExponent=(0,u.getParametersValue)(t,"publicExponent",e.defaultValues("publicExponent")),this.privateExponent=(0,u.getParametersValue)(t,"privateExponent",e.defaultValues("privateExponent")),this.prime1=(0,u.getParametersValue)(t,"prime1",e.defaultValues("prime1")),this.prime2=(0,u.getParametersValue)(t,"prime2",e.defaultValues("prime2")),this.exponent1=(0,u.getParametersValue)(t,"exponent1",e.defaultValues("exponent1")),this.exponent2=(0,u.getParametersValue)(t,"exponent2",e.defaultValues("exponent2")),this.coefficient=(0,u.getParametersValue)(t,"coefficient",e.defaultValues("coefficient")),"otherPrimeInfos"in t&&(this.otherPrimeInfos=(0,u.getParametersValue)(t,"otherPrimeInfos",e.defaultValues("otherPrimeInfos"))),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return o(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema({names:{version:"version",modulus:"modulus",publicExponent:"publicExponent",privateExponent:"privateExponent",prime1:"prime1",prime2:"prime2",exponent1:"exponent1",exponent2:"exponent2",coefficient:"coefficient",otherPrimeInfo:{names:{blockName:"otherPrimeInfos"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RSAPrivateKey");this.version=r.result.version.valueBlock.valueDec,this.modulus=r.result.modulus.convertFromDER(256),this.publicExponent=r.result.publicExponent,this.privateExponent=r.result.privateExponent.convertFromDER(256),this.prime1=r.result.prime1.convertFromDER(128),this.prime2=r.result.prime2.convertFromDER(128),this.exponent1=r.result.exponent1.convertFromDER(128),this.exponent2=r.result.exponent2.convertFromDER(128),this.coefficient=r.result.coefficient.convertFromDER(128),"otherPrimeInfos"in r.result&&(this.otherPrimeInfos=Array.from(r.result.otherPrimeInfos,function(e){return new m.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new l.Integer({value:this.version})),e.push(this.modulus.convertToDER()),e.push(this.publicExponent),e.push(this.privateExponent.convertToDER()),e.push(this.prime1.convertToDER()),e.push(this.prime2.convertToDER()),e.push(this.exponent1.convertToDER()),e.push(this.exponent2.convertToDER()),e.push(this.coefficient.convertToDER()),"otherPrimeInfos"in this&&e.push(new l.Sequence({value:Array.from(this.otherPrimeInfos,function(e){return e.toSchema()})})),new l.Sequence({value:e})}},{key:"toJSON",value:function(){var e={n:(0,u.toBase64)((0,u.arrayBufferToString)(this.modulus.valueBlock.valueHex),!0,!0),e:(0,u.toBase64)((0,u.arrayBufferToString)(this.publicExponent.valueBlock.valueHex),!0,!0),d:(0,u.toBase64)((0,u.arrayBufferToString)(this.privateExponent.valueBlock.valueHex),!0,!0),
p:(0,u.toBase64)((0,u.arrayBufferToString)(this.prime1.valueBlock.valueHex),!0,!0),q:(0,u.toBase64)((0,u.arrayBufferToString)(this.prime2.valueBlock.valueHex),!0,!0),dp:(0,u.toBase64)((0,u.arrayBufferToString)(this.exponent1.valueBlock.valueHex),!0,!0),dq:(0,u.toBase64)((0,u.arrayBufferToString)(this.exponent2.valueBlock.valueHex),!0,!0),qi:(0,u.toBase64)((0,u.arrayBufferToString)(this.coefficient.valueBlock.valueHex),!0,!0)};return"otherPrimeInfos"in this&&(e.oth=Array.from(this.otherPrimeInfos,function(e){return e.toJSON()})),e}},{key:"fromJSON",value:function(e){if(!("n"in e))throw new Error('Absent mandatory parameter "n"');if(this.modulus=new l.Integer({valueHex:(0,u.stringToArrayBuffer)((0,u.fromBase64)(e.n,!0,!0))}),!("e"in e))throw new Error('Absent mandatory parameter "e"');if(this.publicExponent=new l.Integer({valueHex:(0,u.stringToArrayBuffer)((0,u.fromBase64)(e.e,!0,!0))}),!("d"in e))throw new Error('Absent mandatory parameter "d"');if(this.privateExponent=new l.Integer({valueHex:(0,u.stringToArrayBuffer)((0,u.fromBase64)(e.d,!0,!0))}),!("p"in e))throw new Error('Absent mandatory parameter "p"');if(this.prime1=new l.Integer({valueHex:(0,u.stringToArrayBuffer)((0,u.fromBase64)(e.p,!0,!0))}),!("q"in e))throw new Error('Absent mandatory parameter "q"');if(this.prime2=new l.Integer({valueHex:(0,u.stringToArrayBuffer)((0,u.fromBase64)(e.q,!0,!0))}),!("dp"in e))throw new Error('Absent mandatory parameter "dp"');if(this.exponent1=new l.Integer({valueHex:(0,u.stringToArrayBuffer)((0,u.fromBase64)(e.dp,!0,!0))}),!("dq"in e))throw new Error('Absent mandatory parameter "dq"');if(this.exponent2=new l.Integer({valueHex:(0,u.stringToArrayBuffer)((0,u.fromBase64)(e.dq,!0,!0))}),!("qi"in e))throw new Error('Absent mandatory parameter "qi"');this.coefficient=new l.Integer({valueHex:(0,u.stringToArrayBuffer)((0,u.fromBase64)(e.qi,!0,!0))}),"oth"in e&&(this.otherPrimeInfos=Array.from(e.oth,function(e){return new m.default({json:e})}))}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"modulus":return new l.Integer;case"publicExponent":return new l.Integer;case"privateExponent":return new l.Integer;case"prime1":return new l.Integer;case"prime2":return new l.Integer;case"exponent1":return new l.Integer;case"exponent2":return new l.Integer;case"coefficient":return new l.Integer;case"otherPrimeInfos":return[];default:throw new Error("Invalid member name for RSAPrivateKey class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new l.Sequence({name:t.blockName||"",value:[new l.Integer({name:t.version||""}),new l.Integer({name:t.modulus||""}),new l.Integer({name:t.publicExponent||""}),new l.Integer({name:t.privateExponent||""}),new l.Integer({name:t.prime1||""}),new l.Integer({name:t.prime2||""}),new l.Integer({name:t.exponent1||""}),new l.Integer({name:t.exponent2||""}),new l.Integer({name:t.coefficient||""}),new l.Sequence({optional:!0,value:[new l.Repeated({name:t.otherPrimeInfosName||"",value:m.default.schema(t.otherPrimeInfo||{})})]})]})}}]),e}();t.default=f},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(2),s=n(o),l=r(3),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.modulus=(0,l.getParametersValue)(t,"modulus",e.defaultValues("modulus")),this.publicExponent=(0,l.getParametersValue)(t,"publicExponent",e.defaultValues("publicExponent")),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return i(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{modulus:"modulus",publicExponent:"publicExponent"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RSAPublicKey");this.modulus=r.result.modulus.convertFromDER(256),this.publicExponent=r.result.publicExponent}},{key:"toSchema",value:function(){return new s.Sequence({value:[this.modulus.convertToDER(),this.publicExponent]})}},{key:"toJSON",value:function(){return{n:(0,l.toBase64)((0,l.arrayBufferToString)(this.modulus.valueBlock.valueHex),!0,!0),e:(0,l.toBase64)((0,l.arrayBufferToString)(this.publicExponent.valueBlock.valueHex),!0,!0)}}},{key:"fromJSON",value:function(e){if(!("n"in e))throw new Error('Absent mandatory parameter "n"');if(this.modulus=new s.Integer({valueHex:(0,l.stringToArrayBuffer)((0,l.fromBase64)(e.n,!0)).slice(0,256)}),!("e"in e))throw new Error('Absent mandatory parameter "e"');this.publicExponent=new s.Integer({valueHex:(0,l.stringToArrayBuffer)((0,l.fromBase64)(e.e,!0)).slice(0,3)})}}],[{key:"defaultValues",value:function(e){switch(e){case"modulus":return new s.Integer;case"publicExponent":return new s.Integer;default:throw new Error("Invalid member name for RSAPublicKey class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.modulus||""}),new s.Integer({name:t.publicExponent||""})]})}}]),e}();t.default=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),l=a(s),u=r(3),c=r(43),m=n(c),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.attributes=(0,u.getParametersValue)(t,"attributes",e.defaultValues("attributes")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema({names:{attributes:"attributes"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for SubjectDirectoryAttributes");this.attributes=Array.from(r.result.attributes,function(e){return new m.default({schema:e})})}},{key:"toSchema",value:function(){return new l.Sequence({value:Array.from(this.attributes,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{attributes:Array.from(this.attributes,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"attributes":return[];default:throw new Error("Invalid member name for SubjectDirectoryAttributes class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new l.Sequence({name:t.blockName||"",value:[new l.Repeated({name:t.attributes||"",value:m.default.schema()})]})}}]),e}();t.default=f},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(2),s=n(o),l=r(3),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.type=(0,l.getParametersValue)(t,"type",e.defaultValues("type")),this.value=(0,l.getParametersValue)(t,"value",e.defaultValues("value")),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{utcTimeName:"utcTimeName",generalTimeName:"generalTimeName"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for TIME");"utcTimeName"in r.result&&(this.type=0,this.value=r.result.utcTimeName.toDate()),"generalTimeName"in r.result&&(this.type=1,this.value=r.result.generalTimeName.toDate())}},{key:"toSchema",value:function(){var e={};return 0===this.type&&(e=new s.UTCTime({valueDate:this.value})),1===this.type&&(e=new s.GeneralizedTime({valueDate:this.value})),e}},{key:"toJSON",value:function(){return{type:this.type,value:this.value}}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return 0;case"value":return new Date(0,0,0);default:throw new Error("Invalid member name for Time class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,l.getParametersValue)(e,"names",{});return new s.Choice({optional:t,value:[new s.UTCTime({name:r.utcTimeName||""}),new s.GeneralizedTime({name:r.generalTimeName||""})]})}}]),e}();t.default=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){e.done?a(e.value):new r(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t)).next())})},i=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,i&&(o=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],i=0}finally{a=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var a,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return{next:r(0),throw:r(1),return:r(2)}},o=r(1),s=r(9),l=r(55),u="http://uri.etsi.org/01903#SignedProperties",c=function(e){function t(t){var r=e.call(this,t)||this;return r.properties=null,r.CreateQualyingProperties(),r}return n(t,e),Object.defineProperty(t.prototype,"Properties",{get:function(){return this.properties},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"SignedProperties",{get:function(){if(!this.Properties)throw new o.XmlError(o.XE.XML_EXCEPTION,"Properties is empty");return this.Properties.SignedProperties},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"UnsignedProperties",{get:function(){if(!this.Properties)throw new o.XmlError(o.XE.XML_EXCEPTION,"Properties is empty");return this.Properties.UnsignedProperties},enumerable:!0,configurable:!0}),t.prototype.LoadXml=function(t){e.prototype.LoadXml.call(this,t);var r=null;this.XmlSignature.ObjectList.Some(function(e){if(e.Element)for(var t=0;t<e.Element.childNodes.length;t++){var n=e.Element.childNodes.item(t);if(n.nodeType===o.XmlNodeType.Element&&n.localName===l.XmlXades.ElementNames.QualifyingProperties)return r=l.QualifyingProperties.LoadXml(n),!0}return!1}),this.properties=r},t.prototype.CreateQualyingProperties=function(){if(this.Properties)throw new o.XmlError(o.XE.XML_EXCEPTION,"Cannot create QualifyingProperties cause currensignature has got one. You must create CounterSignature");var e=s.Application.crypto.getRandomValues(new Uint8Array(6)),t=o.Convert.ToHex(e);this.XmlSignature.Id="id-"+t;var r=new l.DataObject;r.QualifyingProperties.Target="#"+this.XmlSignature.Id,r.QualifyingProperties.SignedProperties.Id="xades-"+this.XmlSignature.Id,this.properties=r.QualifyingProperties,this.XmlSignature.ObjectList.Add(r)},t.prototype.ApplySignOptions=function(t,r,n,l){return a(this,void 0,void 0,function(){var a,c,m,f;return i(this,function(i){switch(i.label){case 0:return[4,e.prototype.ApplySignOptions.call(this,t,r,n,l)];case 1:return i.sent(),this.Properties?(a=this.Properties.SignedProperties.SignedSignatureProperties,a.SigningTime=new Date,c=o.assign({},r,n.algorithm),m=c.hash,f=new s.Reference,f.Type=u,f.Uri="#"+this.Properties.SignedProperties.Id,f.DigestMethod.Algorithm=s.CryptoConfig.GetHashAlgorithm(m).namespaceURI,t.SignedInfo.References.Add(f),[4,this.ApplySigningCertificate(l.signingCertificate)]):[3,3];case 2:i.sent(),this.ApplySignaturePolicyIdentifier(l.policy),this.ApplySignatureProductionPlace(l.productionPlace),this.ApplySignerRoles(l.signerRole),i.label=3;case 3:return[2]}})})},t.prototype.Sign=function(t,r,n,a){return e.prototype.Sign.apply(this,arguments)},t.prototype.ApplySigningCertificate=function(e){return a(this,void 0,void 0,function(){var t,r,n,a,u,c,m;return i(this,function(i){switch(i.label){case 0:if(!this.Properties||!e)return[3,2];if(t=o.Convert.FromBase64(e),r=new s.X509Certificate(t),n=this.Properties.SignedProperties.SignedSignatureProperties,n.SigningCertificate.Count)throw new o.XmlError(o.XE.XML_EXCEPTION,"Signature can contain only one SigningCertificate");return a=new l.Cert,a.IssuerSerial.X509IssuerName=r.Issuer,a.IssuerSerial.X509SerialNumber=r.SerialNumber,u=s.CryptoConfig.GetHashAlgorithm("SHA-256"),a.CertDigest.DigestMethod.Algorithm=u.namespaceURI,c=a.CertDigest,m=Uint8Array.bind,[4,r.Thumbprint(u.algorithm.name)];case 1:c.DigestValue=new(m.apply(Uint8Array,[void 0,i.sent()])),this.Properties.SignedProperties.SignedSignatureProperties.SigningCertificate.Add(a),i.label=2;case 2:return[2]}})})},t.prototype.ApplySignaturePolicyIdentifier=function(e){if(this.Properties){var t=this.Properties.SignedProperties.SignedSignatureProperties;e||(t.SignaturePolicyIdentifier.SignaturePolicyImplied=!0)}},t.prototype.ApplySignatureProductionPlace=function(e){if(this.Properties&&e){var t=this.Properties.SignedProperties.SignedSignatureProperties;e.city&&(t.SignatureProductionPlace.City=e.city),e.code&&(t.SignatureProductionPlace.PostalCode=e.code),e.country&&(t.SignatureProductionPlace.CountryName=e.country),e.state&&(t.SignatureProductionPlace.StateOrProvince=e.state)}},t.prototype.ApplySignerRoles=function(e){if(this.Properties&&e){var t=this.Properties.SignedProperties.SignedSignatureProperties;e.claimed&&e.claimed.forEach(function(e){var r=new l.ClaimedRole;r.Value=e,t.SignerRole.ClaimedRoles.Add(r)}),e.certified&&e.certified.forEach(function(e){var r=new l.CertifiedRole;r.Encoding="der",r.Value=o.Convert.FromBase64(e),t.SignerRole.CertifiedRoles.Add(r)})}},t.prototype.VerifySigningCertificate=function(){return a(this,void 0,void 0,function(){var e,t,r,n,a,l,u,c,m,f,h,p,d,v;return i(this,function(i){switch(i.label){case 0:if(e=null,!this.XmlSignature||!this.Properties)return[3,7];if(t=this.Properties.SignedProperties.SignedSignatureProperties,1!==t.SigningCertificate.Count)throw new o.XmlError(o.XE.XML_EXCEPTION,"Signature has got wrong amount of SigningCertificate, MUST be one");r=s.CryptoConfig.GetHashAlgorithm("SHA-256"),n=t.SigningCertificate.Item(0),a=o.Convert.ToBase64(n.CertDigest.DigestValue),l=this.XmlSignature.KeyInfo,u=0,i.label=1;case 1:if(u<l.Count,!!e)return[3,6];if(c=l.Item(u),!(c instanceof s.KeyInfoX509Data))return[3,5];m=c.Certificates,f=0,i.label=2;case 2:return f<m.length,e?[3,5]:(h=m[f])?(d=Uint8Array.bind,[4,h.Thumbprint(r.algorithm)]):[3,4];case 3:p=new(d.apply(Uint8Array,[void 0,i.sent()])),v=o.Convert.ToBase64(p),v===a&&(e=h),i.label=4;case 4:return f++,[3,2];case 5:return u++,[3,1];case 6:if(!e||e.Issuer!==n.IssuerSerial.X509IssuerName||e.SerialNumber!==n.IssuerSerial.X509SerialNumber)throw new o.XmlError(o.XE.XML_EXCEPTION,"SigningCertificate not found");i.label=7;case 7:return[2,e]}})})},t}(s.SignedXml);t.SignedXml=c},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(9),s=r(56),l=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(o.DataObject);a([i.XmlChildElement({parser:s.QualifyingProperties})],l.prototype,"QualifyingProperties",void 0),l=a([i.XmlElement({localName:o.XmlSignature.ElementNames.Object})],l),t.DataObject=l},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(9),s=r(4),l=r(5),u=r(34),c=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.XadesObject);a([i.XmlAttribute({localName:s.XmlXades.AttributeNames.Id,defaultValue:""})],c.prototype,"Id",void 0),a([i.XmlChildElement({parser:u.ReferenceInfos,noRoot:!0})],c.prototype,"ReferenceInfo",void 0),a([i.XmlChildElement({parser:o.CanonicalizationMethod})],c.prototype,"CanonicalizationMethod",void 0),a([i.XmlChildElement({parser:u.EncapsulatedTimeStampCollection,noRoot:!0})],c.prototype,"EncapsulatedTimeStamp",void 0),a([i.XmlChildElement({parser:u.XMLTimeStampCollection,noRoot:!0})],c.prototype,"XMLTimeStamp",void 0),c=a([i.XmlElement({localName:s.XmlXades.ElementNames.OtherTimeStamp})],c),t.OtherTimeStamp=c},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(4),s=r(5),l=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(s.XadesObject);a([i.XmlAttribute({localName:o.XmlXades.AttributeNames.URI,required:!0})],l.prototype,"Uri",void 0),a([i.XmlAttribute({localName:o.XmlXades.AttributeNames.Id,defaultValue:""})],l.prototype,"Id",void 0),l=a([i.XmlElement({localName:o.XmlXades.ElementNames.QualifyingPropertiesReference})],l),t.QualifyingPropertiesReference=l},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=r(21),i=r(23);t.ECDSA="ECDSA",t.ECDSA_SHA1_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha1",t.ECDSA_SHA256_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha256",t.ECDSA_SHA384_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha384",t.ECDSA_SHA512_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha512";var o=function(e){function r(){var r=e.apply(this,arguments)||this;return r.algorithm={name:t.ECDSA,hash:{name:i.SHA1}},r.namespaceURI=t.ECDSA_SHA1_NAMESPACE,r}return n(r,e),r}(a.SignatureAlgorithm);t.EcdsaSha1=o;var s=function(e){function r(){var r=e.apply(this,arguments)||this;return r.algorithm={name:t.ECDSA,hash:{name:i.SHA256}},r.namespaceURI=t.ECDSA_SHA256_NAMESPACE,r}return n(r,e),r}(a.SignatureAlgorithm);t.EcdsaSha256=s;var l=function(e){function r(){var r=e.apply(this,arguments)||this;return r.algorithm={name:t.ECDSA,hash:{name:i.SHA384}},r.namespaceURI=t.ECDSA_SHA384_NAMESPACE,r}return n(r,e),r}(a.SignatureAlgorithm);t.EcdsaSha384=l;var u=function(e){function r(){var r=e.apply(this,arguments)||this;return r.algorithm={name:t.ECDSA,hash:{name:i.SHA512}},r.namespaceURI=t.ECDSA_SHA512_NAMESPACE,r}return n(r,e),r}(a.SignatureAlgorithm);t.EcdsaSha512=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=r(21),i=r(23);t.HMAC="HMAC",t.HMAC_SHA1_NAMESPACE="http://www.w3.org/2000/09/xmldsig#hmac-sha1",t.HMAC_SHA256_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#hmac-sha256",t.HMAC_SHA384_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#hmac-sha384",t.HMAC_SHA512_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#hmac-sha512";var o=function(e){function r(){var r=e.apply(this,arguments)||this;return r.algorithm={name:t.HMAC,hash:{name:i.SHA1}},r.namespaceURI=t.HMAC_SHA1_NAMESPACE,r}return n(r,e),r}(a.SignatureAlgorithm);t.HmacSha1=o;var s=function(e){function r(){var r=e.apply(this,arguments)||this;return r.algorithm={name:t.HMAC,hash:{name:i.SHA256}},r.namespaceURI=t.HMAC_SHA256_NAMESPACE,r}return n(r,e),r}(a.SignatureAlgorithm);t.HmacSha256=s;var l=function(e){function r(){var r=e.apply(this,arguments)||this;return r.algorithm={name:t.HMAC,hash:{name:i.SHA384}},r.namespaceURI=t.HMAC_SHA384_NAMESPACE,r}return n(r,e),r}(a.SignatureAlgorithm);t.HmacSha384=l;var u=function(e){function r(){var r=e.apply(this,arguments)||this;return r.algorithm={name:t.HMAC,hash:{name:i.SHA512}},r.namespaceURI=t.HMAC_SHA512_NAMESPACE,r}return n(r,e),r}(a.SignatureAlgorithm);t.HmacSha512=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=r(21),i=r(23);t.RSA_PKCS1="RSASSA-PKCS1-v1_5",t.RSA_PKCS1_SHA1_NAMESPACE="http://www.w3.org/2000/09/xmldsig#rsa-sha1",t.RSA_PKCS1_SHA256_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256",t.RSA_PKCS1_SHA384_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#rsa-sha384",t.RSA_PKCS1_SHA512_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#rsa-sha512";var o=function(e){function r(){var r=e.apply(this,arguments)||this;return r.algorithm={name:t.RSA_PKCS1,hash:{name:i.SHA1}},r.namespaceURI=t.RSA_PKCS1_SHA1_NAMESPACE,r}return n(r,e),r}(a.SignatureAlgorithm);t.RsaPkcs1Sha1=o;var s=function(e){function r(){var r=e.apply(this,arguments)||this;return r.algorithm={name:t.RSA_PKCS1,hash:{name:i.SHA256}},r.namespaceURI=t.RSA_PKCS1_SHA256_NAMESPACE,r}return n(r,e),r}(a.SignatureAlgorithm);t.RsaPkcs1Sha256=s;var l=function(e){function r(){var r=e.apply(this,arguments)||this;return r.algorithm={name:t.RSA_PKCS1,hash:{name:i.SHA384}},r.namespaceURI=t.RSA_PKCS1_SHA384_NAMESPACE,r}return n(r,e),r}(a.SignatureAlgorithm);t.RsaPkcs1Sha384=l;var u=function(e){function r(){var r=e.apply(this,arguments)||this;return r.algorithm={name:t.RSA_PKCS1,hash:{name:i.SHA512}},r.namespaceURI=t.RSA_PKCS1_SHA512_NAMESPACE,r}return n(r,e),r}(a.SignatureAlgorithm);t.RsaPkcs1Sha512=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=r(21),i=r(23);t.RSA_PSS="RSA-PSS",t.RSA_PSS_WITH_PARAMS_NAMESPACE="http://www.w3.org/2007/05/xmldsig-more#rsa-pss";var o=function(e){function r(r){var n=e.call(this)||this;return n.algorithm={name:t.RSA_PSS,hash:{name:i.SHA1}},n.namespaceURI=t.RSA_PSS_WITH_PARAMS_NAMESPACE,r&&(n.algorithm.saltLength=r),n}return n(r,e),r}(a.SignatureAlgorithm);t.RsaPssBase=o;var s=function(e){function t(t){var r=e.call(this,t)||this;return r.algorithm.hash.name=i.SHA1,r}return n(t,e),t}(o);t.RsaPssSha1=s;var l=function(e){function t(t){var r=e.call(this,t)||this;return r.algorithm.hash.name=i.SHA256,r}return n(t,e),t}(o);t.RsaPssSha256=l;var u=function(e){function t(t){var r=e.call(this,t)||this;return r.algorithm.hash.name=i.SHA384,r}return n(t,e),t}(o);t.RsaPssSha384=u;var c=function(e){function t(t){var r=e.call(this,t)||this;return r.algorithm.hash.name=i.SHA512,r}return n(t,e),t}(o);t.RsaPssSha512=c},function(e,t,r){"use strict";var n=r(1),a=r(22),i=r(14),o=r(82).default,s=r(25),l=s.setEngine,u=s.getCrypto,c=r(2),m={"2.5.4.3":{short:"CN",long:"CommonName"},"2.5.4.6":{short:"C",long:"Country"},"2.5.4.5":{long:"DeviceSerialNumber"},"0.9.2342.19200300.100.1.25":{short:"DC",long:"DomainComponent"},"1.2.840.113549.1.9.1":{short:"E",long:"EMail"},"2.5.4.42":{short:"G",long:"GivenName"},"2.5.4.43":{short:"I",long:"Initials"},"2.5.4.7":{short:"L",long:"Locality"},"2.5.4.10":{short:"O",long:"Organization"},"2.5.4.11":{short:"OU",long:"OrganizationUnit"},"2.5.4.8":{short:"ST",long:"State"},"2.5.4.9":{short:"Street",long:"StreetAddress"},"2.5.4.4":{short:"SN",long:"SurName"},"2.5.4.12":{short:"T",long:"Title"},"1.2.840.113549.1.9.8":{long:"UnstructuredAddress"},"1.2.840.113549.1.9.2":{long:"UnstructuredName"}},f=function(){function e(e){if(this.publicKey=null,e){var t=new Uint8Array(e);this.LoadRaw(t),this.raw=t}}return Object.defineProperty(e.prototype,"SerialNumber",{get:function(){return n.Convert.ToHex(new Uint8Array(this.simpl.serialNumber.valueBlock.valueHex))},enumerable:!0,configurable:!0}),e.prototype.NameToString=function(e,t){void 0===t&&(t=",");for(var r=[],n=0,a=e.typesAndValues;n<a.length;n++){var i=a[n],o=i.type,s=m[o.toString()].short;r.push((s?s:o)+"="+i.value.valueBlock.value)}return r.join(t+" ")},Object.defineProperty(e.prototype,"Issuer",{get:function(){return this.NameToString(this.simpl.issuer)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Subject",{get:function(){return this.NameToString(this.simpl.subject)},enumerable:!0,configurable:!0}),e.prototype.Thumbprint=function(e){return void 0===e&&(e="SHA-1"),i.Application.crypto.subtle.digest(e,this.raw)},e.prototype.LoadRaw=function(e){this.raw=new Uint8Array(e);var t=c.fromBER(this.raw.buffer);this.simpl=new o({schema:t.result})},Object.defineProperty(e.prototype,"PublicKey",{get:function(){return this.publicKey},enumerable:!0,configurable:!0}),e.prototype.GetRaw=function(){return this.raw},e.prototype.exportKey=function(e){var t=this;return Promise.resolve().then(function(){u()||l(i.Application.crypto.name,i.Application.crypto,i.Application.crypto.subtle);var r={algorithm:e,usages:["verify"]};return r.algorithm.name.toUpperCase()===a.ECDSA&&(r.algorithm.namedCurve=t.simpl.subjectPublicKeyInfo.toJSON().crv),t.simpl.getPublicKey({algorithm:r}).then(function(e){return t.publicKey=e,e})})},e}();t.X509Certificate=f},function(e,t,r){"use strict";function n(e,t){if(e.nodeType!==a.XmlNodeType.Element)return null;if(e.hasAttribute("Id")&&e.getAttribute("Id")===t)return e;if(e.childNodes&&e.childNodes.length)for(var r=0;r<e.childNodes.length;r++){var i=n(e.childNodes[r],t);if(i)return i}return null}var a=r(1),i=r(32),o=r(12),s=r(41),l=r(22),u=r(33),c=r(12),m=function(){function e(e){if(this.signature=new i.Signature,e&&e.nodeType===a.XmlNodeType.Document)this.document=e;else if(e&&e.nodeType===a.XmlNodeType.Element){var t=(new XMLSerializer).serializeToString(e);this.document=(new DOMParser).parseFromString(t,a.APPLICATION_XML)}}return Object.defineProperty(e.prototype,"XmlSignature",{get:function(){return this.signature},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Signature",{get:function(){return this.XmlSignature.SignatureValue},enumerable:!0,configurable:!0}),e.prototype.GetPublicKeys=function(){var e=this,t=[];return Promise.resolve().then(function(){for(var r=e.XmlSignature.KeyInfo.GetIterator(),n=[],a=0,i=r;a<i.length;a++){var o=i[a],l=s.CryptoConfig.CreateSignatureAlgorithm(e.XmlSignature.SignedInfo.SignatureMethod);if(o instanceof c.KeyInfoX509Data)for(var u=0,m=o.Certificates;u<m.length;u++){var f=m[u];n.push(f.exportKey(l.algorithm).then(function(e){t.push(e)}))}else n.push(o.exportKey(l.algorithm).then(function(e){t.push(e)}))}return Promise.all(n)}).then(function(){return t})},e.prototype.FixupNamespaceNodes=function(e,t,r){var n=a.SelectNamespaces(e);for(var i in n){var o=n[i];r&&""===i||t.setAttribute("xmlns"+(i?":"+i:""),o)}},e.prototype.DigestReference=function(e,t,r){var i=this;return Promise.resolve().then(function(){var r=null;if(t.Uri){var o;if(t.Uri.indexOf("#xpointer"))"#"===t.Uri[0]&&(o=t.Uri.substring(1));else{var l=t.Uri;l=l.substring(9).replace(/[\r\n\t\s]/g,""),l=l.length<2||"("!==l[0]||")"!==l[l.length-1]?"":l.substring(1,l.length-1),l.length>6&&0===l.indexOf("id(")&&")"===l[l.length-1]&&(o=l.substring(4,l.length-2))}if(o){var c=null;if(i.XmlSignature.ObjectList&&i.XmlSignature.ObjectList.Some(function(t){if(c=n(t.GetXml(),o)){var r=c.cloneNode(!0);return i.FixupNamespaceNodes(e,r,!0),e=r,!0}return!1}),!c&&e&&(c=a.XmlObject.GetElementById(e,o))){var m=c.cloneNode(!0);i.FixupNamespaceNodes(e,m,!1),e=m}if(null==c)throw new a.XmlError(a.XE.CRYPTOGRAPHIC,"Cannot get object by reference: "+o)}}if(t.Transforms&&t.Transforms.Count){if(t.Transforms.Sort(function(e,t){return t instanceof u.XmlDsigEnvelopedSignatureTransform?1:0}).ForEach(function(t){t instanceof u.XmlDsigC14NWithCommentsTransform&&(t=new u.XmlDsigC14NTransform),t instanceof u.XmlDsigExcC14NWithCommentsTransform&&(t=new u.XmlDsigExcC14NTransform),t.LoadInnerXml(e),r=t.GetOutput()}),1===t.Transforms.Count&&t.Transforms.Item(0)instanceof u.XmlDsigEnvelopedSignatureTransform){var f=new u.XmlDsigC14NTransform;f.LoadInnerXml(e),r=f.GetOutput()}}else if(t.Uri&&"#"!==t.Uri[0])r=(new XMLSerializer).serializeToString(e);else{var h=new u.XmlDsigC14NTransform;h.LoadInnerXml(e),r=h.GetOutput()}if(!t.DigestMethod.Algorithm)throw new a.XmlError(a.XE.NULL_PARAM,"Reference","DigestMethod");var p=s.CryptoConfig.CreateHashAlgorithm(t.DigestMethod.Algorithm);return p.Digest(r)})},e.prototype.DigestReferences=function(e){var t=this;return Promise.resolve().then(function(){var r=t.XmlSignature.SignedInfo.References.Map(function(r){return r.DigestMethod.Algorithm||(r.DigestMethod.Algorithm=(new l.Sha256).namespaceURI),t.DigestReference(e,r,!1).then(function(e){r.DigestValue=e})}).GetIterator();return Promise.all(r)})},e.prototype.TransformSignedInfo=function(){var e=s.CryptoConfig.CreateFromName(this.XmlSignature.SignedInfo.CanonicalizationMethod.Algorithm),t=this.XmlSignature.SignedInfo.GetXml();if(!t)throw new a.XmlError(a.XE.XML_EXCEPTION,"Cannot get Xml element from SignedInfo");var r=t.cloneNode(!0),n=a.SelectNamespaces(t);for(var i in n){var o=n[i];i!==r.prefix&&r.setAttribute("xmlns"+(i?":"+i:""),o)}e.LoadInnerXml(r);var l=e.GetOutput();return l},e.prototype.ApplySignOptions=function(e,t,r,n){return void 0===n&&(n={}),Promise.resolve().then(function(){if(n.keyValue&&r.algorithm.name.toUpperCase()!==l.HMAC){
e.KeyInfo||(e.KeyInfo=new i.KeyInfo);var t=e.KeyInfo,a=new o.KeyValue;return t.Add(a),a.importKey(n.keyValue)}return Promise.resolve()}).then(function(){if(n.x509){e.KeyInfo||(e.KeyInfo=new i.KeyInfo);for(var t=e.KeyInfo,r=0,s=n.x509;r<s.length;r++){var l=s[r],u=a.Convert.FromBase64(l),c=new o.KeyInfoX509Data(u);t.Add(c)}}return Promise.resolve()}).then(function(){if(n.references&&n.references.forEach(function(t){var r=new i.Reference;t.id&&(r.Id=t.id),t.uri&&(r.Uri=t.uri),t.type&&(r.Type=t.type);var n="string"==typeof t.hash?{name:t.hash}:t.hash,o=s.CryptoConfig.GetHashAlgorithm(n);if(r.DigestMethod.Algorithm=o.namespaceURI,t.transforms&&t.transforms.length){var l=new i.Transforms;t.transforms.forEach(function(e){switch(e){case"enveloped":l.Add(new u.XmlDsigEnvelopedSignatureTransform);break;case"c14n":l.Add(new u.XmlDsigC14NTransform);break;case"c14n-com":l.Add(new u.XmlDsigC14NWithCommentsTransform);break;case"exc-c14n":l.Add(new u.XmlDsigExcC14NTransform);break;case"exc-c14n-com":l.Add(new u.XmlDsigExcC14NWithCommentsTransform);break;case"base64":l.Add(new u.XmlDsigBase64Transform);break;default:throw new a.XmlError(a.XE.CRYPTOGRAPHIC_UNKNOWN_TRANSFORM,e)}}),r.Transforms=l}e.SignedInfo.References||(e.SignedInfo.References=new i.References),e.SignedInfo.References.Add(r)}),!e.SignedInfo.References.Count){var t=new i.Reference;e.SignedInfo.References.Add(t)}return Promise.resolve()})},e.prototype.Sign=function(e,t,r,n){var i,o,u=this;return Promise.resolve().then(function(){var r=a.assign({},t.algorithm,e);return i=s.CryptoConfig.GetSignatureAlgorithm(r),u.ApplySignOptions(u.XmlSignature,e,t,n)}).then(function(){return o=u.XmlSignature.SignedInfo,u.DigestReferences(r.documentElement)}).then(function(){if(o.SignatureMethod.Algorithm=i.namespaceURI,l.RSA_PSS.toUpperCase()===e.name.toUpperCase()){var r=a.assign({},t.algorithm,e);"string"==typeof r.hash&&(r.hash={name:r.hash});var n=new c.PssAlgorithmParams(r);u.XmlSignature.SignedInfo.SignatureMethod.Any.Add(n)}else if(l.HMAC.toUpperCase()===e.name.toUpperCase()){var s=0,m=t.algorithm;switch(m.hash.name.toUpperCase()){case l.SHA1:s=m.length||160;break;case l.SHA256:s=m.length||256;break;case l.SHA384:s=m.length||384;break;case l.SHA512:s=m.length||512}u.XmlSignature.SignedInfo.SignatureMethod.HMACOutputLength=s}var f=u.TransformSignedInfo();return i.Sign(f,t,e)}).then(function(e){return u.Key=t,u.XmlSignature.SignatureValue=e,u.document=r,u.XmlSignature})},e.prototype.ValidateReferences=function(e){var t=this;return Promise.resolve().then(function(){return Promise.all(t.XmlSignature.SignedInfo.References.Map(function(r){return t.DigestReference(e,r,!1).then(function(e){var t=a.Convert.ToBase64(e),n=a.Convert.ToString(r.DigestValue,"base64");if(t!==n){var i="Invalid digest for uri '"+r.Uri+"'. Calculated digest is "+t+" but the xml to validate supplies digest "+n;throw new a.XmlError(a.XE.CRYPTOGRAPHIC,i)}return Promise.resolve(!0)})}).GetIterator())}).then(function(){return!0})},e.prototype.ValidateSignatureValue=function(e){var t,r,n=this;return Promise.resolve().then(function(){r=n.TransformSignedInfo(),t=s.CryptoConfig.CreateSignatureAlgorithm(n.XmlSignature.SignedInfo.SignatureMethod);var a=Promise.resolve(!1);return e.forEach(function(e){a=a.then(function(a){return a?Promise.resolve(a):t.Verify(r,e,n.Signature)})}),a})},e.prototype.Verify=function(e){var t=this;return Promise.resolve().then(function(){var e=t.document;if(!e||!e.documentElement)throw new a.XmlError(a.XE.NULL_PARAM,"SignedXml","document");return t.ValidateReferences(e.documentElement)}).then(function(r){if(r){var n=Promise.resolve([]);return n=e?n.then(function(){return[e]}):n.then(function(){return t.GetPublicKeys()}),n.then(function(e){return t.ValidateSignatureValue(e)})}return!1})},e.prototype.GetXml=function(){return this.signature.GetXml()},e.prototype.LoadXml=function(e){this.signature=i.Signature.LoadXml(e)},e.prototype.toString=function(){var e=this.XmlSignature,t=!1;if(e.SignedInfo.References&&e.SignedInfo.References.Some(function(e){return e.Transforms&&e.Transforms.Some(function(e){return e instanceof u.XmlDsigEnvelopedSignatureTransform&&(t=!0),t}),t}),t){var r=this.document.documentElement.cloneNode(!0),n=this.XmlSignature.GetXml();if(!n)throw new a.XmlError(a.XE.XML_EXCEPTION,"Cannot get Xml element from Signature");var i=n.cloneNode(!0);return r.appendChild(i),(new XMLSerializer).serializeToString(r)}return this.XmlSignature.toString()},e}();t.SignedXml=m},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(1),s=r(1),l=r(15),u=r(72),c=r(71),m=r(6),f=r(22),h=function(e){function t(t){var r=e.call(this)||this;return t&&(r.Value=t),r}return n(t,e),Object.defineProperty(t.prototype,"Value",{get:function(){return this.value},set:function(e){this.element=null,this.value=e},enumerable:!0,configurable:!0}),t.prototype.importKey=function(e){var t=this;return Promise.resolve().then(function(){switch(e.algorithm.name.toUpperCase()){case f.RSA_PSS.toUpperCase():case f.RSA_PKCS1.toUpperCase():return t.Value=new u.RsaKeyValue,t.Value.importKey(e);case f.ECDSA.toUpperCase():return t.Value=new c.EcdsaKeyValue,t.Value.importKey(e);default:throw new o.XmlError(o.XE.ALGORITHM_NOT_SUPPORTED,e.algorithm.name)}}).then(function(){return t})},t.prototype.exportKey=function(e){var t=this;return Promise.resolve().then(function(){if(!t.Value)throw new o.XmlError(o.XE.NULL_REFERENCE);return t.Value.exportKey(e)})},t.prototype.OnGetXml=function(e){if(!this.Value)throw new i.XmlError(i.XE.CRYPTOGRAPHIC,"KeyValue has empty value");var t=this.Value.GetXml();t&&e.appendChild(t)},t}(l.KeyInfoClause);h=a([s.XmlElement({localName:m.XmlSignature.ElementNames.KeyValue})],h),t.KeyValue=h},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(1),s=r(6),l=r(14),u=r(15),c=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.importKey=function(e){var t=this;return Promise.resolve().then(function(){return l.Application.crypto.subtle.exportKey("spki",e)}).then(function(r){return t.SPKIexp=new Uint8Array(r),t.Key=e,t})},t.prototype.exportKey=function(e){var t=this;return Promise.resolve().then(function(){return l.Application.crypto.subtle.importKey("spki",t.SPKIexp,e,!0,["verify"])}).then(function(e){return t.Key=e,e})},t}(u.KeyInfoClause);a([i.XmlChildElement({localName:s.XmlSignature.ElementNames.SPKIexp,namespaceURI:s.XmlSignature.NamespaceURI,prefix:s.XmlSignature.DefaultPrefix,required:!0,converter:o.XmlBase64Converter})],c.prototype,"SPKIexp",void 0),c=a([i.XmlElement({localName:s.XmlSignature.ElementNames.SPKIData})],c),t.SPKIData=c},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(1),s=r(1),l=r(6),u=r(7),c=r(15),m=r(67),f=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(u.XmlSignatureObject);a([s.XmlChildElement({localName:l.XmlSignature.ElementNames.X509IssuerName,namespaceURI:l.XmlSignature.NamespaceURI,prefix:l.XmlSignature.DefaultPrefix,required:!0})],f.prototype,"X509IssuerName",void 0),a([s.XmlChildElement({localName:l.XmlSignature.ElementNames.X509SerialNumber,namespaceURI:l.XmlSignature.NamespaceURI,prefix:l.XmlSignature.DefaultPrefix,required:!0})],f.prototype,"X509SerialNumber",void 0),f=a([s.XmlElement({localName:l.XmlSignature.ElementNames.X509IssuerSerial})],f),t.X509IssuerSerial=f;var h;!function(e){e[e.None=0]="None",e[e.EndCertOnly=1]="EndCertOnly",e[e.ExcludeRoot=2]="ExcludeRoot",e[e.WholeChain=3]="WholeChain"}(h=t.X509IncludeOption||(t.X509IncludeOption={}));var p=function(e){function t(t,r){void 0===r&&(r=h.None);var n=e.call(this)||this;if(n.x509crl=null,n.SubjectKeyIdList=[],n.key=null,t)if(t instanceof Uint8Array)n.AddCertificate(new m.X509Certificate(t));else if(t instanceof m.X509Certificate)switch(r){case h.None:case h.EndCertOnly:n.AddCertificate(t);break;case h.ExcludeRoot:n.AddCertificatesChainFrom(t,!1);break;case h.WholeChain:n.AddCertificatesChainFrom(t,!0)}return n}return n(t,e),Object.defineProperty(t.prototype,"Key",{get:function(){return this.key},enumerable:!0,configurable:!0}),t.prototype.importKey=function(e){return Promise.reject(new i.XmlError(i.XE.METHOD_NOT_SUPPORTED))},t.prototype.exportKey=function(e){var t=this;return Promise.resolve().then(function(){return t.Certificates.length?t.Certificates[0].exportKey(e):Promise.resolve(null)}).then(function(e){return t.key=e,e})},t.prototype.AddCertificatesChainFrom=function(e,t){throw new i.XmlError(i.XE.METHOD_NOT_IMPLEMENTED)},Object.defineProperty(t.prototype,"Certificates",{get:function(){return this.X509CertificateList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CRL",{get:function(){return this.x509crl},set:function(e){this.x509crl=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IssuerSerials",{get:function(){return this.IssuerSerialList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"SubjectKeyIds",{get:function(){return this.SubjectKeyIdList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"SubjectNames",{get:function(){return this.SubjectNameList},enumerable:!0,configurable:!0}),t.prototype.AddCertificate=function(e){if(!e)throw new i.XmlError(i.XE.PARAM_REQUIRED,"certificate");this.X509CertificateList||(this.X509CertificateList=[]),this.X509CertificateList.push(e)},t.prototype.AddIssuerSerial=function(e,t){if(null==e)throw new i.XmlError(i.XE.PARAM_REQUIRED,"issuerName");null==this.IssuerSerialList&&(this.IssuerSerialList=[]);var r={issuerName:e,serialNumber:t};this.IssuerSerialList.push(r)},t.prototype.AddSubjectKeyId=function(e){if(this.SubjectKeyIdList&&(this.SubjectKeyIdList=[]),"string"==typeof e){if(null!=e){var t=void 0;t=o.Convert.FromBase64(e),this.SubjectKeyIdList.push(t)}}else this.SubjectKeyIdList.push(e)},t.prototype.AddSubjectName=function(e){null==this.SubjectNameList&&(this.SubjectNameList=[]),this.SubjectNameList.push(e)},t.prototype.GetXml=function(){var e=this.CreateDocument(),t=this.CreateElement(e),r=this.GetPrefix();if(null!=this.IssuerSerialList&&this.IssuerSerialList.length>0)for(var n=0,a=this.IssuerSerialList;n<a.length;n++){var i=a[n],s=e.createElementNS(l.XmlSignature.NamespaceURI,r+l.XmlSignature.ElementNames.X509IssuerSerial),u=e.createElementNS(l.XmlSignature.NamespaceURI,r+l.XmlSignature.ElementNames.X509IssuerName);u.textContent=i.issuerName,s.appendChild(u);var c=e.createElementNS(l.XmlSignature.NamespaceURI,r+l.XmlSignature.ElementNames.X509SerialNumber);c.textContent=i.serialNumber,s.appendChild(c),t.appendChild(s)}if(null!=this.SubjectKeyIdList&&this.SubjectKeyIdList.length>0)for(var m=0,f=this.SubjectKeyIdList;m<f.length;m++){var h=f[m],p=e.createElementNS(l.XmlSignature.NamespaceURI,r+l.XmlSignature.ElementNames.X509SKI);p.textContent=o.Convert.ToBase64(h),t.appendChild(p)}if(null!=this.SubjectNameList&&this.SubjectNameList.length>0)for(var d=0,v=this.SubjectNameList;d<v.length;d++){var y=v[d],g=e.createElementNS(l.XmlSignature.NamespaceURI,r+l.XmlSignature.ElementNames.X509SubjectName);g.textContent=y,t.appendChild(g)}if(null!=this.X509CertificateList&&this.X509CertificateList.length>0)for(var b=0,S=this.X509CertificateList;b<S.length;b++){var w=S[b],C=e.createElementNS(l.XmlSignature.NamespaceURI,r+l.XmlSignature.ElementNames.X509Certificate);C.textContent=o.Convert.ToBase64(w.GetRaw()),t.appendChild(C)}if(null!=this.x509crl){var N=e.createElementNS(l.XmlSignature.NamespaceURI,r+l.XmlSignature.ElementNames.X509CRL);N.textContent=o.Convert.ToBase64(this.x509crl),t.appendChild(N)}return t},t.prototype.LoadXml=function(t){e.prototype.LoadXml.call(this,t),this.IssuerSerialList&&(this.IssuerSerialList=[]),this.SubjectKeyIdList&&(this.SubjectKeyIdList=[]),this.SubjectNameList&&(this.SubjectNameList=[]),this.X509CertificateList&&(this.X509CertificateList=[]),this.x509crl=null;var r=this.GetChildren(l.XmlSignature.ElementNames.X509IssuerSerial);if(r)for(var n=0,a=r;n<a.length;n++){var i=a[n],s=u.XmlSignatureObject.GetChild(i,l.XmlSignature.ElementNames.X509IssuerName,l.XmlSignature.NamespaceURI,!0),c=u.XmlSignatureObject.GetChild(i,l.XmlSignature.ElementNames.X509SerialNumber,l.XmlSignature.NamespaceURI,!0);s&&s.textContent&&c&&c.textContent&&this.AddIssuerSerial(s.textContent,c.textContent)}if(r=this.GetChildren(l.XmlSignature.ElementNames.X509SKI))for(var f=0,h=r;f<h.length;f++){var i=h[f];if(i.textContent){var p=o.Convert.FromBase64(i.textContent);this.AddSubjectKeyId(p)}}if(r=this.GetChildren(l.XmlSignature.ElementNames.X509SubjectName),null!=r)for(var d=0,v=r;d<v.length;d++){var i=v[d];i.textContent&&this.AddSubjectName(i.textContent)}if(r=this.GetChildren(l.XmlSignature.ElementNames.X509Certificate))for(var y=0,g=r;y<g.length;y++){var i=g[y];if(i.textContent){var b=o.Convert.FromBase64(i.textContent);this.AddCertificate(new m.X509Certificate(b))}}var S=this.GetChild(l.XmlSignature.ElementNames.X509CRL,!1);S&&S.textContent&&(this.x509crl=o.Convert.FromBase64(S.textContent))},t}(c.KeyInfoClause);p=a([s.XmlElement({localName:l.XmlSignature.ElementNames.X509Data})],p),t.KeyInfoX509Data=p},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=r(1),o=r(1),s=r(6),l=r(7),u=r(75),c=r(70),m=r(69),f=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(l.XmlSignatureObject);a([i.XmlAttribute({localName:s.XmlSignature.AttributeNames.Id,defaultValue:""})],f.prototype,"Id",void 0),a([i.XmlChildElement({parser:u.SignedInfo,required:!0})],f.prototype,"SignedInfo",void 0),a([i.XmlChildElement({localName:s.XmlSignature.ElementNames.SignatureValue,namespaceURI:s.XmlSignature.NamespaceURI,prefix:s.XmlSignature.DefaultPrefix,required:!0,converter:o.XmlBase64Converter,defaultValue:null})],f.prototype,"SignatureValue",void 0),a([i.XmlChildElement({parser:c.KeyInfo})],f.prototype,"KeyInfo",void 0),a([i.XmlChildElement({parser:m.DataObjects,noRoot:!0})],f.prototype,"ObjectList",void 0),f=a([i.XmlElement({localName:s.XmlSignature.ElementNames.Signature})],f),t.Signature=f},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=r(6),i=r(1),o=r(1),s=r(16),l=function(e){function t(){var t=e.apply(this,arguments)||this;return t.Algorithm=a.XmlSignature.AlgorithmNamespaces.XmlDsigBase64Transform,t}return n(t,e),t.prototype.GetOutput=function(){if(!this.innerXml)throw new o.XmlError(o.XE.PARAM_REQUIRED,"innerXml");return i.Convert.FromString(this.innerXml.textContent||"","base64")},t}(s.Transform);t.XmlDsigBase64Transform=l},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=r(16),i=r(40),o=r(1),s=function(e){function t(){var t=e.apply(this,arguments)||this;return t.xmlCanonicalizer=new i.XmlCanonicalizer(!1,!1),t.Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315",t}return n(t,e),t.prototype.GetOutput=function(){if(!this.innerXml)throw new o.XmlError(o.XE.PARAM_REQUIRED,"innerXml");return this.xmlCanonicalizer.Canonicalize(this.innerXml)},t}(a.Transform);t.XmlDsigC14NTransform=s;var l=function(e){function t(){var t=e.apply(this,arguments)||this;return t.Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments",t.xmlCanonicalizer=new i.XmlCanonicalizer(!0,!1),t}return n(t,e),t}(s);t.XmlDsigC14NWithCommentsTransform=l},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=r(1),i=r(16),o=function(e){function t(){var t=e.apply(this,arguments)||this;return t.Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature",t}return n(t,e),t.prototype.GetOutput=function(){if(!this.innerXml)throw new a.XmlError(a.XE.PARAM_REQUIRED,"innerXml");var e=a.Select(this.innerXml,".//*[local-name(.)='Signature' and namespace-uri(.)='http://www.w3.org/2000/09/xmldsig#']")[0];return e&&e.parentNode.removeChild(e),this.innerXml},t}(i.Transform);t.XmlDsigEnvelopedSignatureTransform=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=r(16),i=r(40),o=r(1),s=function(e){function t(){var t=e.apply(this,arguments)||this;return t.xmlCanonicalizer=new i.XmlCanonicalizer(!1,!0),t.Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#",t}return n(t,e),Object.defineProperty(t.prototype,"InclusiveNamespacesPrefixList",{get:function(){return this.xmlCanonicalizer.InclusiveNamespacesPrefixList},set:function(e){this.xmlCanonicalizer.InclusiveNamespacesPrefixList=e},enumerable:!0,configurable:!0}),t.prototype.GetOutput=function(){if(!this.innerXml)throw new o.XmlError(o.XE.PARAM_REQUIRED,"innerXml");return this.xmlCanonicalizer.Canonicalize(this.innerXml)},t}(a.Transform);t.XmlDsigExcC14NTransform=s;var l=function(e){function t(){var t=e.apply(this,arguments)||this;return t.Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#WithComments",t.xmlCanonicalizer=new i.XmlCanonicalizer(!0,!0),t}return n(t,e),t}(s);t.XmlDsigExcC14NWithCommentsTransform=l},function(e,t){e.exports=require("xpath.js")}]);